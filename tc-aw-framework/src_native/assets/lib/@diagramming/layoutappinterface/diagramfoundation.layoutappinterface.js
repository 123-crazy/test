// @<COPYRIGHT>@
// ==================================================
// Copyright Siemens 2020.
// PL Diagram Foundation 1973.0.1-0
// ==================================================
// @<COPYRIGHT>@
var t,n;t=this,n=function(e,t){"use strict";function o(t,i){this.diagramView=t,this.sheet=i}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function h(t){var i=[],n=[],s=SDF.Utils.Direction,h=t.getPorts();if(h)for(var e=0,o=h.length;e<o;++e){var u=h[e],r=u.getDirection();r===s.OUT?n.push(u):r===s.IN?i.push(u):r===s.BOTH&&(n.push(u),i.push(u))}return{inPorts:i,outPorts:n}}function i(t,i,n,s,h,e){this.diagramView=t,this.sheet=i,this.commonHelperObj=new o(t,i),this.branchLayoutObj=new SDF.Layout.BranchLayout(n,s,h,e)}function n(t,i,n){this.diagramView=t,this.sheet=i,this.hostInterfaceObj=n,this.wrapOption="length",this.snakeLayoutObj=new SDF.Layout.SnakeLayout(n)}o.prototype.createNode=function(t,i,n,s,h){this.diagramView.beginTransaction();h=SDF.Models.Node.createNode(this.sheet,n,s,t,i,h);return this.diagramView.endTransaction(),h},o.prototype.createPortConnection=function(t,i){
this.diagramView.beginTransaction();i=new SDF.Models.Connection(this.sheet,t,i);return this.diagramView.endTransaction(),i},o.prototype.createNodeConnection=function(t,i,n){this.diagramView.beginTransaction();t=t.createDefaultCenterPort(),i=i.createDefaultCenterPort(),i=this.createPortConnection(t,i);return n&&i.setRenderingProperties(n),this.diagramView.endTransaction(),i},o.prototype.createNodeConnectionOnSamePort=function(t,i,n){this.diagramView.beginTransaction();var s=(s=h(t).outPorts[0])||t.createDefaultCenterPort(),t=(t=h(i).inPorts[0])||i.createDefaultCenterPort(),t=this.createPortConnection(s,t);return n&&t.setRenderingProperties(n),this.diagramView.endTransaction(),t},i.prototype.createBranch=function(t,i,n,s,h){return this.commonHelperObj.createNode(t,i,n,s,h)},i.prototype.createNode=function(t,i,n,s,h){return this.commonHelperObj.createNode(t,i,n,s,h)},i.prototype.addNodesToBranch=function(t,i,n){this.branchLayoutObj.addNodesToBranch(t,i,n)},i.prototype.initBranch=function(
t,i){this.branchLayoutObj.initBranch(t,i)},i.prototype.addChildBranch=function(t,i,n,s){this.branchLayoutObj.addChildBranch(t,i,n,s)},i.prototype.addParentBranch=function(t,i,n,s){this.branchLayoutObj.addParentBranch(t,i,n,s)},i.prototype.insertBranch=function(t,i,n,s,h,e){this.branchLayoutObj.insertBranch(t,i,n,s,h,e)},i.prototype.removeBranches=function(t,i){this.branchLayoutObj.removeBranches(t,i)},i.prototype.addConnection=function(t,i){i=this.commonHelperObj.createNodeConnection(t,i);return this.branchLayoutObj.addConnections([i]),i},i.prototype.removeConnection=function(t){this.branchLayoutObj.removeConnections([t])},i.prototype.clear=function(){this.branchLayoutObj.clear()},i.prototype.collapseUpAll=function(t,i){this.branchLayoutObj.collapseUpAll(t,i)},i.prototype.deleteLeafNode=function(t,i){this.branchLayoutObj.deleteLeafNode(t,i)},i.prototype.setGlobalCompact=function(t){this.branchLayoutObj.setGlobalCompact(t)},i.prototype.beginCompoundCommands=function(){
this.branchLayoutObj.beginCompoundCommands()},i.prototype.endCompoundCommandsAndUpdate=function(){this.branchLayoutObj.endCompoundCommandsAndUpdate()},n.prototype.setWrapOption=function(t,i){switch(this.wrapOption=t){case"length":this.snakeLayoutObj.setWrapLength(i);break;case"canvas":case"viewport":break;default:this.hostInterfaceObj.reportError("Unsupported wrap option: "+t),this.wrapOption="length"}},n.prototype.setPortSharing=function(t){this.snakeLayoutObj.setPortSharing(t)},n.prototype.doLayout=function(t,i){var n=this.wrapOption;switch(n){case"length":this.doLayoutForOptLength(t,i);break;case"canvas":this.doLayoutForOptCanvas(t,i);break;case"viewport":this.doLayoutForOptViewport(t,i);break;default:this.hostInterfaceObj.reportError("Unsupported wrap option: "+n),this.doLayoutForOptLength(t,i)}},n.prototype.doLayoutForOptLength=function(t,i){this.snakeLayoutObj.doLayout(t,i)},n.prototype.doLayoutForOptCanvas=function(t,i){var n=this.diagramView.getVirtualCanvas(),
s=this.hostInterfaceObj.getLayoutDirection(),n=s===e.LayoutDirection.LeftToRight||s===e.LayoutDirection.RightToLeft?n.width():n.height();this.snakeLayoutObj.setWrapLength(n),this.snakeLayoutObj.doLayout(t,i),this.diagramView.fit()},n.prototype.doLayoutForOptViewport=function(t,i){var n=this.diagramView.getManager().getViewport(),s=this.hostInterfaceObj.getLayoutDirection(),h=s===e.LayoutDirection.LeftToRight||s===e.LayoutDirection.RightToLeft?n.width:n.height,s=this.hostInterfaceObj.getNodeToNodeDist();this.snakeLayoutObj.setWrapLength(h),this.snakeLayoutObj.setGraphOrigin(n.x,n.y),this.snakeLayoutObj.setPadding(s.y,s.y,s.x,s.x),this.snakeLayoutObj.doLayout(t,i)},t.common.ObjectHelper.rootNamespace=t.common.ObjectHelper.rootNamespace||{};t=t.common.ObjectHelper.rootNamespace;t.BranchLayoutAppInterface=i,t.SnakeLayoutAppInterface=n;t={};return t.BranchLayoutAppInterface=i,t.SnakeLayoutAppInterface=n,t.CommonHelper=o,t},
"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@diagramming/layoutcore"),require("@diagramming/core")):"function"==typeof define&&define.amd?define(["@diagramming/layoutcore","@diagramming/core"],n):((t=t||self).diagramfoundation=t.diagramfoundation||{},t.diagramfoundation.layoutappinterface=n(t.diagramfoundation.layoutcore,t.diagramfoundation.core));