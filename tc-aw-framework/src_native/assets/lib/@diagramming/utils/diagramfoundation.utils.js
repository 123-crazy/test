// @<COPYRIGHT>@
// ==================================================
// Copyright Siemens 2020.
// PL Diagram Foundation 1973.0.1-0
// ==================================================
// @<COPYRIGHT>@
var t,n;t=this,n=function(d){"use strict";d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;var t={HANGING:1,TOP:2,PERCENT:4,MIDDLE:8,BOTTOM:16,START:32,END:64},n={NONE:0,PortToPort:1,NodeToNode:2,PortToSegmentEndPoint:3,AnnotationToAnnotation:4,AnnotationToNode:5,SnapToGrid:6,NodeToAnnotation:7,ConnectionToConnection:8,PortToConnectionEndPoint:9,ConnectionEndPointToPort:10,ConnectionToNode:11,NodeToConnection:12,AnnotationToConnection:13,ConnectionToAnnotation:14,PortToConnectionProjected:15},i={NONE:0,LeftToLeft:1,LeftToRight:2,VerticalCenterLine:3,RightToRight:4,RightToLeft:5,TopToTop:6,TopToBottom:7,BottomToBottom:8,BottomToTop:9,HorizontalCenterLine:10,PortConnectingPoint:11,PortToSegmentEndPoint:12,PortToConnectionEndPoint:13,ConnectionEndPointToPort:14};i.getAlignmentData=function(t,n,i,r){for(var e=[],s=t.length,h=0;h<s;h++){var o,u=i[h];r&&u!==r||(0<=(o=function(t,n){for(var i=0,r=n.length;i<r;i++)if(n[i].source===t)return i;return-1}(t[h],e)
)?e[o].targetsData.push({targetElement:n[h],type:u}):(u={source:t[h],targetsData:[{targetElement:n[h],type:u}]},e.push(u)))}return e};var r={NONE:0,Port:1,Node:2,Connection:4,Annotation:8,All:15},e={NONE:0,TOP:1,BOTTOM:2,LEFT:4,RIGHT:8};e.ALL=e.TOP|e.BOTTOM|e.LEFT|e.RIGHT;var s={NONE:0,TRANSLATION:1,ROTATION:2,SCALE:4},h={OPEN_ARROW:0,FILLED_ARROW:1,CLOSED_SOLID_ARROW:2,LINE_END_TEE:3},o={SINGLE:1,MULTIPLE:2},u={None:0,CreateNode:1,MoveNode:2,CreateConnection:3,EditConnection:4,NodeAttachToConnectionSegment:5,PortAttachToConnectionEnd:6,NodeAttachToConnectionEnd:7,NodeSideAttachToConnectionEnd:8,PortAttachToNodeSide:9,ConnectionEndAttachToNode:10,ConnectionEndAttachToNodeSide:11,ConnectionEndAttachToConnectionSegment:12,ConnectionEndAttachToPort:13,PortAttachToPort:14},a={NONE:0,LEFT:1,CENTER:2,RIGHT:4,TOP:8,MIDDLE:16,BOTTOM:32,HORIZONTAL:7,VERTICAL:56,ALL:63},f={X:0,Y:1},c={STARTING:0,DELTA:1,ENDED:2},v={};function l(t,n,i,r){this.red=t,this.green=n,this.blue=i,
this.alpha=void 0===r?1:r}v.Success=0,v.NoChange=1,v.UnexpectedInput=2,l.prototype.toString=function(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},l.prototype.copyFrom=function(t){this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha},l.prototype.clone=function(){return new l(this.red,this.green,this.blue,this.alpha)},l.prototype.equal=function(t){return!!t&&(this.red===t.red&&this.green===t.green&&this.blue===t.blue&&this.alpha===t.alpha)},l.prototype.toJsonObject=function(){return[this.red,this.green,this.blue,this.alpha]},l.Blue=new l(0,191,255),l.Orange=new l(255,215,0),l.Cyan=new l(0,206,209),l.PureBlue=new l(65,105,225),l.VeryLightGray=new l(244,244,244),l.Black=new l(0,0,0);var E={};function T(){this.CREATENODE={state:!1,cursor:E.CREATENODE},this.CREATECONNECTION={state:!1,cursor:E.SELECT},this.VIEWONLY={state:!1,cursor:E.VIEWONLY},this.DEFAULT={state:!0,cursor:E.DEFAULT},this.ZOOMMODE={state:!1,cursor:E.RECTZOOM},this.PANMODE={
state:!1,cursor:E.PAN}}E.IMMEDIATE="immediate",E.DEFAULT="default",E.VIEWONLY="viewonly",E.SELECT="select",E.PRESELECT="preselect",E.MOVE="move",E.MOVEHSEG="move-h-segment",E.MOVEVSEG="move-v-segment",E.MOVENWSEG="move-nw-segment",E.MOVENESEG="move-ne-segment",E.MOVECEND="move-connection-end",E.ERESIZE="e-resize",E.NERESIZE="ne-resize",E.NWRESIZE="nw-resize",E.NRESIZE="n-resize",E.SWRESIZE="sw-resize",E.SERESIZE="se-resize",E.SRESIZE="s-resize",E.WRESIZE="w-resize",E.PAN="pan",E.BUSY="busy",E.HELP="help",E.UNAVAIL="unavail",E.ROTATEHOV="rotate-hover",E.ROTATECLICK="rotate-click",E.CREATECON="create-connection",E.CONNECTIONLINKSTART="link-start",E.CONNECTIONNODESIDESTART="link-nodeside-start",E.CONNECTIONSEGMENTSTART="link-segment-start",E.CREATENODE="create-node",E.EAC="expand-collapse",E.ZOOM="zoom",E.PREMULTISELECT="pre-multi-select",E.MULTISELECT="multi-select",E.RECTSELECT="rectangle-select",E.RECTZOOM="rectangle-zoom",E.SINGLESELECT="single-select",E.TEXTEDIT="text-edit",
E.LINK="link",E.BRKLINK="brklink",E.ATTACH="attach",E.TEE="tee",E.MOVEENTIRECON="move-entire-connection",E.DRAGMOVE="drag-move",E.DRAGCOPY="drag-copy",E.DROPREJECT="drop-reject",E.MOVEREJECT="move-reject",T.prototype.changeState=function(t,n){this[t]&&(this[t].state=n)},T.prototype.isActive=function(t){return!!this[t]&&this[t].state},T.prototype.getCursorId=function(t){return this[t]?this[t].cursor:E.DEFAULT};var O={DEFAULT_WIDTH_MARGIN:14,DEFAULT_HEIGHT_MARGIN:20,DEFAULT_PORT_SIZE:0,HIT_TEST_TOLERANCE:1,SEL_PREF_selection_radius_medium:4,SEL_PREF_selection_radius_small:2,SEL_PREF_selection_radius_large:7,EPSILON:1e-10,ReferenceObject:"ReferenceObject",VIEW_FEATURE_BACKGROUND:1,VIEW_FEATURE_GRID:2,VIEW_FEATURE_RULER:4,VIEW_FEATURE_ALL:7,CURSOR_STANDARD:"default",CURSOR_CROSSHAIR:"crosshair",CURSOR_MOVE:"move",CURSOR_ERESIZE:"e-resize",CURSOR_NERESIZE:"ne-resize",CURSOR_NWRESIZE:"nw-resize",CURSOR_NRESIZE:"n-resize",CURSOR_SWRESIZE:"sw-resize",CURSOR_SERESIZE:"se-resize",
CURSOR_SRESIZE:"s-resize",CURSOR_WRESIZE:"w-resize",CURSOR_POINTER:"pointer",CURSOR_STOP:"not-allowed",arrowWidth:10,arrowHeight:8,openArrowSvgNoVectorEffect:"<svg><line x1='0%' y1='0%' x2='100%' y2='50%'/><line  x1='0%' y1='100%' x2='100%' y2='50%'/></svg>",openArrowSvg:"<svg><line x1='0%' y1='0%' x2='100%' y2='50%' vector-effect='non-scaling-stroke'/><line  x1='0%' y1='100%' x2='100%' y2='50%' vector-effect='non-scaling-stroke'/></svg>",filledArrowSvgNoVectorEffect:"<svg><path d='M 0 1 L 10 4 L 0 7 L 0 1 z'/></svg>",filledArrowSvg:"<svg><path d='M 0 1 L 10 4 L 0 7 L 0 1 z' vector-effect='non-scaling-stroke'/></svg>",lineEndTeeArrowSvgNoVectorEffect:"<svg><line x1='0%' y1='0%' x2='0%' y2='100%'/></svg>",lineEndTeeArrowSvg:"<svg><line x1='0%' y1='0%' x2='0%' y2='100%' vector-effect='non-scaling-stroke'/></svg>",TEXT_EDITOR_OFFSET:5,DOM_PREFIX:"SDF_",DOM_CANVAS_WRAPPER:"canvasWrapper",DOM_MAIN_CANVAS:"mainCanvas",DOM_OVERLAY_CANVAS:"overlayCanvas",DOM_OVERLAY_DIV:"overlayDiv",
DOM_SHEET_FEATURE:"sheetFeature",DOM_IMAGE_DIV:"imageDiv",DOM_VIEW_FEATURE:"viewFeature",DOM_OVERVIEW_CONTAINER:"overviewContainer",DOM_CLASS_DIAGRAM_OVERVIEW:"diagramOverview",DOM_TEXT_EDITOR_WRAPPER:"textEditorWrapper",DOM_TEXT_EDITOR:"textEditor",DOM_INLINE_TEXT_EDITOR:"inlineTextEditor",DOM_OVERVIEW_CANVAS_WRAPPER:"ovCanvasWrapper",DOM_OVERVIEW_SVG_IMAGE_DIV:"ovSvgImageDiv",DOM_OVERVIEW_SVG_ROOT:"ovSvgRoot",DOM_OVERVIEW_VIEWPORT_GROUP:"viewportGroup",DOM_OVERVIEW_VIEWPORT:"viewport",DOM_OVERVIEW_VIEWPORT_RECT:"viewportRect",DOM_OVERVIEW_RESIZE_VIEWPORT:"resizeViewport",DOM_OVERVIEW_RESIZE_VIEWPORT_RECT:"resizeViewportRect",DOM_CLASS_OVERVIEW_CONTROL_BOX:"diagramOverviewControlBox",DOM_CLASS_OVERVIEW_RESIZE_HANDLE:"diagramOverviewResizeHandle",DOM_TEXT_MEASUREMENT:"textMeasurement",DOM_TEXT_MEASUREMENT_CONTAINER:"Container",DOM_MINOR_GRID:"smallGrid",DOM_MAJOR_GRID:"grid",DOM_SVG_ROOT:"svgRoot",DOM_SVG_SHEET_DEFS:"sheetDefs",DOM_TOOLTIP_PANEL:"tipPanel",
DOM_CLASS_TOOLTIP:"diagramTooltip",DOM_SDF_DATA_TYPE:"data-sdf-type",DOM_SDF_DATA_APP_ID:"data-sdf-app-id",DOM_SDF_DATA_ID:"data-sdf-id",DOM_LINEAR_GRADIENT:"linearGradient_",DOM_RADIAL_GRADIENT:"radialGradient_",PrimaryZIndexMax:65535,PrimaryZIndexMin:0,PrimaryZIndexAnnotation:110,PrimaryZIndexSheetElementDefault:100,PrimaryZIndexConnection:10,CANVAS_ID_PREFIX_FOR_SYSTEM:"sys",CANVAS_ID_PREFIX_FOR_USERBELOWMAIN:"userBelowMain",CANVAS_ID_PREFIX_FOR_USERABOVEMAIN:"userAboveMain",CANVAS_ID_SUFFIX:"_Canvas",CANVAS_ID_SUFFIX_FOR_TEMPGEO:"_TempGeo",CANVAS_ID_FOR_VIEWFEATURE:"_ViewFeature",CANVAS_ID_FOR_FEATURE:"_FeatureElement",CANVAS_ID_FOR_DEFAULT:"_DefaultElement",CANVAS_ID_FOR_UI:"_UiElement",CANVAS_ID_FOR_OVERLAY:"_OverlayElement",CANVAS_ID_FOR_SIZE_ON_SHEET:"_SizeSheet",CANVAS_ID_FOR_SIZE_ON_DEVICE:"_SizeDevice",CANVAS_ID_FOR_CONTAINER:"sysContainerCanvas"};function m(t,n){this.x=isNaN(t)?0:t,this.y=isNaN(n)?0:n}function _(){this.doubleTolerance=O.EPSILON,this.angleTolerance=O.EPSILON
}m.prototype.clone=function(){return new m(this.x,this.y)},m.prototype.add=function(t){return new m(this.x+t.x,this.y+t.y)},m.prototype.addNumber=function(t){return new m(this.x+t,this.y)},m.prototype.subtract=function(t){return new m(this.x-t.x,this.y-t.y)},m.prototype.multiply=function(t){return new m(this.x*t.x-this.y*t.y,this.x*t.y+this.y*t.x)},m.prototype.multiplyNumber=function(t){return new m(this.x*t,this.y*t)},m.prototype.divide=function(t){var n=t.x*t.x+t.y*t.y;return new m((this.x*t.x+this.y*t.y)/n,(this.y*t.x-this.x*t.y)/n)},m.prototype.negative=function(){return new m(-this.x,-this.y)},m.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},m.prototype.equals=function(t,n){n=n||O.EPSILON;return Math.abs(this.x-t.x)<=n&&Math.abs(this.y-t.y)<=n},m.prototype.squareRoot=function(){return this.getRoot(2)},m.prototype.cubicRoot=function(){return this.getRoot(3)},m.prototype.getDegree=function(t){t=t||O.EPSILON;return Math.abs(this.y
)<=t?0<this.x?0:180:Math.abs(this.x)<=t?0<this.y?90:0===this.y?0:270:Math.atan2(this.y,this.x)/Math.PI*180},m.prototype.getRoot=function(t){var n=[],i=this.getDegree();i/=t;for(var r=360/t,e=Math.pow(this.magnitude(),1/t),s=m.tU(),h=m.nU(),o=0;o<t;o++){var u=i+o*r,a=u*Math.PI/180,f=isNaN(s[u])?Math.cos(a):s[u],u=isNaN(h[u])?Math.sin(a):h[u];n.push(new m(e*f,e*u))}return n},m.prototype.toJsonObject=function(){return{x:this.x,y:this.y}},m.prototype.toString=function(){var t=String(0!==this.x||0===this.y?this.x:"");return t+(0===this.y?"":(this.y<0?"-"+-this.y:(""===t?"":"+")+this.y)+"i")},m.tU=function(){return void 0===m.iU&&((m.iU=[])[60]=m.iU[-60]=m.iU[300]=m.iU[-300]=.5,m.iU[120]=m.iU[-120]=m.iU[240]=m.iU[-240]=-.5,m.iU[0]=m.iU[360]=1,m.iU[180]=m.iU[-180]=-1,m.iU[90]=m.iU[270]=m.iU[-90]=m.iU[-270]=0),m.iU},m.nU=function(){return void 0===m.rU&&((m.rU=[])[30]=m.rU[150]=m.rU[-330]=m.rU[-210]=.5,m.rU[-30]=m.rU[-150]=m.rU[210]=m.rU[330]=-.5,m.rU[90]=m.rU[-270]=1,m.rU[270]=m.rU[-90]=-1,
m.rU[180]=m.rU[-180]=m.rU[0]=m.rU[360]=0),m.rU},m.rU=void 0,m.iU=void 0,m.ZERO=new m(0,0),m.ONE=new m(1,0),m.I=new m(0,1),_.prototype.getTolerance=function(){return O.EPSILON},_.prototype.doubleCompare=function(t,n,i){n=t-n,i=void 0!==i?i:this.doubleTolerance;return Math.abs(n)<i?0:0<n?1:-1},_.prototype.angleCompare=function(t,n,i){i=void 0!==i?i:this.angleTolerance;return this.doubleCompare(t,n,i)},_.prototype.getRoundValue=function(t){var n=O.EPSILON;return 0===n?Math.round(t):0<n?Math.round(t/n)*n:t},_.prototype.getExtensionPoint=function(t,n,i){t=t.clone(),n=n.normalize();return t.x+=i*n.x,t.y+=i*n.y,t},_.prototype.isPointOnPolyline=function(t,n,i){for(var r=n.length,e=0;e<r-1;e++){var s=n[e],h=n[e+1],o={xMin:Math.min(s.x,h.x),xMax:Math.max(s.x,h.x),yMin:Math.min(s.y,h.y),yMax:Math.max(s.y,h.y)};if(N(t,o,i)){var u=t.x-s.x,a=t.y-s.y,f=h.x-s.x,o=h.y-s.y;if(0===this.doubleCompare(u,0,i)&&(u=0),0===this.doubleCompare(a,0,i)&&(a=0),0===this.doubleCompare(f,0,i)&&(f=0),0==u*(
o=0===this.doubleCompare(o,0,i)?0:o)-a*f)return!0;f=(s.y-h.y)/(s.x-h.x),h=(s.x*h.y-h.x*s.y)/(s.x-h.x);if(Math.abs((f*t.x-t.y+h)/Math.sqrt(f*f+1))<=i)return!0}}return!1},_.prototype.isPointInsidePolygon=function(t,n,i){for(var r=0,e=n.length,s=0;s<e;s++){var h=n[s],o=n[(s+1)%e];h.y!==o.y&&(t.y<Math.min(h.y,o.y)||t.y>=Math.max(h.y,o.y)||(t.y-h.y)*(o.x-h.x)/(o.y-h.y)+h.x>t.x&&r++)}return r%2==1};var N=function(t,n,i){return t.x>=n.xMin-i&&t.x<=n.xMax+i&&t.y>=n.yMin-i&&t.y<=n.yMax+i};_.prototype.isPointOnRoundedRect=function(t,n,i,r,e){if(!n.isPointInside(t,e))return!1;var s={xMin:n.x,xMax:n.x+i,yMin:n.y,yMax:n.y+r},h={xMin:n.x+n.width-i,xMax:n.x+n.width,yMin:n.y,yMax:n.y+r},o={xMin:n.x+n.width-i,xMax:n.x+n.width,yMin:n.y+n.height-r,yMax:n.y+n.height},n={xMin:n.x,xMax:n.x+i,yMin:n.y+n.height-r,yMax:n.y+n.height};return!!(this.isPointOnPolyline(t,[{x:s.xMax,y:s.yMin},{x:h.xMin,y:h.yMin}],e)||this.isPointOnPolyline(t,[{x:h.xMax,y:h.yMax},{x:o.xMax,y:o.yMin}],e)||this.isPointOnPolyline(t,[{
x:o.xMin,y:o.yMax},{x:n.xMax,y:n.yMax}],e)||this.isPointOnPolyline(t,[{x:n.xMin,y:n.yMin},{x:s.xMin,y:s.yMax}],e))||!!(N(t,s,e)&&this.isPointOnEllipse(t,{x:s.xMax,y:s.yMax},i,r,e)||N(t,h,e)&&this.isPointOnEllipse(t,{x:h.xMin,y:h.yMax},i,r,e)||N(t,o,e)&&this.isPointOnEllipse(t,{x:o.xMin,y:o.yMin},i,r,e)||N(t,n,e)&&this.isPointOnEllipse(t,{x:n.xMax,y:n.yMin},i,r,e))},_.prototype.isPointInsideRoundedRect=function(t,n,i,r,e){if(!n.isPointInside(t,e))return!1;var s={xMin:n.x,xMax:n.x+i,yMin:n.y,yMax:n.y+r},h={xMin:n.x+n.width-i,xMax:n.x+n.width,yMin:n.y,yMax:n.y+r},o={xMin:n.x+n.width-i,xMax:n.x+n.width,yMin:n.y+n.height-r,yMax:n.y+n.height},n={xMin:n.x,xMax:n.x+i,yMin:n.y+n.height-r,yMax:n.y+n.height};return!!this.isPointInsidePolygon(t,[{x:s.xMin,y:s.yMax},{x:h.xMax,y:h.yMax},{x:o.xMax,y:o.yMin},{x:n.xMin,y:n.yMin}],e)||(!!this.isPointInsidePolygon(t,[{x:s.xMax,y:s.yMin},{x:h.xMin,y:h.yMin},{x:o.xMin,y:o.yMax},{x:n.xMax,y:n.yMax}],e)||(!!this.isPointInsideEllipse(t,{x:s.xMax,y:s.yMax},i,r
,e)||(!!this.isPointInsideEllipse(t,{x:h.xMin,y:h.yMax},i,r,e)||(!!this.isPointInsideEllipse(t,{x:o.xMin,y:o.yMin},i,r,e)||!!this.isPointInsideEllipse(t,{x:n.xMax,y:n.yMin},i,r,e)))))},_.prototype.isPointInsideEllipse=function(t,n,i,r,e){var s=t.x,h=t.y,t=n.x,n=n.y;return(s-t)*(s-t)/(i*i)+(h-n)*(h-n)/(r*r)<=1},_.prototype.isPointOnEllipse=function(t,n,i,r,e){var s=t.x,h=t.y,t=n.x,n=n.y;return 0===this.doubleCompare((s-t)*(s-t)/(i*i)+(h-n)*(h-n)/(r*r),1,.1)},_.prototype.eU=function(t){return t instanceof m?t.squareRoot():0===this.doubleCompare(t,0,this.getTolerance())?[0]:0<t?[Math.sqrt(t)]:[new m(0,Math.sqrt(-t))]},_.prototype.sU=function(t){return t instanceof m?t.cubicRoot():0===this.doubleCompare(t,0,this.getTolerance())?[0]:0<t?[Math.pow(t,1/3)]:[-Math.pow(-t,1/3)]},_.prototype.hU=function(t,n){var i=n instanceof m;return t instanceof m?i?t.add(n):t.addNumber(n):i?n.addNumber(t):t+n},_.prototype.oU=function(t,n){var i=n instanceof m;return t instanceof m?i?t.multiply(n
):t.multiplyNumber(n):i?n.multiplyNumber(t):t*n},_.prototype.uU=function(t){if(t instanceof m){if(0===this.doubleCompare(t.y,0,this.getTolerance()))return t.x}else if(!isNaN(t))return t},_.prototype.aU=function(t,n,i,r){var e=(27*t*t*r-9*t*n*i+2*n*n*n)/(27*t*t*t)/2,i=(3*t*i-n*n)/(3*t*t)/3,i=e*e+i*i*i,s=[];if(0===this.doubleCompare(i,0,this.getTolerance())||i<0)for(var h=new m(-.5,Math.sqrt(3)/2),o=this.eU(i),u=0,a=o.length;u<a;u++){var f=o[u];0===f?A=I=-e:(A=f.addNumber(-e),I=f.negative().addNumber(-e));for(var c=this.sU(A),v=this.sU(I),l=0,E=c.length;l<E;l++)for(var T=c[l],O=0,_=v.length;O<_;O++){var N=v[O],d=this.hU(T,N),M=this.hU(this.oU(h,T),this.oU(h.multiply(h),N)),R=this.hU(this.oU(h.multiply(h),T),this.oU(h,N)),d=this.uU(d),M=this.uU(M),R=this.uU(R);void 0!==d&&s.push(d),void 0!==M&&s.push(M),void 0!==R&&s.push(R)}}else for(var A=-e+Math.sqrt(i),I=-e-Math.sqrt(i),c=this.sU(A),v=this.sU(I),u=0,E=c.length;u<E;u++)for(T=c[u],l=0,_=v.length;l<_;l++){var N=v[l],S=this.hU(T,N),
S=this.uU(S);void 0!==S&&s.push(S)}var w=[],D={},C=s.length;if(0<C)for(var L=-n/(3*t),u=0;u<C;u++){var x=Math.round(1e10*(s[u]+L))/1e10;D[x]||(w.push(x),D[x]=!0)}return w},_.prototype.W=function(t,n,i){var r=n*n-4*t*i,e=[];return 0===this.doubleCompare(r,0,this.getTolerance())?e.push(-n/(2*t)):0<r&&(i=(-n+Math.sqrt(r))/(2*t),t=(-n-Math.sqrt(r))/(2*t),e.push(i),e.push(t)),e},_.prototype.fU=function(t,n,i,r){for(var e=[],s=0,h=i.length;s<h;s++)e.push(this.getPointOnBezier(n,i[s]));for(var o=e[0].x,u=e[0].x,a=e[0].y,f=e[0].y,s=1,h=e.length;s<h;s++)e[s].x<o&&(o=e[s].x),e[s].x>u&&(u=e[s].x),e[s].y<a&&(a=e[s].y),e[s].y>f&&(f=e[s].y);return!(t.x<o-r||t.x>u+r||t.y<a-r||t.y>f+r)},_.prototype.cU=function(t,n,i,r,e){var s;i<n&&(s=i,i=n,n=s);var h=this.getPointOnBezier(r,n),o=this.getPointOnBezier(r,i),u=(a=t.distanceToPoint(h))<=(f=t.distanceToPoint(o))?a:f;if(u<=e)return!0;if(0===this.doubleCompare((a-f)/u,0))return!1;for(;;){var a,f,c=(n+i)/2,v=(c+i)/2,h=this.getPointOnBezier(r,c),
o=this.getPointOnBezier(r,v),l=(a=t.distanceToPoint(h))<=(f=t.distanceToPoint(o))?a:f;if((u=l<u?l:u)<=e)return!0;if(0===this.doubleCompare((a-f)/u,0))break;a<=f?i=v:n=c}return!1},_.prototype.getPointOnBezier=function(t,n){var i,r,e=t.length,s=t[0],h=t[1],o=t[2],t=t[3];return 2===e?(i=(1-n)*s.x+n*h.x,r=(1-n)*s.y+n*h.y):3===e?(i=(1-n)*(1-n)*s.x+2*n*(1-n)*h.x+n*n*o.x,r=(1-n)*(1-n)*s.y+2*n*(1-n)*h.y+n*n*o.y):4===e&&(i=(1-n)*(1-n)*(1-n)*s.x+3*n*(1-n)*(1-n)*h.x+3*(1-n)*n*n*o.x+n*n*n*t.x,r=(1-n)*(1-n)*(1-n)*s.y+3*n*(1-n)*(1-n)*h.y+3*(1-n)*n*n*o.y+n*n*n*t.y),{x:i,y:r}},_.prototype.getPointOnBezierByDistance=function(t,n,i,r){var e,s=i?t[t.length-1]:t[0],h=i?t[t.length-2]:t[1],h=n/s.distanceToPoint(h);1<h&&(h=1);var o=i?(e=1-h,1):(e=0,h),u=i?e:o,a=0,f=this.getPointOnBezier(t,u),c=s.distanceToPoint(f)-n,v=Math.abs(c),l=f,E=u;if(Math.abs(c)/n>r)for(;;){if(f=this.getPointOnBezier(t,u=(e+o)/2),c=s.distanceToPoint(f)-n,Math.abs(c)/n<=r){l=f,E=u;break}if(v>Math.abs(c)&&(v=Math.abs(c),l=f,E=u),
i?0<c?e=u:o=u:0<c?o=u:e=u,10<++a)break}return{point:l,t:E}},_.prototype.isPointOnQuadraticBezier=function(t,n,i,r,e){for(var s=n.x-2*i.x+r.x,h=n.y-2*i.y+r.y,o=2*i.x-2*n.x,u=2*i.y-2*n.y,a=n.x,f=n.y,c=o*o+u*u+2*s*a+2*h*f-2*s*t.x-2*h*t.y,f=o*a+u*f-o*t.x-u*t.y,v=this.aU(2*s*s+2*h*h,3*s*o+3*h*u,c,f),l=0,E=v.length;l<E;l++){var T=v[l];if(0<=T&&T<=1){T=this.getPointOnBezier([n,i,r],T);if(t.distanceToPoint(T)<=e)return!0}}return!1},_.prototype.isPointOnCubicBezier=function(t,n,i,r,e,s){for(var h,o=-n.x+3*i.x-3*r.x+e.x,u=-n.y+3*i.y-3*r.y+e.y,a=3*n.x-6*i.x+3*r.x,f=3*n.y-6*i.y+3*r.y,c=-3*n.x+3*i.x,v=-3*n.y+3*i.y,l=n.x-t.x,E=n.y-t.y,T=this.aU(o,a,c,l),O=this.aU(u,f,v,E),_=[],N=[],d=0,M=T.length;d<M;d++)0<=(h=T[d])&&h<=1&&_.push(h);for(d=0,M=O.length;d<M;d++)0<=(h=O[d])&&h<=1&&N.push(h);if(M=_.length,E=N.length,0===M&&0===E)return!1;0===M&&_.push(0,1),0===E&&N.push(0,1);E=_.concat(N);if(E.push(0,1),!this.fU(t,[n,i,r,e],E,s))return!1;var R={};for(d=0,M=_.length;d<M;d++)for(var A=_[d],I=0,
S=N.length;I<S;I++){var w=N[I];if(!R[A+"_"+w]&&!R[w+"_"+A]&&(R[A+"_"+w]=!0,this.cU(t,A,w,[n,i,r,e],s)))return!0}return!1},_.prototype.isPointOnBezier=function(t,n,i){var r=n.length;if(2===r){if(this.isPointOnPolyline(t,n,i))return!0}else if(3===r){if(this.isPointOnQuadraticBezier(t,n[0],n[1],n[2],i))return!0}else if(4===r&&this.isPointOnCubicBezier(t,n[0],n[1],n[2],n[3],i))return!0;return!1};function M(t,n,i,r){var e=[],s=t.x,h=t.y,o=n.x,u=n.y,t=(o-s)*r+s,n=(u-h)*r+h,o=((i.x-o)*r+o-t)*r+t,r=((i.y-u)*r+u-n)*r+n;return e.push({x:s,y:h}),e.push({x:t,y:n}),e.push({x:o,y:r}),e}function R(t,n,i,r,e){var s=[],h=t.x,o=t.y,u=n.x,a=n.y,f=i.x,c=i.y,v=(u-h)*e+h,u=((n=(f-u)*e+u)-v)*e+v,a=((i=(c-a)*e+a)-(t=(a-o)*e+o))*e+t,n=(((r.x-f)*e+f-n)*e+n-u)*e+u,e=(((r.y-c)*e+c-i)*e+i-a)*e+a;return s.push({x:h,y:o}),s.push({x:v,y:t}),s.push({x:u,y:a}),s.push({x:n,y:e}),s}_.prototype.splitCubicBezier=function(t,n,i,r,e,s){s=R(t,n,i,r,s),t=s[0],n=s[1],i=s[2],r=s[3],e=R(r,i,n,t,1-e);return e.reverse(),e},
_.prototype.splitQuadraticBezier=function(t,n,i,r,e){e=M(t,n,i,e),t=e[0],n=e[1],i=e[2],r=M(i,n,t,1-r);return r.reverse(),r},_.prototype.splitBezier=function(t,n,i){var r,e,s,h,o,u=[],a=t.length;return 2===a?(o=t[0],e=((r=t[1]).x-o.x)*n+o.x,s=(r.y-o.y)*n+o.y,h=(r.x-o.x)*i+o.x,o=(r.y-o.y)*i+o.y,u.push({x:e,y:s}),u.push({x:h,y:o})):3===a?u=this.splitQuadraticBezier(t[0],t[1],t[2],n,i):4===a&&(u=this.splitCubicBezier(t[0],t[1],t[2],t[3],n,i)),u};function A(t,n,i,r){for(var e=t.length,s=n.length,h=e<s?e:s,o=0;o<h;o++)if(t[o]!==n[o])return t[o]-n[o];return 0==(s=e-s)&&i&&r?i.guid-r.guid:s}function I(t,n){return A(t.u4,n.u4,t,n)}function S(){return d.DebugFlags.UseNativeDomId?"id":O.DOM_SDF_DATA_ID}var w=new _,D={LENGTH:0,AUTO:1,PERCENT:2,INHERIT:4},C={compareElementsByZDepth:function(t,n){var i=t.VD();t.u4=i;var r=n.VD();return n.u4=r,A(i,r,t,n)},compareElementsByCachedZDepth:function(t,n){var i,r,e=t.u4,s=n.u4;return 0<e.length?i=e:(i=t.VD(),t.u4=i),0<s.length?r=s:(r=n.VD(),n.u4=r),A(i,r,t,
n)},retrieveSheetElements:function(t,n,i){if(t){for(var r=t.length,e=[],s={},h=0;h<r;h++){var o=t[h].getOwner();s[o.guid]||!o.isInternal()&&o.isVisible()&&(n&&!n.call(this,o)||(i||(o.u4=o.VD()),s[o.guid]=!0,e.push(o)))}return i||e.sort(I),e}return null},sortSheetElements:function(t){if(t){for(var n=t.length,i=0;i<n;i++)t[i].u4=t[i].VD();t.sort(I)}return t},evaluateSize:function(t,n,i){if(t&&null!=n){var r,e=0,s=n==f.X?t.getWidthPolicy():t.getHeightPolicy();return s==D.LENGTH||s==D.AUTO?e=i:s==D.PERCENT?(r=t.getOwner())&&(e=n==f.X?r.getWidthValue()*i:r.getHeightValue()*i):s==D.INHERIT&&(r=t.getOwner())&&(e=n==f.X?r.getWidthValue():r.getHeightValue()),e}},smallestZDepth:function(t){if(t&&t.length){for(var n=t.length,i=t[0].getZDepth(),r=1;r<n;r++)i=Math.min(i,t[r].getZDepth());return i}return NaN},largestZDepth:function(t){if(t&&t.length){for(var n=t.length,i=t[0].getZDepth(),r=1;r<n;r++)i=Math.max(i,t[r].getZDepth());return i}return NaN},findLeastCommonAncestor:function(t,n){for(var i=[
],r=t||void 0;r;)i.push(r),r=r.getOwner();for(r=n||void 0;r;){for(var e=i.length,s=0;s<e;++s)if(r===i[s])return r;r=r.getOwner()}},ceilRect:function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t},ceilPoint:function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t},isNumberClose:function(t,n,i){return Math.abs(t-n)<i},isNumberGreaterThan:function(t,n,i){return n+i<t},isNumberLessThan:function(t,n,i){return t<n-i},isParameterValid:function(t){return null!=t&&""!==t},getRootId:function(){return O.DOM_PREFIX+O.DOM_MAIN_CANVAS},setSdfIdOnDom:function(t,n){var i=S();t.setAttribute(i,n)},getSdfIdOnDom:function(t){var n=S();return t.getAttribute(n)},queryDomBySdfId:function(t,n){n=n||document;var i=S();return n.querySelector("["+i+"='"+t+"']")},isDomTransient:function(t){return"transient"===t.getAttribute(O.DOM_SDF_DATA_TYPE)},measureTextSize:function(t,i){var n,r,e=O.DOM_PREFIX+O.DOM_TEXT_MEASUREMENT,s="http://www.w3.org/2000/svg",
h=this.queryDomBySdfId(e,document);h||(r=this.getRootId(),n=this.queryDomBySdfId(r,document),r=document.createElementNS(s,"svg"),this.setSdfIdOnDom(r,e+O.DOM_TEXT_MEASUREMENT_CONTAINER),r.setAttribute(O.DOM_SDF_DATA_TYPE,"transient"),(n||document.body).appendChild(r),h=document.createElementNS(s,"text"),this.setSdfIdOnDom(h,e),h.setAttribute("visibility","hidden"),h.setAttribute("text-rendering","geometricPrecision"),r.appendChild(h)),i.class?h.setAttribute("class",i.class):h.removeAttribute("class");var o="";["font-family","font-size","font-weight","font-style"].forEach(function(t){var n=i[t];n&&(o=o+t+":"+n+";")}),h.setAttribute("style",o),t=(t=t.replace(/ /g,".")).replace(/[><]/g,"_"),h.textContent=t;h=h.getBBox();return{height:h.height,width:h.width}},trimText:function(t,n,i,r){var e=t;if(n<(o=this.measureTextSize(t,i)).width){var s=t.length,h=Math.floor(s*n/o.width);e=t.substr(0,h=0==h?1:h);for(var o,u=(o=this.measureTextSize(e,i)).width<n,a=o;h<=s&&1<h;)if(u){if(e=t.substr(0,h+1)
,(o=this.measureTextSize(e,i)).width>n){o=a;break}a=o,h++}else if(e=t.substr(0,--h),(o=this.measureTextSize(e,i)).width<n)break;var f=(e=t.substr(0,h)).lastIndexOf(" "),c=e.lastIndexOf("-"),v=e.lastIndexOf("-");r&&(0<f||0<c||0<v)&&(v=Math.max(f,c,v),e=e.substr(0,v+1))}return{width:o.width,height:o.height,text:e}},wrapText:function(t,n,i,r){for(var e=[],s=0,h=0,o=i?this.trimText(t,n-i,r,!0):this.trimText(t,n,r,!0),u=o.text;u!=t;)s+=o.height,h=h>o.width?h:o.width,e.push(u),t=t.substr(u.length),u=(o=this.trimText(t,n,r,!0)).text;return e.push(u),s+=o.height,{width:h=h>o.width?h:o.width,height:s,textArray:e}},getArrowheadSize:function(t){var n=document.createElement("div");n.innerHTML=t;n=n.getElementsByTagName("svg");return{height:parseInt(n[0].getAttribute("height"),10),width:parseInt(n[0].getAttribute("width"),10)}},waitUntil:function(t,n){var i;!0===t.apply()?n.apply():(i=function(){!0===t.apply()?n.apply():setTimeout(i,100)},setTimeout(i,100))},removeDuplicateItem:function(t,n){
n=t.indexOf(n);-1!==n&&t.splice(n,1)},pushItemIfNotExist:function(t,n){-1===t.indexOf(n)&&t.push(n)},addMethods:function(t,n){for(var i in n)t.prototype[i]=n[i]},removeCollinearPoints:function(t,n){for(var i=t.length,r=0;r<i-2;r++){var e=t[r],s=t[r+1],h=t[r+2],o=e.x,u=e.y,a=s.x,e=s.y,s=h.x,h=h.y;0===w.doubleCompare(o,a,n)&&0===w.doubleCompare(u,e,n)||0===w.doubleCompare(a,s,n)&&0===w.doubleCompare(e,h,n)?(t.splice(r+1,1),r--,i--):0!==w.doubleCompare(o,s,n)||0!==w.doubleCompare(u,h,n)?0!==w.doubleCompare(o*e+u*s+a*h-(o*h+u*a+e*s),0,n)||(t.splice(r+1,1),r--,i--):(3==i?(t.splice(r,1),--i):(t.splice(r,2),i-=2),r--)}},getMouseWheelDelta:function(t){var n=0,t=t||window.event;return t.wheelDelta?n=t.wheelDelta:t.detail?n=-t.detail:t.deltaY&&(n=-t.deltaY),0===n?n:0<n?1:-1}},L={OrthogonalSimple:0,OrthogonalAvoidObstacle1:1,StraightLine:2,OrthogonalAvoidObstacle2:3,OrthogonalAvoidObstacle3:4},x={Orthogonal:3,NonOrthogonal:4},y={NONE:0,START:1,END:2};y.BOTH=y.START|y.END;var g={NOCHANGE:0,
DETACHED:1,ATTACHED:2},P={DISABLED:0,SEGMENTS:1,START_HANDLE:2,END_HANDLE:4,BENDPOINTS:8};P.ALL_HANDLES=Math.pow(2,16)-1;var F={None:0,AlwaysShowOneOccurrence:1,HideIfOverlap:2,HideIfOverhang:4},p={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4},V={NONE:0,RESET_AFTER_CONNECTION_MOVE:1,RESET_AFTER_CONNECTION_CHANGE:2},U={NONE:0,START:1,END:2,CENTER:4,REPEAT:8,CENTER_OF_LONGEST_SEGMENT:16,CENTER_OF_LONGEST_SEGMENT_HORIZONTAL:32,CENTER_OF_LONGEST_SEGMENT_VERTICAL:64},H={};function G(t,n){this.x=t,this.y=n}function b(t,n){this.x=t,this.y=n}function W(t,n){this.start=t,this.end=n}H.NONE=0,H.AlongWithSegment=1,H.RightReading=2,H.VFlipRightRotate=3,H.HFlipRightRotate=4,G.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},G.prototype.clone=function(){return new G(this.x,this.y)},G.prototype.equal=function(t){return this.x===t.x&&this.y===t.y},G.prototype.move=function(t){this.x+=t.x,this.y+=t.y},G.prototype.distanceToPoint=function(t){var n=t.x-this.x,t=t.y-this.y
;return Math.sqrt(n*n+t*t)},G.prototype.toJsonObject=function(){return{x:this.x,y:this.y}},b.prototype.clone=function(){return new b(this.x,this.y)},b.prototype.normalize=function(){var t=this.length();if(t){t=1/t;return new b(this.x*t,this.y*t)}return this},b.prototype.negate=function(){return new b(-this.x,-this.y)},b.prototype.length=function(){var t=this.x,n=this.y;return Math.sqrt(t*t+n*n)},b.prototype.lengthSquared=function(){var t=this.x,n=this.y;return t*t+n*n},b.prototype.equal=function(t,n){var i=n;return null==n&&(i=w.doubleTolerance),Math.abs(this.x-t.x)<=i&&Math.abs(this.y-t.y)<=i},b.prototype.round=function(t){var n=Math.ceil(this.x),i=Math.floor(this.x);0===w.doubleCompare(this.x,n,t)?this.x=n:0===w.doubleCompare(this.x,i,t)&&(this.x=i);n=Math.ceil(this.y),i=Math.floor(this.y);0===w.doubleCompare(this.y,n,t)?this.y=n:0===w.doubleCompare(this.y,i,t)&&(this.y=i)},b.prototype.dot=function(t){return this.x*t.x+this.y*t.y},b.prototype.angle=function(t){var n=this.dot(t)
;return Math.acos(n/(this.length()*t.length()))},b.prototype.rotate=function(t){var n=this.x,i=this.y,r=Math.cos(t),t=Math.sin(t);this.x=n*r-i*t,this.y=n*t+i*r},b.prototype.toJsonObject=function(){return[this.x,this.y]},b.cross=function(t,n){return t.x*n.y-t.y*n.x},b.add=function(t,n){return new b(t.x+n.x,t.y+n.y)},b.subtract=function(t,n){return new b(t.x-n.x,t.y-n.y)},b.PositiveX=new b(1,0),b.PositiveY=new b(0,1),b.NegativeX=new b(-1,0),b.NegativeY=new b(0,-1),W.prototype.copyFrom=function(t){this.start.copyFrom(t.start),this.end.copyFrom(t.end)},W.prototype.clone=function(){return new W(this.start.clone(),this.end.clone())},W.prototype.isPointOnLine=function(t,n,i){var r=n||0,e=i||0,n=t.distanceToPoint(this.start),i=t.distanceToPoint(this.end),t=this.start.distanceToPoint(this.end);return 0===w.doubleCompare(n+i,t)&&(!(e&&i<e)&&!(r&&n<r))},W.prototype.getProjectionPoint=function(t){var n=this.start,i=this.end,r=new b(t.x-n.x,t.y-n.y),t=new b(i.x-n.x,i.y-n.y),r=t.dot(r),
t=t.lengthSquared();return new G(n.x+r*(i.x-n.x)/t,n.y+r*(i.y-n.y)/t)},W.prototype.distanceFromPoint=function(t){var n=this.start,i=this.end,r=-1,e=null,s=new b(t.x-n.x,t.y-n.y),h=new b(i.x-n.x,i.y-n.y),s=h.dot(s),h=h.lengthSquared();return 0===w.doubleCompare(s,0)?r=1:0===w.doubleCompare(s,h)?r=2:w.doubleCompare(s,0)<0?r=3:0<w.doubleCompare(s,h)?r=4:((e=new G(r=0,0)).x=n.x+s*(i.x-n.x)/h,e.y=n.y+s*(i.y-n.y)/h),(1===r||3===r?n:2===r||4===r?i:e).distanceToPoint(t)},W.prototype.isParallelWithLine=function(t){var n=!1,i=new b(this.end.x-this.start.x,this.end.y-this.start.y),t=new b(t.end.x-t.start.x,t.end.y-t.start.y),t=b.cross(i,t);return n=0===w.doubleCompare(t,0)?!0:n},W.prototype.isIntersectWithLine=function(t){var n=this.getIntersectedPoint(t);if(!n)return!1;var i=this.distanceFromPoint(n),n=t.distanceFromPoint(n);return 0===w.doubleCompare(i,0)&&0===w.doubleCompare(n,0)},W.prototype.getIntersectedPoint=function(t){if(this.isParallelWithLine(t))return null;var n=new b(
this.end.x-this.start.x,this.end.y-this.start.y),i=new b(t.end.x-t.start.x,t.end.y-t.start.y),r=b.cross(n,i),e=new b(this.start.x,this.start.y),t=new b(t.start.x,t.start.y),e=b.cross(n,e),t=b.cross(i,t);return new G((i.x*e-n.x*t)/r,(i.y*e-n.y*t)/r)},W.prototype.isHorizontal=function(){var t=this.getAngle();return 0===w.angleCompare(t,0)||0===w.angleCompare(t,360)||0===w.angleCompare(t,180)},W.prototype.isVertical=function(){var t=this.getAngle();return 0===w.angleCompare(t,90)||0===w.angleCompare(t,270)},W.prototype.getAngle=function(){var t=new b(1,0),n=new b(this.end.x-this.start.x,this.end.y-this.start.y),t=n.angle(t),t=w.getRoundValue(180*t/Math.PI);return 1===w.doubleCompare(n.y,0)?360-t:t},W.prototype.getLength=function(){return new b(this.end.x-this.start.x,this.end.y-this.start.y).length()},W.prototype.toJsonObject=function(){return{start:this.start,end:this.end}};var B={NodeAndPort:0,Port:1,Node:2,NoTrim:3};function Z(){this.enableTrim=!0,this.trimStrategy=new k}function k(){
this.startTrimMode=null,this.endTrimMode=null,this.doGetStartBoundary=null,this.doGetEndBoundary=null}Z.prototype.setConfig=function(t,n){this.trimStrategy.startTrimMode!==t&&this.trimStrategy.setStartTrimMode(t),this.trimStrategy.endTrimMode!==n&&this.trimStrategy.setEndTrimMode(n)},Z.prototype.doTrim=function(t,n){if(!this.enableTrim)return n;if(n.length<2)return n;var i=this.trimStrategy,r=n,e=i.doGetStartBoundary(t),s=i.doGetEndBoundary(t);if(z.hG(r,e,s),e&&0<e.length){for(var h=[],o=0,u=e.length;o<u;o++)(a=e[o].intersectWithSegment(r[0],r[1]))&&0<a.length&&(h=h.concat(a));0<h.length&&(r[0]=z.getClosestPoint(r[1],h))}if(s&&0<s.length){for(var a,f=[],o=0,u=s.length;o<u;o++)(a=s[o].intersectWithSegment(r[r.length-2],r[r.length-1]))&&0<a.length&&(f=f.concat(a));0<f.length&&(r[r.length-1]=z.getClosestPoint(r[r.length-2],f))}return r},k.prototype.setStartTrimMode=function(t){if(t===B.NoTrim)this.doGetStartBoundary=this.TrimMode_NoTrim_getBoundary;else if(t===B.Port
)this.doGetStartBoundary=this.TrimMode_Port_getStartBoundary;else if(t===B.Node)this.doGetStartBoundary=this.TrimMode_Node_getStartBoundary;else{if(t!==B.NodeAndPort)return void alert("Error: Unknown trim mode: "+t);this.doGetStartBoundary=this.TrimMode_NodeAndPort_getStartBoundary}this.startTrimMode=t},k.prototype.setEndTrimMode=function(t){if(t===B.NoTrim)this.doGetEndBoundary=this.TrimMode_NoTrim_getBoundary;else if(t===B.Port)this.doGetEndBoundary=this.TrimMode_Port_getEndBoundary;else if(t===B.Node)this.doGetEndBoundary=this.TrimMode_Node_getEndBoundary;else{if(t!==B.NodeAndPort)return void alert("Error: Unknown trim mode: "+t);this.doGetEndBoundary=this.TrimMode_NodeAndPort_getEndBoundary}this.endTrimMode=t},k.prototype.TrimMode_NoTrim_getBoundary=function(){return null},k.prototype.TrimMode_Port_getStartBoundary=function(t){t=t.getValidStartPort();if(t){t=t.getClipBoundary();return t?[t]:null}},k.prototype.TrimMode_Port_getEndBoundary=function(t){t=t.getValidEndPort();if(t){
t=t.getClipBoundary();return t?[t]:null}},k.prototype.TrimMode_Node_getStartBoundary=function(t){t=t.getValidStartNode();if(t){t=t.getClipBoundary();return t?[t]:null}},k.prototype.TrimMode_Node_getEndBoundary=function(t){t=t.getValidEndNode();if(t){t=t.getClipBoundary();return t?[t]:null}},k.prototype.TrimMode_NodeAndPort_getStartBoundary=function(t){var n=this.TrimMode_Port_getStartBoundary(t),i=this.TrimMode_Node_getStartBoundary(t),t=n?n[0]:null,n=i?i[0]:null,i=null;return t&&n?i=n.union&&t.union?(n.union(t),[n]):[n,t]:n?i=[n]:t&&(i=[t]),i},k.prototype.TrimMode_NodeAndPort_getEndBoundary=function(t){var n=this.TrimMode_Port_getEndBoundary(t),i=this.TrimMode_Node_getEndBoundary(t),t=n?n[0]:null,n=i?i[0]:null,i=null;return t&&n?i=n.union&&t.union?(n.union(t),[n]):[n,t]:n?i=[n]:t&&(i=[t]),i};var z={};z.hG=function(t,n,i){var r,e,s=!0,h=new G(0,0),o=new G(0,0),u=n?n.length:0;if(0<u)for(;2<t.length&&s;){s=!1,h.x=t[0].x,h.y=t[0].y,o.x=t[1].x,o.y=t[1].y;for(var a=0;a<u;a++)if(
n[a].isPointInside(h,w.doubleTolerance)&&n[a].isPointInside(o,w.doubleTolerance)){t.shift(),s=!0;break}}if(s=!0,0<(u=i?i.length:0))for(;2<t.length&&s;){s=!1,r=t.length-2,e=t.length-1,h.x=t[r].x,h.y=t[r].y,o.x=t[e].x,o.y=t[e].y;for(a=0;a<u;a++)if(i[a].isPointInside(h,w.doubleTolerance)&&i[a].isPointInside(o,w.doubleTolerance)){t.pop(),s=!0;break}}},z.isTinyBoundary=function(t){return!t||(t.width<w.doubleTolerance||t.height<w.doubleTolerance)},z.getClosestPoint=function(t,n){var i=n.length;if(0===i)return null;var r=n[0];if(1===i)return r;for(var e=t.distanceToPoint(n[0]),s=1;s<i;s++){var h=t.distanceToPoint(n[s]);h<e&&(r=n[s],e=h)}return r};var X={};X.ABSOLUTE=0,X.PERCENT=1;var Y=new function(){var s=new d.Map;this.checkModel=function(t){var n=0,i="";s.clear();for(var r,e=0,e=0;e<t.length;++e)if((r=t[e].TI(s))&&2===r.status){n=1,i=r.message;break}return{status:n,message:i}}};var j={IN:1,OUT:2,BOTH:4},K={DragEnter:0,DragOver:1,Drop:2,DragLeave:3};function q(t,n,i,r){this.x=t,this.y=n,
this.width=i,this.height=r}q.prototype.getCenterX=function(){return this.x+this.width/2},q.prototype.getCenterY=function(){return this.y+this.height/2},q.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},q.prototype.clone=function(){return new q(this.x,this.y,this.width,this.height)},q.prototype.inflate=function(t,n){this.x-=t,this.y-=n,this.width+=2*t,this.height+=2*n},q.prototype.union=function(t){var n=(t.x<this.x?t:this).x,i=t.x+t.width>this.x+this.width?t.x+t.width:this.x+this.width,r=(t.y<this.y?t:this).y,t=t.y+t.height>this.y+this.height?t.y+t.height:this.y+this.height;this.x=n,this.y=r,this.width=i-n,this.height=t-r},q.prototype.hasOverlap=function(t){return!(t.x+t.width<this.x||t.x>this.x+this.width||t.y+t.height<this.y||t.y>this.y+this.height)},q.prototype.isPointOnOutline=function(t,n){return!!this.isPointInside(t,n)&&(this.inflate(-n,-n),this.isPointOutside(t))},q.prototype.isPointInside=function(t,n){var i=n;return null==n&&(
i=w.doubleTolerance),t.x>=this.x-i&&t.x<=this.x+this.width+i&&t.y>=this.y-i&&t.y<=this.y+this.height+i},q.prototype.isPointOutside=function(t){return t.x<this.x||t.x>this.x+this.width||t.y<this.y||t.y>this.y+this.height},q.prototype.equal=function(t){var n=w.doubleTolerance;return Math.abs(this.x-t.x)<n&&Math.abs(this.y-t.y)<n&&Math.abs(this.width-t.width)<n&&Math.abs(this.height-t.height)<n},q.prototype.isInsideRect=function(t){var n=w.doubleTolerance;return this.x>t.x+n&&this.x+this.width<t.x+t.width-n&&this.y>t.y+n&&this.y+this.height<t.y+t.height-n},q.prototype.isOutsideRect=function(t){var n=w.doubleTolerance;return this.x+this.width<t.x-n||this.x>t.x+t.width+n||this.y+this.height<t.y-n||this.y>t.y+t.height+n},q.prototype.isIntersectWithLine=function(t){var n=Math.min(t.start.x,t.end.x),i=Math.min(t.start.y,t.end.y),r=new q(n,i,Math.max(t.start.x,t.end.x)-n,Math.max(t.start.y,t.end.y)-i);if(r.isInsideRect(this)||r.isOutsideRect(this))return!1;if(this.isPointInside(t.start
)&&this.isPointOutside(t.end)||this.isPointInside(t.end)&&this.isPointOutside(t.start))return!0;for(var e=new G(this.x,this.y),n=new G(this.x+this.width,this.y),i=new G(this.x+this.width,this.y+this.height),r=new G(this.x,this.y+this.height),s=[new W(e,n),new W(n,i),new W(i,r),new W(r,e)],h=0;h<s.length;h++)if(s[h].isIntersectWithLine(t))return!0;return!1},q.prototype.toString=function(){for(var t="{",n=[this.x,this.y,this.width,this.height],i=0;i<4;i++)t+=i<3?n[i]+",":n[i];return t+"}"},q.prototype.toJsonObject=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}};function J(t,n){for(var i=!1,r=n.vU,e=t.length,s=0;s<e;s++)if(r===t[s].vU){i=!0;break}return i}var Q=function(t,n){for(var i=!1,r=n.vU,e=t.length,s=0;s<e;s++)if(r===t[s].vU){t.splice(s,1),i=!0;break}return i},$=function(t,n){var i=[],r=t.length;if(0<r){for(var e=[],s=n.length,h=0;h<s;h++)e[(o=n[h]).vU]=o;for(var o,h=0;h<r;h++)e[(o=t[h]).vU]||i.push(o)}return i},tt=function(t,n,i){
t===et.DEBUG_ERROR&&window.console&&(i?window.console.log(n+": Item Number "+i):window.console.log(n))},nt=new q(0,0,0,0);function it(t,n){var e=this,r=null,o=t;o.width<=1&&(o.width=1e3),o.height<=1&&(o.height=800);function s(t){var n=et.INDEX_UNKNOWN;if(t.isOutsideRect(o))return et.INDEX_OUTOF_BOUNDARY;for(var i=!1,r=E.length,e=0;e<r;e++)if(t.isInsideRect(E[e])){i=!0,n=e;break}return i?n:t.isInsideRect(o)?et.INDEX_CROSS_QUADRANT:et.INDEX_CROSS_BORDER}function h(t){var n=et.INDEX_UNKNOWN;if(o.isPointOutside(t))return et.INDEX_OUTOF_BOUNDARY;for(var i=!1,r=E.length,e=0;e<r;e++)if(E[e].isPointInside(t)){i=!0,n=e;break}return i?n:o.isPointInside(t)?et.INDEX_CROSS_QUADRANT:et.INDEX_CROSS_BORDER}function u(t,n,i){for(var r=[],e=i.length,s=0;s<e;s++)(i[s].lU||nt).isPointInside(t,n)&&r.push(i[s]);return r}function a(t,n,i){for(var r=[],e=n.length,s=0;s<e;s++){var h,o,u=n[s].lU;i===et.RELATION_OUT_RECT?(o=u.isOutsideRect(t))&&r.push(n[s]):i===et.RELATION_IN_RECT?(h=u.isInsideRect(t))&&r.push(
n[s]):i===et.RELATION_INTERSECT_RECT?(o=u.isOutsideRect(t),h=u.isInsideRect(t),o||h||r.push(n[s])):i===et.RELATION_IN_AND_INTERSECT_RECT&&((o=u.isOutsideRect(t))||r.push(n[s]))}return r}var f=n,c=[],v=[],l=[],E=function(t){for(var n=[],i=t.width/2,r=t.height/2,e=0,s=0,h=0;h<4;++h){var s=0===h?(e=t.x+i,t.y+r):1===h?(e=t.x,t.y+r):(e=2===h?t.x:t.x+i,t.y),o=new q(e,s,i,r);n.push(o)}return n}(o);this.getParent=function(){return r},this.EU=function(t){r=t},this.TU=function(){return o},this.OU=function(){return f},this._U=function(){return c},this.NU=function(){return v},this.dU=function(){return l},this.MU=function(){f++;for(var t=l.length,n=0;n<t;n++)l[n].MU()},this.RU=function(){f--;for(var t=l.length,n=0;n<t;n++)l[n].RU()},this.appendChild=function(t){for(var n=new G(t.TU().getCenterX(),t.TU().getCenterY()),i=E.length,r=0;r<i;r++){var e=null;E[r].isPointInside(n)?(e=t).MU():e=new it(E[r],f+1),e.EU(this),l.push(e)}},this.isEmpty=function(){if(0<c.length||0<v.length)return!1;for(
var t=l.length,n=0;n<t;n++)if(!l[n].isEmpty())return!1;return!0},this.AU=function(t){if(t){if(null!==r)return!1;if(0!==f)return!1}for(var n=l.length,i=0;i<n;++i){if(l[i].getParent()!==this)return!1;if(l[i].OU()!==f+1)return!1;l[i].AU(!1)}return!0},this.insert=function(t){var n=s(t.lU);if((t.IU=n)===et.INDEX_OUTOF_BOUNDARY||n===et.INDEX_CROSS_BORDER)return!1;if(n===et.INDEX_CROSS_QUADRANT)return c.push(t),!0;if(0<l.length)return l[n].insert(t);v.push(t);var i=v.length;if(f<it.prototype.wU.SU()&&i>it.prototype.wU.DU()){!function(){for(var t=E.length,n=0;n<t;n++)l[n]=new it(E[n],f+1),l[n].EU(e)}();for(var r=0;r<i;r++)(n=v[r].IU)===et.INDEX_OUTOF_BOUNDARY||n===et.INDEX_CROSS_BORDER||n===et.INDEX_CROSS_QUADRANT?tt(et.DEBUG_ERROR,"Cannot find any quadrant! Should not happened!"):l[n].insert(v[r]);v.length=0}return!0},this.remove=function(t){var n=s(t.lU);if(n===et.INDEX_OUTOF_BOUNDARY||n===et.INDEX_CROSS_BORDER)return!1;var i=!1;return n===et.INDEX_CROSS_QUADRANT?((i=Q(c,t))||tt(
et.DEBUG_ERROR,"The to-be-removed item cannot be found in the tree Node, this should not be happened!"),i):0<l.length?l[n].remove(t):((i=Q(v,t))||tt(et.DEBUG_ERROR,"The to-be-removed item cannot be found in the tree leaf, this should not be happened!"),i)},this.CU=function(){r=(r=[]).concat(c,v);for(var t=l.length,n=0;n<t;n++)var i=l[n].CU(),r=r.concat(i);return r},this.LU=function(){if(0!==l.length){var t=0,n=l.length;for(t=0;t<n;t++)l[t].LU();var i=!0,r=0,n=l.length;for(t=0;t<n&&(i=0<l[t].dU().length||(r+=l[t]._U().length+l[t].NU().length)>it.prototype.wU.DU()?!1:i);t++);if(i){for(var e=[],n=l.length,t=0;t<n;t++){for(var s=l[t]._U().concat(l[t].NU()),h=s.length,o=0;o<h;o++)s[o].IU=t;e=e.concat(s)}l.length=0,v=e}}},this.xU=function(t,n){var i=s(t.lU);if(i===et.INDEX_OUTOF_BOUNDARY||i===et.INDEX_CROSS_BORDER)return tt(et.DEBUG_ERROR,"out of my range, this should not be happened!"),!1;var r=0;if(i===et.INDEX_CROSS_QUADRANT){if(J(c,t)){if((r=s(n||t.mU()))!==i)return Q(c,t),!0}else tt(
et.DEBUG_ERROR,"cannot be found in the tree Node, this should not be happened!");return!1}if(0<l.length)return l[i].xU(t);if(J(v,t)){if((r=s(n||t.mU()))!==i){if(r===et.INDEX_OUTOF_BOUNDARY||r===et.INDEX_CROSS_BORDER||r===et.INDEX_CROSS_QUADRANT)return Q(v,t),!0;t.IU=r}}else tt(et.DEBUG_ERROR,"cannot be found in the tree Node, this should not be happened!");return!1},this.uE=function(t,n){var i,r=[],e=h(t),s=[];return e===et.INDEX_OUTOF_BOUNDARY||e===et.INDEX_CROSS_BORDER||(e===et.INDEX_CROSS_QUADRANT||0===l.length?(i=c.concat(v),0===l.length&&this.yU(i),s=u(t,n,i),Array.prototype.push.apply(r,s)):(e=l[e].uE(t,n),r=r.concat(e),s=u(t,n,c),r=r.concat(s))),r},this.gU=function(t,n){var i=[];if(t.isOutsideRect(o))return i;for(var r=c.concat(v),e=a(t,r,n),i=i.concat(e),s=l.length,h=0;h<s;h++)e=l[h].gU(t,n),i=i.concat(e);return i},this.yU=function(t){for(var n=this.getParent();n;){var i=n._U();Array.prototype.push.apply(t,i),n=n.getParent()}},this.oE=function(t){var n=[];if(t.isOutsideRect(o)
)return n;var n=this.gU(t,et.RELATION_IN_RECT),i=[];return this.yU(i),0<i.length&&(i=a(t,i,et.RELATION_IN_RECT),Array.prototype.push.apply(n,i)),n},this.fE=function(t){var n=[];if(t.isOutsideRect(o))return n;var n=this.gU(t,et.RELATION_IN_AND_INTERSECT_RECT),i=[];return this.yU(i),0<i.length&&(i=a(t,i,et.RELATION_IN_AND_INTERSECT_RECT),Array.prototype.push.apply(n,i)),n},this.PU=function(t){var n=s(t);return n===et.INDEX_OUTOF_BOUNDARY||n===et.INDEX_CROSS_BORDER?null:n!==et.INDEX_CROSS_QUADRANT&&0<l.length?l[n].PU(t):this},this.FU=function(t){var n=h(t);return n===et.INDEX_OUTOF_BOUNDARY||n===et.INDEX_CROSS_BORDER?null:n!==et.INDEX_CROSS_QUADRANT&&0<l.length?l[n].FU(t):this}}function rt(t,n){switch(this.vU=n,this.pU=t,this.IU=et.INDEX_UNKNOWN,this.VU=!1,this.UU=!1,this.HU=!1,t.getType()){case et.ITEMTYPE_BBOX:this.VU=!0;break;case et.ITEMTYPE_LINESEGMENT:this.UU=!0;break;case et.ITEMTYPE_POINT:this.HU=!0}this.lU=this.mU().clone()}function et(t,n,i){var r=n,e=i,s=!1,a=[],o=0,f=new it(
t.clone(),0);it.prototype.wU=this;function c(t){return(t=t.rW)||null}function v(t,n,i){var r=t.TU(),e=i.lU;if(e.isInsideRect(r))return tt(et.DEBUG_ERROR,"Want to upgrade root node, but the item does not cause to do that, should not be happened!"),t;var s=null,h=new q(0,0,0,0);if(h.copyFrom(r),n){i=e.getCenterX(),n=e.getCenterY();for(h.x=i-r.width/2,h.y=n-r.height/2;!e.isInsideRect(h);)h.inflate(h.width/2,h.height/2);s=new it(h,0)}else{for(var o=new G(e.getCenterX(),e.getCenterY()),u=new G(0,0),a=new G(0,0),f=-1,c=0;c<4;++c){0===c?(u.x=r.x,u.y=r.y):1===c?(u.x=r.x,u.y=r.y+r.height):2===c?(u.x=r.x+r.width,u.y=r.y+r.height):(u.x=r.x+r.width,u.y=r.y);var v=o.distanceToPoint(u);(-1===f||v<f)&&(f=v,a.x=u.x,a.y=u.y)}h.x=a.x-r.width,h.y=a.y-r.height,h.width=2*r.width,h.height=2*r.height,(s=new it(h,0)).appendChild(t)}return s}function l(t){for(var n=!0;n;){var i=E(t);i===t?n=!1:t=i}return t.LU(),T(),s&&(t.AU(!0)||tt(et.DEBUG_ERROR,"The tree is not tidy, something is wrong!")),t}var h=t,u=f,
E=function(t){if(0<t._U().length)return t;var n=t.dU();if(0===n.length)return t;for(var i=null,r=0,e=n.length,s=0;s<e;++s){var h=n[s];if(h.isEmpty())r++;else{if(null!==i)break;i=h}}return r>=n.length-1?((i=null===i?n[n.length-1]:i).RU(),i.EU(null)):i=t,i},T=function(){null===(u=f.PU(h))&&(u=f)};this.SU=function(){return r},this.DU=function(){return e},this.GU=function(){return s},this.bU=function(t){s=t},this.WU=function(t){},this.BU=function(){return f},this.insert=function(t){for(var n=!1,i=t.length,r=0;r<i;r++){var e=t[r];e.getOwner&&(e.getOwner().lM=null);var s=new rt(t[r],o++);t[r].rW=s;for(var h=!1;!h;)(h=f.insert(s))?(n=!0,a.push(s)):f=v(f,f.isEmpty(),s)}n&&(f=l(f))},this.remove=function(t){for(var n=!1,i=t.length,r=0;r<i;r++){var e=c(t[r]);null!==e?f.remove(e)?(n=!0,Q(a,e)):tt(et.DEBUG_ERROR,"Cannot remove item! Should not happened!"):tt(et.DEBUG_ERROR,"Cannot find item in tree! Should not happened!",r)}n&&(f=l(f))},this.ZU=function(t){f=new it(t.clone(),0);for(var n=a.length,
i=0;i<n;i++)for(var r=a[i],e=!1;!e;)(e=f.insert(r))||(f=v(f,f.isEmpty(),r));f=l(f)},this.MM=function(t){var n=[],i=[],r=0,e=null,s=t.length;for(r=0;r<s;r++){var h=t[r];h.getOwner&&(h.getOwner().lM=null),null!==(e=c(h))?(h=e.mU(),e.lU.equal(h)?tt(et.DEBUG_NOTE,"the to be reindexed item's boundary is not changed!"):(f.xU(e,h)&&n.push(e),e.kU(h))):(tt(et.DEBUG_NOTE,"Cannot find item in sheet! This could be some outside elements are moving into the sheet!"),i.push(t[r]))}if(0<n.length||0<i.length){if(0<n.length){a=$(a,n);for(var o=n.length,r=0;r<o;r++)for(var e=n[r],u=!1;!u;)(u=f.insert(e))?a.push(e):(tt(et.DEBUG_NOTE,"The reindexed item is moving out of sheet range!"),f=v(f,f.isEmpty(),e))}0<i.length&&this.insert(i),f=l(f)}},this.setViewport=function(t){h=t.clone(),T(),null===u&&(u=f)},this.uE=function(t,n){for(var i=u.uE(t,n),r=[],e=i.length,s=0;s<e;s++)i[s].zU(t,n)&&r.push(i[s]);return rt.stripToRawItems(r)},this.oE=function(t){t=u.oE(t);return rt.stripToRawItems(t)},this.fE=function(t,
n){for(var i=(n===et.RETIREVIESCOPE_ALL?f:u).fE(t),r=[],e=i.length,s=0;s<e;s++)i[s].XU(t)&&r.push(i[s]);return rt.stripToRawItems(r)},this.hE=function(t,n){var i=!1,r=n.K4;if(r||(r=n.vM().indexedElements,this.insert(r)),r)for(var e=r.length,s=0;s<e;s++){var h=c(r[s]);if(h&&h.YU(t)){i=!0;break}}return i},this.jU=function(){return rt.stripToRawItems(a)},this.KU=function(){return this.fE(h)},this.qU=function(){for(var t=null,n=a.length,i=0;i<n;i++){var r=a[i].lU;null===t?t=r.clone():t.union(r)}return t},this.JU=function(t){t=c(t);return null!==t?t.vU:-1},this.QU=function(t){for(var n=null,i=a.length,r=0;r<i;r++)if(a[r].vU===t){n=a[r];break}return n},this.PU=function(t){return f.PU(t)},this.FU=function(t){return f.FU(t)}}rt.prototype.$U=function(){return this.IU},rt.prototype.kU=function(t){var n=t||this.mU(),t=this.lU;t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height},rt.prototype.match=function(t){return this.pU===t},rt.prototype.zU=function(t,n){if(this.VU)return!0;if(this.UU){
var i=this.pU.getLine();return i?i.distanceFromPoint(t)<n:!1}return!!this.HU},rt.prototype.XU=function(t){if(this.VU)return!0;if(this.UU){if(this.lU.isInsideRect(t))return!0;var n=this.pU.getLine();return n?!!t.isIntersectWithLine(n):!1}return!!this.HU},rt.prototype.YU=function(t){return this.VU||this.UU?!!this.lU.hasOverlap(t):!!this.HU},rt.prototype.mU=function(){if(this.VU)return this.pU.getBBox();if(this.UU){var t=this.pU.getLine(),n=0,i=0,r=0,e=0;return t&&(n=Math.min(t.start.x,t.end.x),i=Math.min(t.start.y,t.end.y),r=Math.max(t.start.x,t.end.x),e=Math.max(t.start.y,t.end.y)),new q(n,i,r-n,e-i)}if(this.HU){i=this.pU.getPoint();return new q(i.x,i.y,0,0)}return null},rt.stripToRawItems=function(t){for(var n=[],i=t.length,r=0;r<i;r++)n.push(t[r].pU);return n},et.ITEMTYPE_BBOX=0,et.ITEMTYPE_LINESEGMENT=1,et.ITEMTYPE_POINT=2,et.RETRIEVESCOPE_VIEWPORT=0,et.RETIREVIESCOPE_ALL=1,et.INDEX_UNKNOWN=-1,et.INDEX_FIRST_QUADRANT=0,et.INDEX_SECOND_QUADRANT=1,et.INDEX_THIRD_QUADRANT=2,
et.INDEX_FORTH_QUADRANT=3,et.INDEX_CROSS_QUADRANT=4,et.INDEX_CROSS_BORDER=5,et.INDEX_OUTOF_BOUNDARY=6,et.RELATION_OUT_RECT=0,et.RELATION_INTERSECT_RECT=1,et.RELATION_IN_AND_INTERSECT_RECT=2,et.RELATION_IN_RECT=3;var st={FitToAllObjects:et.DEBUG_ERROR=0,FitToSheet:et.DEBUG_WARNING=1},ht={LINEAR:0,STAIRSTEP:1,FREEFORM:et.DEBUG_NOTE=2},ot={LINE:0,POINT:1},ut={SelfOnly:1,SelfAndContent:2},at={SelfOnly:1,SelfAndContent:2,FitToContent:3};function ft(){d.common.ObjectBase.call(this)}ft.prototype.removeRelativeLocations=function(t,n){for(var i=0,r=n.length;i<r;i++)t.removeRelativeLocation(n[i])},ft.prototype.addRelativeLocations=function(t,n){for(var i=0,r=n.length;i<r;i++){var e=n[i];e.w4()&&t.addRelativeLocation(e)}},ft.prototype.changeToTree=function(t){var n=t.r4(!0),i=t.L4();i?this.addRelativeLocations(i,n):this.removeRelativeLocations(t,n)},ft.prototype.changeToNested=function(t){var n=t.r4(!0);this.addRelativeLocations(t,n)},ft.prototype.addChildrenInTree=function(t,n){var i=t.L4()
;i?this.addRelativeLocations(i,n):this.removeRelativeLocations(t,n)},ft.prototype.removeChildrenInTree=function(t,n){for(var i=0,r=n.length;i<r;i++)n[i].setUpToDate(!1)},ft.prototype.addChildrenInNested=function(t,n){this.addRelativeLocations(t,n)},ft.prototype.removeChildrenInNested=function(t,n){this.removeRelativeLocations(t,n)},d.common.ObjectBase.inheritedBy(ft);var ct={getIntersectionOfLines:function(t,n){var i=t.start,r=t.end,e=n.start,t=n.end,n=(t.y-e.y)*(r.x-i.x)-(t.x-e.x)*(r.y-i.y);if(Math.abs(n)<w.doubleTolerance)return null;t=((t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x))/n,n=((r.x-i.x)*(i.y-e.y)-(r.y-i.y)*(i.x-e.x))/n;if(t<0||1<t)return null;if(n<0||1<n)return null;n=t*(r.x-i.x),r=t*(r.y-i.y),i=new G(i.x,i.y);return i.x+=n,i.y+=r,i},getIntersectionOfRectAndLine:function(t,n){var i=[],r=(n.start,n.end,t.x),e=t.y,s=t.x+t.width,h=t.y+t.height,o=new W(new G(r,e),new G(r,h)),t=this.getIntersectionOfLines(n,o);return null!=t&&i.push(t),o.end.x=s,o.end.y=e,null!=(
t=this.getIntersectionOfLines(n,o))&&i.push(t),o.start.x=s,o.start.y=h,null!=(t=this.getIntersectionOfLines(n,o))&&i.push(t),o.end.x=r,o.end.y=h,null!=(t=this.getIntersectionOfLines(n,o))&&i.push(t),0===i.length?null:i},getIntersectionOfEllipseAndLine:function(t,n,i,r){var e=[];if(r.isHorizontal())for(var s=((E=r.start.y)-i.y)*(E-i.y)/(n*n),h=1,o=-2*i.x,u=i.x*i.x-(1-s)*t*t,a=0,f=(c=w.W(h,o,u)).length;a<f;a++)e.push(new G(c[a],E));else if(r.isVertical())for(s=((l=r.start.x)-i.x)*(l-i.x)/(t*t),h=1,o=-2*i.y,u=i.y*i.y-(1-s)*n*n,a=0,f=(c=w.W(h,o,u)).length;a<f;a++)e.push(new G(l,c[a]));else for(var c,v=(r.start.y-r.end.y)/(r.start.x-r.end.x),r=(s=r.end.y-v*r.end.x)-i.y,h=n*n+t*t*v*v,o=2*r*v*t*t-2*i.x*n*n,u=n*n*i.x*i.x+t*t*r*r-t*t*n*n,a=0,f=(c=w.W(h,o,u)).length;a<f;a++){var l,E=v*(l=c[a])+s;e.push(new G(l,E))}return e},getIntersectionOfRoundedRectAndLine:function(t,n,i,r){var e=[],s={xMin:t.x,xMax:t.x+n,yMin:t.y,yMax:t.y+i},h={xMin:t.x+t.width-n,xMax:t.x+t.width,yMin:t.y,yMax:t.y+i},o={
xMin:t.x+t.width-n,xMax:t.x+t.width,yMin:t.y+t.height-i,yMax:t.y+t.height},u={xMin:t.x,xMax:t.x+n,yMin:t.y+t.height-i,yMax:t.y+t.height},a=new W(new G(s.xMax,s.yMin),new G(h.xMin,h.yMin)),t=this.getIntersectionOfLines(a,r);t&&e.push(t);a=new W(new G(h.xMax,h.yMax),new G(o.xMax,o.yMin));(t=this.getIntersectionOfLines(a,r))&&e.push(t);a=new W(new G(o.xMin,o.yMax),new G(u.xMax,u.yMax));(t=this.getIntersectionOfLines(a,r))&&e.push(t);a=new W(new G(u.xMin,u.yMin),new G(s.xMin,s.yMax));(t=this.getIntersectionOfLines(a,r))&&e.push(t);var f=[],t=this.getIntersectionOfEllipseAndLine(n,i,{x:s.xMax,y:s.yMax},r),f=f.concat(t),h=this.getIntersectionOfEllipseAndLine(n,i,{x:h.xMin,y:h.yMax},r);f=f.concat(h);h=this.getIntersectionOfEllipseAndLine(n,i,{x:o.xMin,y:o.yMin},r);f=f.concat(h);for(var r=this.getIntersectionOfEllipseAndLine(n,i,{x:u.xMax,y:u.yMin},r),c=0,v=(f=f.concat(r)).length;c<v;c++){var l=new q(s.xMin,s.yMax,o.xMax-s.xMin,o.yMin-s.yMax);l.isPointInside(f[c],-w.getTolerance())||(l=new q(
s.xMax,s.yMin,o.xMin-s.xMax,o.yMax-s.yMin)).isPointInside(f[c],-w.getTolerance())||e.push(f[c])}return e}},vt={HORIZONTAL:0,VERTICAL:1},lt={NONE:0,ARC:1,GAP:2};function Et(t,n,i,r){this.m_keyCode=t,this.m_isCtrl=n,this.m_isAlt=i,this.m_isShift=r}Et.prototype.isEqual=function(t,n,i,r){return t==this.m_keyCode&&((void 0===this.m_isCtrl||null===this.m_isCtrl||this.m_isCtrl==!!n)&&((void 0===this.m_isAlt||null===this.m_isAlt||this.m_isAlt==!!i)&&(void 0===this.m_isShift||null===this.m_isShift||this.m_isShift==!!r)))};var Tt={TOP:0,MIDDLE:1,BOTTOM:2},Ot={PLAIN:0,WITHOUT_STUB:1},_t={};_t.Polyline=0;var Nt={None:-(_t.QuadraticCurve=1),DetailLevel:0,IntermediateLevel:1,OverviewLevel:_t.CubicCurve=2},dt={Default:0,HideOnIntermediateLevel:1,HideOnOverviewLevel:2,HideTableContentOnIntermediateLevel:4,HideTableContentOnOverviewLevel:8,HideArrowHeadOnIntermediateLevel:16,HideArrowHeadOnOverviewLevel:32,HideJumperOnIntermediateLevel:64,HideJumperOnOverviewLevel:128,HideMarkerOnIntermediateLevel:256,
HideMarkerOnOverviewLevel:512},Mt={};function Rt(t,n,i,r){this.top=t||0,this.left=n||0,this.bottom=i||0,this.right=r||0}function At(t,n,i,r,e,s){this.m=[t,n,0,i,r,0,e,s,1]}Mt.LEFT=1,Mt.CENTER=2,Mt.RIGHT=3,Mt.TOP=4,Mt.MIDDLE=5,Mt.BOTTOM=6,Rt.prototype.getTopValue=function(t,n){return new Function("return "+this.top)()},Rt.prototype.getLeftValue=function(t,n){return new Function("return "+this.left)()},Rt.prototype.getBottomValue=function(t,n){return new Function("return "+this.bottom)()},Rt.prototype.getRightValue=function(t,n){return new Function("return "+this.right)()},Rt.prototype.copyFrom=function(t){this.top=t.top,this.left=t.left,this.bottom=t.bottom,this.right=t.right},Rt.prototype.clone=function(){return new Rt(this.top,this.left,this.bottom,this.right)},Rt.prototype.toJsonObject=function(){return[this.top,this.left,this.bottom,this.right]},At.prototype.toString=function(){for(var t="{",n=this.toArray(),i=0;i<9;i++)t+=i<8?n[i]+",":n[i];return t+"}"},
At.prototype.toSvgString=function(){var t=this.toArray();return"matrix("+t[0]+" "+t[1]+" "+t[3]+" "+t[4]+" "+t[6]+" "+t[7]+")"},At.prototype.getM0=function(){return this.m[0]},At.prototype.getM1=function(){return this.m[1]},At.prototype.getM3=function(){return this.m[3]},At.prototype.getM4=function(){return this.m[4]},At.prototype.getM6=function(){return this.m[6]},At.prototype.getM7=function(){return this.m[7]},At.prototype.toArray=function(){return this.m},At.prototype.isIdentity=function(){return 1==this.m[0]&&0===this.m[1]&&0===this.m[3]&&1==this.m[4]&&0===this.m[6]&&0===this.m[7]},At.prototype.determinant=function(){return this.m[0]*this.m[4]-this.m[1]*this.m[3]},At.prototype.append=function(t){return At.multiplyMatrix(this,t)},At.prototype.prepend=function(t){return At.multiplyMatrix(t,this)},At.prototype.rotateAt=function(t,n,i){var r=2*t*Math.PI/360,t=new At(1,0,0,1,-n,-i),t=At.multiplyMatrix(this,t),r=new At(Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0),
t=At.multiplyMatrix(t,r),i=new At(1,0,0,1,n,i);return t=At.multiplyMatrix(t,i)},At.prototype.scaleAt=function(t,n,i,r){var e=new At(1,0,0,1,-i,-r),e=At.multiplyMatrix(this,e),n=new At(t,0,0,n,0,0),e=At.multiplyMatrix(e,n),r=new At(1,0,0,1,i,r);return At.multiplyMatrix(e,r)},At.prototype.transformPoint=function(t){return this.isIdentity()?t.clone():new G(t.x*this.m[0]+t.y*this.m[3]+this.m[6],t.x*this.m[1]+t.y*this.m[4]+this.m[7])},At.prototype.transformVector=function(t){return this.isIdentity()?t.clone():new b(t.x*this.m[0]+t.y*this.m[3],t.x*this.m[1]+t.y*this.m[4])},At.prototype.transformRect=function(t){if(this.isIdentity())return t.clone();var n=new G(t.x,t.y),i=new G(t.x+t.width,t.y),r=new G(t.x+t.width,t.y+t.height),e=new G(t.x,t.y+t.height),n=this.transformPoint(n),i=this.transformPoint(i),r=this.transformPoint(r),e=this.transformPoint(e),s=Math.min(n.x,i.x,r.x,e.x),t=Math.min(n.y,i.y,r.y,e.y);return new q(s,t,Math.max(n.x,i.x,r.x,e.x)-s,Math.max(n.y,i.y,r.y,e.y)-t)},
At.prototype.isInvertible=function(){return 0!==this.determinant()},At.prototype.invert=function(){if(this.isIdentity())return At.identity;if(0===this.determinant())return null;var t=1/this.determinant();return new At(this.m[4]*t,-this.m[1]*t,-this.m[3]*t,this.m[0]*t,(this.m[3]*this.m[7]-this.m[6]*this.m[4])*t,(this.m[6]*this.m[1]-this.m[0]*this.m[7])*t)},At.prototype.copyFrom=function(t){this.m[0]=t.getM0(),this.m[1]=t.getM1(),this.m[3]=t.getM3(),this.m[4]=t.getM4(),this.m[6]=t.getM6(),this.m[7]=t.getM7()},At.prototype.clone=function(){return new At(this.m[0],this.m[1],this.m[3],this.m[4],this.m[6],this.m[7])},At.prototype.toJsonObject=function(){return this.m.slice(0)},At.identity=new At(1,0,0,1,0,0),At.flipX=new At(1,0,0,-1,0,0),At.flipY=new At(-1,0,0,1,0,0),At.flipXY=new At(-1,0,0,-1,0,0),At.multiplyMatrix=function(t,n){if(t.isIdentity())return n;if(n.isIdentity())return t;var i=t.getM0()*n.getM0()+t.getM1()*n.getM3()+0*n.getM6(),r=t.getM0()*n.getM1()+t.getM1()*n.getM4()+0*n.getM7(
),e=(t.getM0(),t.getM1(),t.getM3()*n.getM0()+t.getM4()*n.getM3()+0*n.getM6()),s=t.getM3()*n.getM1()+t.getM4()*n.getM4()+0*n.getM7(),h=(t.getM3(),t.getM4(),t.getM6()*n.getM0()+t.getM7()*n.getM3()+ +n.getM6()),n=t.getM6()*n.getM1()+t.getM7()*n.getM4()+ +n.getM7();t.getM6(),t.getM7();return new At(i,r,e,s,h,n)},At.sheetToScreenTransform=function(t,n){var i=n.width/t.width,r=t.height*i;n.height<r&&(i=n.height/t.height);var r=t.height*i,e=t.width*i,e=Math.max((n.width-e)/2),n=Math.max((n.height-r)/2),r=i;return new At(i,0,0,r,-i*t.x+e,-r*t.y+n)};var It={FreeMove:0,MoveStrategy:1,Attaching:2,Alignment:3,Snap:4},St={BoundingBox:0,Anchor:1,AnchorAlt:2},wt={NONE:0,TRANSLATION:1,ROTATION:2,SCALE:4,CONNECTION_END:8,CONNECTION_BENDING:16,GROUP:32},Dt={};function Ct(t){}Dt.NotANestedNodeSymbolType=0,Dt.Background=1,Dt.Banner=2,Dt.ExpandButton=3,Dt.CollapseButton=4;function Lt(t){var n=null,i=[],r=0;(n=t.getGroupMembers())&&(r=n.length);for(var e=0;e<r;e++){var s=n[e];i.push(s),
s.isGroupingAllowed&&s.isGroupingAllowed()&&s.isExpanded()&&(i=i.concat(Lt(s)))}return i}Ct.applyDefaultDisplayStrategyForMembers=function(t){if(!t.getCollapsedOwner()){for(var n=Lt(t),i=t.isExpanded(),r=0;r<n.length;r++)n[r].setVisibleByNestedNode(i);for(var e=t.askLinkedConnections(),s=e.length,h=0;h<s;h++){var o=e[h],u=o.getStart(),a=o.getEnd();u&&a&&(u=u.getOwner(),a=a.getOwner(),u.hasOwnership(t)&&a.hasOwnership(t)&&o.setVisibleByNestedNode(i))}}},Ct.resetProxyPorts=function(t,n){if(t.getPorts){if(!n){var i=t.getPorts();if(i&&0<i.length)for(var r=0,e=i.length;r<e;r++)i[r].setProxy(null)}if(t.isExpanded()){var s=t.getGroupMembers();if(s&&0<s.length)for(var h=s.length,r=0;r<h;r++)Ct.resetProxyPorts(s[r],!1)}else{n=t.getDefaultProxyPort();Ct.setProxyPort(t,n,!0)}}},Ct.setProxyPort=function(t,n,i){if(t.getPorts){if(!i){var r=t.getPorts();if(r&&0<r.length)for(var e=0,s=r.length;e<s;e++){var h,o=r[e];o!==n&&((h=o.getProxy())&&n&&h.getOwner()===n.getOwner()||o.setProxy(n))}}
var u=t.getGroupMembers();if(u&&0<u.length)for(var a=u.length,e=0;e<a;e++)Ct.setProxyPort(u[e],n,!1)}};var xt={};function mt(){this.preIndexCb=null,this.postIndexCb=null,this.preRenderCb=null,this.postRenderCb=null,this.preLayoutCb=null,this.postLayoutCb=null,this.n6=null,this.i6=null,this.indexingStartTime=null,this.indexingEndTime=null,this.renderStartTime=null,this.renderEndTime=null}xt.Auto=0,xt.Center=1,xt.Top=2,xt.Bottom=4,xt.Left=8,xt.Right=16,mt.prototype.registerIndexingCallback=function(t,n){this.preIndexCb=t,this.postIndexCb=n},mt.prototype.registerRenderingCallback=function(t,n){this.preRenderCb=t,this.postRenderCb=n},mt.prototype.registerLayoutCallback=function(t,n){this.preLayoutCb=t,this.postLayoutCb=n},mt.prototype.preIndexing=function(){this.preIndexCb&&this.preIndexCb.call(this),d.DebugFlags.CheckPerformance&&(this.indexingStartTime=Math.ceil((new Date).getTime()))},mt.prototype.postIndexing=function(t){this.postIndexCb&&this.postIndexCb.call(this,t),
d.DebugFlags.CheckPerformance&&(this.indexingEndTime=Math.ceil((new Date).getTime()),window.console&&window.console.log("Indexing duration time: "+(this.indexingEndTime-this.indexingStartTime)+"ms"))},mt.prototype.preRendering=function(){this.preRenderCb&&this.preRenderCb.call(this),d.DebugFlags.CheckPerformance&&(this.renderStartTime=Math.ceil((new Date).getTime()))},mt.prototype.postRendering=function(){this.postRenderCb&&this.postRenderCb.call(this),d.DebugFlags.CheckPerformance&&(this.renderEndTime=Math.ceil((new Date).getTime()),window.console&&window.console.log("Rendering duration time: "+(this.renderEndTime-this.renderStartTime)+"ms"))},mt.prototype.preLayout=function(t){this.preLayoutCb&&this.preLayoutCb.call(this,t)},mt.prototype.postLayout=function(t){this.postLayoutCb&&this.postLayoutCb.call(this,t)},mt.prototype.registerWorkerTaskCallback=function(t,n){this.n6=t,this.i6=n},mt.prototype.getWorkerTaskStartCb=function(){return this.n6},
mt.prototype.getWorkerTaskFinishCb=function(){return this.i6};var yt={IF_VISIBLE:0,NEVER:1,ALWAYS:2},gt={};gt.None=0,gt.HoverHighlightPropagateAllowed=1,gt.SelectHighlightPropagateAllowed=2,gt.DeletePropagateAllowed=4,gt.RotatePropagateAllowed=8,gt.MovePropagateAllowed=16,gt.VisiblePropagateAllowed=32,gt.CollapseVisiblePropagateAllowed=64,gt.LayerVisiblePropagateAllowed=128,gt.All=Math.pow(2,16)-1;var Pt=new function(){this.createObject=function(t,n){return t?n?new t(n):new t:null},this.hasProperty=function(t,n){if(t&&n){n=d.Property.get(t.getType(),n);return null!=n}return!1},this.getPropertyType=function(t,n){n=d.Property.get(t.getType(),n);return null!=n?n.getValueType():null},this.getPropertyValue=function(t,n){n=d.Property.get(t.getType(),n);return null!=n?n.getValue(t):null},this.setPropertyValue=function(t,n,i){var r=d.Property.get(t.getType(),n);if(r){var e=t[r.getSetter()];return e?e.call(t,i):(alert("The object "+t.getTypeName(
)+" doesn't have SET method defined for property "+n+"."),r.setValue(t,i)),r}return null},this.setPropertyValues=function(t,n,i,r){if(t&&n&&i&&n.length===i.length){var e=n.length;if(r)for(var r=t.getType(),s=d.Property.getAllProperties(r),h=0;h<e;++h){var o=s[n[h]];o&&o.setValue(t,i[h])}else for(h=0;h<e;++h)this.setPropertyValue(t,n[h],i[h])}},this.setPropertyRawValues=function(t,n,i){if(t&&n&&i)for(var r=n.length,e=t.getType(),s=d.Property.getAllProperties(e),h=0;h<r;++h){var o=s[n[h]];o&&o.setRawValue(t,i[h])}},this.defineTrackedProperties=function(t,n){var i,r,e=SDF.Models;n&&(r=(i=e.BaseObject).prototype.createCb,i.prototype.createCb=function(){});for(var s={},h=d.PropertyFlags.Persistent,o=t.length,u=0;u<o;u++){var a,f,c=t[u],v=c.type,l=e[v],E=c.concrete,T=c.trackedAttributes,O=d.Property.getAllProperties(l),_=null;for(E&&n&&(_=new l);T.length;)(a=O[T.pop()])&&a.addFlag(h);if(null!==_)for(var N in O)!(a=O[N])||(h&a.getFlags())!=h||void 0!==(f=a.getValue(_))&&(s[v.concat(":",N
)]=f&&f.toJsonObject?f.toJsonObject():f)}return void 0!==r&&(i.prototype.createCb=r),s}};function Ft(t,n,i){this.points=t,this.jumperShape=n,this.jumperWidth=i,this.pointsAfterTrim=t,this.BD=null,this.ZD=null}Ft.prototype.setJumperType=function(t){this.jumperShape=t},Ft.prototype.setPointsAfterTrim=function(t){this.pointsAfterTrim=t},Ft.prototype.getPointsAfterTrim=function(){return this.pointsAfterTrim},Ft.prototype.setJumperWidth=function(t){this.jumperWidth=t},Ft.prototype.setPoints=function(t){this.points=t},Ft.prototype.getPoints=function(){return this.points},Ft.prototype.getRenderingPoints=function(t,n,i,r){if(!i&&!r)return this.points;var e,s,h,o,u,a,f,c=[],v=this.points,l=v.length;if(l<2)return v;if(i&&t.isTrimToStartArrow(i)&&(s=t.dW(i,n).w,h=v[0],0<(u=(o=v[1]).distanceToPoint(h))&&(a=s/u,(e=h.clone()).x=h.x+(o.x-h.x)*a,e.y=h.y+(o.y-h.y)*a)),r&&t.isTrimToEndArrow(r)&&(s=t.dW(r,n).w,h=v[l-2],0<(u=(o=v[l-1]).distanceToPoint(h))&&(a=s/u,(f=o.clone()).x=o.x+(h.x-o.x)*a,f.y=o.y+(
h.y-o.y)*a)),!e&&!f)return v;c[0]=e||v[0].clone(),c[l-1]=f||v[l-1].clone();for(var E=1;E<l-1;E++)c[E]=v[E].clone(),v[E].skip&&(c[E].skip=!0);return c},Ft.prototype.vW=function(t,n,i,r){r=this.getRenderingPoints(t,n,i,r);r&&0!==r.length&&(this.BD=null,this.ZD=null,n.path=r.concat())},Ft.prototype.renderPath=function(t,n,i,r,e,s){var h;i.path&&0!==i.path.length&&((h=t.SF(i.path,i,e,s))&&0<h.length?(e&&(this.BD=i.path[0]),s&&(this.ZD=i.path[i.path.length-1]),r?n.updateRenderCombinedConnectionPath(h,i,this):n.renderCombinedConnectionPath(h,i,this)):(t=t.getConnectionDisplayOption(),r?n.updateRenderConnectionPath(i.path,i,this,t):n.renderConnectionPath(i.path,i,this,t)))},Ft.prototype.remove=function(){this.points=[],this.jumperShape=null,this.jumperWidth=null};var pt={LEFT:0,CENTER:1,RIGHT:2,JUSTIFY:3,START:4,MIDDLE:5,END:6,TOP:7,ALPHABETIC:8,CENTRAL:9,HANGING:10};function Vt(t,n,i,r,e,s,h,o){this.transform=t,this.vectorEffect=1,this.fillColor=n,this.strokeColor=i,this.lineWidth=r,
this.lineDashArray=void 0,this.opacity=e||0,this.width=s,this.height=h,this.fontsize=null,this.fontFamily=null,this.fontStyle=0,this.textAnchor=[0,0],this.horizontalAlign=pt.START,this.verticalAlign=pt.HANGING,this.renderReason=void 0,this.path=o||[],this.renderGradient={}}Vt.prototype.clone=function(){var t,n=new Vt;for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(n[t]=this[t]);return n};var Ut={calculateTextAbscissa:function(t){switch(t.horizontalAlign){case pt.START:return t.textAnchor[0];case pt.CENTER:case pt.MIDDLE:return t.textAnchor[0]+t.width/2;case pt.RIGHT:case pt.END:return t.textAnchor[0]+t.width}},calculateTextOrdinate:function(t){switch(t.verticalAlign){case pt.TOP:return t.textAnchor[1]-t.textLineHeight;case pt.ALPHABETIC:return t.textAnchor[1]-t.textLineHeight/3*2;case pt.CENTRAL:return t.textAnchor[1]-t.textLineHeight/2;case pt.HANGING:return t.textAnchor[1]}},extractIndentInfo:function(t){var n,i,r=0,e=t.indexOf("INDENT");return-1!==e&&(n=t.indexOf("'",e)
,i=t.indexOf("'",e+10),e=t.slice(e,i+1),r=parseInt(t.slice(n+1,i)),t=t.replace(new RegExp(e,"g"),"")),{text:t,indent:r}}},Ht={CENTER:0,START:1,END:2},Gt={RoughSelection:0,PreciseSelection:1},bt={InsideOutline:0,Outline:1},Wt={INSIDE:0,OUTSIDE:1,CROSSING:2,INSIDECROSSING:3,OUTSIDECROSSING:4},Bt={AlwaysHidden:0,AlwaysVisible:1,VisibleOnSelect:2},Zt={INFERRED:0,LEFT:1,RIGHT:2},kt={NONE:0,RESIZE_OUTLINE:1,SHRINK_TEXT:2},zt={Plain:0,Bold:1,Italic:2,Underline:4,Overline:8},Xt={NoTruncation:0,Trim:1,AddSuffix:2},Yt={NONE:0,SENDDOWN:1},jt={UP:"Up",DOWN:"Down"},Kt={NONE:0,HANDLES_TOP_LEFT:1,HANDLES_TOP_MIDDLE:2,HANDLES_TOP_RIGHT:4,HANDLES_MIDDLE_LEFT:8,HANDLES_MIDDLE_RIGHT:16,HANDLES_BOTTOM_LEFT:32,HANDLES_BOTTOM_MIDDLE:64,HANDLES_BOTTOM_RIGHT:128,HANDLES_ROTATE:256,HANDLES_ALL:511,RESIZE_ANY_DIRECTION:0,RESIZE_ON_ANCHOR:1,RESIZE_SAME_RATIO:2,RESIZE_SAME_RATIO_ON_CORNER:3,RESIZE_SAME_RATIO_ON_EDGE:4},qt={NONE:0,HIDDENBYPARENT:1,HIDDENBYNESTEDNODE:2,HIDDENBYLAYER:4,TRANSIENTHIDE:8,
HIDDENBYCOLLAPSEOUTGOING:16},Jt={True:0,False:1,Auto:2},Qt=d.common.ObjectHelper.rootNamespace,$t={};return $t.AlignmentMode=t,$t.AlignmentType=n,$t.AlignResultType=i,$t.AllowedAlignType=r,$t.AllowedSides=e,$t.AllowedTransformations=s,$t.ArrayUtil={getLastPoint:function(t){return t&&0<t.length?t[t.length-1]:null},getNextToLastPoint:function(t){return t&&1<t.length?t[t.length-2]:null},subtract:function(t,n){var i=n.length;if(0===i)return t;for(var r=[],e=0;e<i;e++)r[n[e].guid]=n[e];for(var s=[],h=t.length,e=0;e<h;e++)r[t[e].guid]||s.push(t[e]);return s},intersect:function(t,n){var i=t.length,r=n.length;if(0===i||0===r)return[];for(var e=[],s=0;s<r;s++)e[n[s].guid]=n[s];for(var h=[],s=0;s<i;s++)e[t[s].guid]&&h.push(t[s]);return h},isEqual:function(t,n){var i=t.length,r=n.length;if(i!==r)return!1;if(0===i)return!0;for(var e=[],s=0;s<r;s++)e[n[s].guid]=n[s];for(s=0;s<i;s++)if(!e[t[s].guid])return!1;return!0},sliceDuplications:function(t,e){var s=[];return t.forEach(function(t){for(var n=!1
,i=0,r=e.length;i<r;i++)if(e[i]===t){n=!0;break}n||s.push(t)}),s},pointArrayEqual:function(t,n){var i=t?t.length:0;if(i!==(n?n.length:0))return!1;for(var r=0;r<i;++r)if(!t[r].equal(n[r]))return!1;return!0}},$t.ArrowType=h,$t.AttachingEventControlOptions=o,$t.AttachingType=u,$t.AutoAlignmentSides=a,$t.Axis=f,$t.CanvasOption={ViewFeatureCanvas:0,SheetFeatureCanvas:1,ElementCanvas:2,OverlayCanvas:3,OverviewSheetFeatureCanvas:4,OverviewCanvas:5},$t.ChangePhase=c,$t.ChangeRenderOrderResult=v,$t.Color=l,$t.CommandStates=T,$t.CommonUtil=C,$t.ConnectionAutoRoutingType=L,$t.ConnectionBendControlOption=x,$t.ConnectionEnd=y,$t.ConnectionEndAttachment=g,$t.ConnectionHandleOption=P,$t.ConnectionLabelAutoHideOption=F,$t.ConnectionLabelOffsetOption=p,$t.ConnectionLabelOffsetUpdateMode=V,$t.ConnectionLabelPositionOption=U,$t.ConnectionLabelRotationMode=H,$t.ConnectionTrimmer=Z,$t.ConnectionTrimMode=B,$t.Constants=O,$t.Coord=function(t,n){this.m_x=t,this.m_y=n},$t.CoordinateMode=X,$t.CursorID=E,
$t.DebugUtil=Y,$t.DiagramExportControl=function(){this.includeParentDoms=!1,this.svgIconClassName=null,this.clipSvgDomElements=!0,this.backgroundColor=null,this.allSheetElements=!1,this.exportCss=!1,this.graphSize=null,this.topLeftOrigin=null,this.fireDiagramExportingEvent=null,this.processHref=!1},$t.DiagramExportSettings=function(){this.createPrintPage=null,this.returnSvgDomString=null,this.viewFeaturesInclude=!1,this.sheetFeaturesInclude=!0,this.overlayFeaturesInclude=!1,this.exportCss=!1,this.includeParentDoms=!1,this.svgIconClassName=null,this.clipSvgDomElements=!0,this.backgroundColor=null,this.allSheetElements=!1,this.graphSize=null,this.topLeftOrigin=!1,this.fireDiagramExportingEvent=null,this.usedLODtype=-1,this.jsAutoTest=!1,this.processHref=!1},$t.Direction=j,$t.DisplayOrderOption={Default:0,Above:1,Below:2},$t.DragType=K,$t.ElementCoordinateMode={Sheet:0,Device:1},$t.ElementIndexTree=et,$t.ElementType={DEFAULT:0,FEATURE:1,OVERLAY:2,UI:3},$t.FitOption=st,$t.GeometricShape=ht
,$t.GridType=ot,$t.GroupMovePolicy=ut,$t.GroupResizePolicy=at,$t.GroupViewMode={Nested:0,Tree:1},$t.GroupViewStrategy=ft,$t.Intersection=ct,$t.JumperPriority=vt,$t.JumperShapeType=lt,$t.KeyCode={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,
F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145},$t.KeyObject=Et,$t.LeaderLineAlignmentType=Tt,$t.LeaderLineType=Ot,$t.Line=W,$t.LineDisplayOption=_t,$t.LocationIndicator=function(t,n,i,r,e,s,h,o){this.indicatorSvgStr=t,this.indicatorAnchor=n,this.indicatorLocations=i,this.indicatorSize=r,this.indicatorFocusSvgStr=e,this.indicatorDirections=s,this.focusOption=h,this.defaultIndicator=o},$t.LODType=Nt,$t.LODVisibleOptions=dt,$t.ManualAlignmentSide=Mt,$t.Margin=Rt,$t.MathUtil=w,$t.Matrix=At,$t.MemberDisplayOption={HideAll:0,ShowAll:1,ShowSpecified:2},$t.MoveConstraintType=It,$t.MultipleObjectAlignmentType=St,$t.MultipleSelectionHandleDisplayOptions=wt,$t.NestedNodeSymbolType=Dt,$t.NestedNodeUtil=Ct,$t.PanOptionForElementPan=xt,$t.PerformanceCounter=mt,$t.Point=G,$t.PortTransformPolicy={None:0,RotateOnOwnerOutline:1},$t.PreviewData=function(t,n,i,r,e){this.offset={x:t,y:n},this.scale={x:i,y:r},this.rotation=e,this.cumulativeOffset=null,this.cumulativeScale=null,
this.cumulativeRotation=null,this.originalBBox=null,this.originalTransformedBBox=null,this.originalRotation=0,this.originalPath=[],this.originalRelativeLoc={inputX:0,inputY:0,percentX:0,percentY:0,segmentId:0},this.originalSymbolConnectLoc={inputX:0,inputY:0,percentX:0,percentY:0},this.originalAnchor=null,this.originalMargins=null,this.lastPreviewTransformedBBox=null,this.lastPreviewRotation=0,this.lastPreviewPath=null,this.keepLastPreviewPath=!1},$t.PrintStatus=yt,$t.PropagationOptions=gt,$t.Rect=q,$t.ReflectionUtils=Pt,$t.RenderCallbackTarget=function(t,n,i,r){this.sheetElement=t,this.symbol=n,this.symbolStyle=i,this.symbolVisual=r},$t.RenderingConnectionContext=Ft,$t.RenderingMode={Svg:0,Canvas:1,Hybrid:2},$t.RenderLayers={Default:0,Labels:100,ConnectionChildren:200},$t.RenderReason={None:0,Create:1,SizeChange:2,LocationChange:4,VisibilityChange:8,RenderingPropertiesChange:16,ZoomFactorChange:32,Preview:64},$t.RenderStyle=Vt,$t.RenderUtil=Ut,$t.RepeatStartPositionOption=Ht,
$t.RoutingReason={None:0,SegmentMoved:1,StartPointMoved:2,EndPointMoved:4,BendPointMoved:8,Created:16},$t.SelectionAccuracyType=Gt,$t.SelectionRegionType=bt,$t.SelectionRadius={SMALL:0,MEDIUM:1,LARGE:2},$t.SelectionRule=Wt,$t.SelectionSymbolVisibilityType=Bt,$t.SizingPolicy=D,$t.StubSideType=Zt,$t.TextAlignment=pt,$t.TextBoxAutoFitType=kt,$t.TextChangeEventPhase={PreUpdate:0,PostUpdate:1,Cancel:2},$t.TextStyleType=zt,$t.TextTruncationMode=Xt,$t.TooltipEventOptions=Yt,$t.TooltipState=jt,$t.Transform=Kt,$t.Vector=b,$t.VisibleMask=qt,$t.ZoomOptionForElementPan=Jt,$t.debugFlags=d.DebugFlags,Qt.Utils=$t},"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@diagramming/core")):"function"==typeof define&&define.amd?define(["@diagramming/core"],n):((t=t||self).diagramfoundation=t.diagramfoundation||{},t.diagramfoundation.utils=n(t.diagramfoundation.core));