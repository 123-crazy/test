// @<COPYRIGHT>@
// ==================================================
// Copyright Siemens 2020.
// PL Diagram Foundation 1973.0.1-0
// ==================================================
// @<COPYRIGHT>@
var t,n;t=this,n=function(s,i,t,n,h,r,e,u,f,l,o,a,c,y,v,w,d){"use strict";s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;var p={Tree:0,Hierarchical:1,Balloon:2,Orthogonal:3,Compact:4,Circular:5,Organic:6,Snake:7,Group:8,SimpleTree:9,SimpleBalloon:10,NoLayout:11,OrthogonalGroup:13},g=0,b=1,k=2,m=3,q=4,O=6,E=0,j=1,G=2;function N(){this.fh=p.Hierarchical,this.Ft=s.LayoutDirection.TopToBottom,this.ah=m,this.nestedNodeLayoutStrategy=s.NestedNodeLayoutStrategy.InsideToOut,this.ch=40,this.minLayerDistance=40,this.minNodeToEdgeDist=20,this.lh=20,this.minPortExtensionDist=20,this.vh=20,this.dh=j,this.wh=!1,this.ph=!0,this.gh=800,this.yh=800,this.bh=!1,this.kh=!1,this.mh=!1,this.xh=!0,this.Sh=!0,this.Oh=500,this.Ph=1,this.rankingStrategy=null,this.nodePlacement=s.NodePlacementOption.Center}function C(i){this.layoutOptions=i}N.prototype.Ah=function(){var i=yfiles.layout.LayoutOrientation.TOP_TO_BOTTOM,t=this.Ft
;switch(this.kh&&(t==s.LayoutDirection.TopToBottom?t=s.LayoutDirection.BottomToTop:t==s.LayoutDirection.BottomToTop&&(t=s.LayoutDirection.TopToBottom)),t){case s.LayoutDirection.TopToBottom:i=yfiles.layout.LayoutOrientation.TOP_TO_BOTTOM;break;case s.LayoutDirection.LeftToRight:i=yfiles.layout.LayoutOrientation.LEFT_TO_RIGHT;break;case s.LayoutDirection.BottomToTop:i=yfiles.layout.LayoutOrientation.BOTTOM_TO_TOP;break;case s.LayoutDirection.RightToLeft:i=yfiles.layout.LayoutOrientation.RIGHT_TO_LEFT;break;default:alert("Invalid Layout Direction: "+t)}return i},N.prototype.Rh=function(){var i=yfiles.partial.EdgeRoutingStrategy.ORTHOGONAL,t=this.dh;switch(t){case E:i=yfiles.partial.EdgeRoutingStrategy.ORGANIC;break;case j:i=yfiles.partial.EdgeRoutingStrategy.ORTHOGONAL;break;case G:i=yfiles.partial.EdgeRoutingStrategy.STRAIGHTLINE;break;default:alert("Unknown SubGraph Routing Type - "+t)}return i},N.prototype.copyFrom=function(i){for(var t in i)Object.prototype.hasOwnProperty.call(this,t
)&&(this[t]=i[t])},C.prototype.iq=function(i){var t=null;switch(i){case p.Tree:t=this.tq();break;case p.Hierarchical:t=this.sq();break;case p.Balloon:t=this.nq();break;case p.Orthogonal:t=this.hq();break;case p.OrthogonalGroup:t=this.rq();break;case p.Compact:t=this.eq();break;case p.Circular:t=this.uq();break;case p.Organic:t=this.fq();break;case p.Group:t=this.lq();break;case p.Snake:t=this.oq();break;case p.SimpleTree:t=this.aq();break;case p.SimpleBalloon:t=this.cq();break;case p.NoLayout:t=null;break;default:alert("Unknown Layout Type - "+i),t=this.aq()}return t},C.prototype.yq=function(i){var t=null;switch(i){case g:t=this.vq();break;case b:t=this.wq();break;case k:t=this.dq();break;case m:t=this.pq();break;case q:t=this.gq();break;case O:t=null;break;default:alert("Unknown Routing Type - "+i)}return t},C.prototype.bq=function(i,t){var s=null;return(s=null!=i?new yfiles.partial.PartialLayouter.WithCoreLayouter(i):new yfiles.partial.PartialLayouter
).componentAssignmentStrategy=yfiles.partial.ComponentAssignmentStrategy.CUSTOMIZED,this.layoutOptions.wh?s.positioningStrategy=yfiles.partial.SubgraphPositioningStrategy.BARYCENTER:s.positioningStrategy=yfiles.partial.SubgraphPositioningStrategy.FROM_SKETCH,s.edgeRoutingStrategy=this.layoutOptions.Rh(),s.minimalNodeDistance=this.layoutOptions.ch,null!=t&&(s.edgeRouter=t),s},C.prototype.aq=function(){var i=new yfiles.tree.GenericTreeLayouter,t=new yfiles.layout.FixNodeLayoutStage;return t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.layoutOrientation=this.layoutOptions.Ah(),i.integratedNodeLabeling=!1,i.integratedEdgeLabeling=!1,i.groupingSupported=!0,i.parallelEdgeLayouterEnabled=!1,i.defaultNodePlacer.verticalDistance=this.layoutOptions.ch,i.defaultNodePlacer.horizontalDistance=this.layoutOptions.ch,i.defaultNodePlacer.minFirstSegmentLength=this.layoutOptions.minPortExtensionDist,
i.defaultNodePlacer.minLastSegmentLength=this.layoutOptions.minPortExtensionDist,i.defaultPortAssignment.mode=yfiles.tree.PortAssignmentMode.PORT_CONSTRAINT,i},C.prototype.tq=function(){var i=new yfiles.tree.TreeReductionStage,t=this.pq();i.nonTreeEdgeRouter=t,i.nonTreeEdgeSelectionKey=yfiles.layout.LayouterKeys.SELECTED_EDGES_DP_KEY;t=this.aq();return t.appendStage(i),t},C.prototype.sq=function(){var i=new yfiles.hierarchic.IncrementalHierarchicLayouter;i.layoutOrientation=this.layoutOptions.Ah(),yfiles.hierarchic.ComponentArrangementPolicy&&(i.componentArrangementPolicy=yfiles.hierarchic.ComponentArrangementPolicy.TOPMOST);var t=new yfiles.layout.FixNodeLayoutStage;t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.considerNodeLabels=!1,i.integratedEdgeLabeling=!1,i.orthogonalRouting=!0,i.recursiveGroupLayering=!0,i.compactGroups=!1,i.parallelEdgeLayouterEnabled=!1,i.maximalDuration=500,i.minimumLayerDistance=this.layoutOptions.ch,
i.nodeToNodeDistance=this.layoutOptions.ch,i.nodeToEdgeDistance=this.layoutOptions.minNodeToEdgeDist,i.edgeToEdgeDistance=this.layoutOptions.lh;t=i.edgeLayoutDescriptor;t.minimumFirstSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimumLastSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimumDistance=this.layoutOptions.minNodeToEdgeDist,t.minimumLength=this.layoutOptions.vh,t.minimumSlope=.25,t.orthogonallyRouted=!0;t=i.nodeLayoutDescriptor;return t&&(t.layerAlignment=s.LayoutCoreUtil.toLayerAlignmentValue(this.layoutOptions.nodePlacement,this.layoutOptions.Ft)),i},C.prototype.lq=function(){var i=new yfiles.hierarchic.HierarchicGroupLayouter;i.layoutOrientation=this.layoutOptions.Ah();var t=new yfiles.layout.FixNodeLayoutStage;return t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.strongPortsScalingActive=!0,i.minimalEdgeDistance=this.layoutOptions.lh,i.minimalLayerDistance=this.layoutOptions.ch,
i.minimalNodeDistance=this.layoutOptions.ch,i.minimalFirstSegmentLength=this.layoutOptions.minPortExtensionDist,i.routingStyle=yfiles.hierarchic.RoutingStyle.ORTHOGONAL,i.removeFalseCrossings=!0,i},C.prototype.cq=function(){var i=new yfiles.tree.BalloonLayouter,t=new yfiles.layout.FixNodeLayoutStage;return t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.fromSketchMode=!0,i.considerNodeLabels=!1,i.minimalNodeDistance=this.layoutOptions.ch,i.minimalEdgeLength=this.layoutOptions.vh,i.layoutOrientation=this.layoutOptions.Ah(),i.compactnessFactor=.1,i},C.prototype.nq=function(){var i=new yfiles.tree.TreeReductionStage,t=this.vq();i.nonTreeEdgeRouter=t,i.nonTreeEdgeSelectionKey=yfiles.router.OrganicEdgeRouter.ROUTE_EDGE_DP_KEY;t=this.cq();return t.appendStage(i),t},C.prototype.hq=function(){var i=new yfiles.orthogonal.OrthogonalLayouter;i.layoutOrientation=this.layoutOptions.Ah();var t=new yfiles.layout.FixNodeLayoutStage
;t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.considerNodeLabels=!1,i.integratedEdgeLabeling=!1,i.parallelEdgeLayouterEnabled=!1;t=i.edgeLayoutDescriptor;return t.minimumFirstSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimumLastSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimumSegmentLength=this.layoutOptions.vh,i},C.prototype.rq=function(){var i=new yfiles.orthogonal.OrthogonalGroupLayouter;i.layoutOrientation=this.layoutOptions.Ah();var t=new yfiles.layout.FixNodeLayoutStage;t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.considerNodeLabels=!1,i.integratedEdgeLabeling=!1,i.parallelEdgeLayouterEnabled=!1;t=i.edgeLayoutDescriptor;return t.minimumFirstSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimumLastSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimumSegmentLength=this.layoutOptions.vh,i},C.prototype.eq=function(){return new yfiles.orthogonal.CompactOrthogonalLayouter},
C.prototype.uq=function(){var i=new yfiles.circular.CircularLayouter,t=new yfiles.layout.FixNodeLayoutStage;return t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.fromSketchMode=!0,i},C.prototype.fq=function(){var i=new yfiles.organic.SmartOrganicLayouter;i.layoutOrientation=this.layoutOptions.Ah();var t=new yfiles.layout.FixNodeLayoutStage;return t.fixPointPolicy=yfiles.layout.FixPointPolicy.UPPER_LEFT,i.prependStage(t),i.deterministic=!0,i.minimalNodeDistance=this.layoutOptions.ch,i.preferredEdgeLength=this.layoutOptions.vh,i.considerNodeLabels=!1,i.nodeEdgeOverlapAvoided=!0,i.nodeOverlapsAllowed=!1,i.nodeSizeAware=!0,i.qualityTimeRatio=1,i.maximumDuration=500,i.smartComponentLayout=!0,i},C.prototype.kq=function(i){var t=!1;switch(i){case yfiles.layout.LayoutOrientation.TOP_TO_BOTTOM:case yfiles.layout.LayoutOrientation.BOTTOM_TO_TOP:t=!0;break;case yfiles.layout.LayoutOrientation.LEFT_TO_RIGHT:case yfiles.layout.LayoutOrientation.RIGHT_TO_LEFT:t=!1;break
;default:alert("Unknown layout orientation: "+i)}return t},C.prototype.oq=function(){var i=new window.yfiles.layout.GraphLayoutLineWrapper;i.columnMode=this.kq(this.layoutOptions.Ah()),i.spacing=this.layoutOptions.ch,i.edgeSpacing=this.layoutOptions.lh,i.mirror=this.layoutOptions.xh,i.fixedWidthLineBreaks=this.layoutOptions.Sh,i.fixedWidth=this.layoutOptions.Oh,i.targetRatio=this.layoutOptions.Ph;var t=this.sq();return i.coreLayouter=t,i},C.prototype.vq=function(){var i=new yfiles.router.OrganicEdgeRouter;return i.minimalDistance=this.layoutOptions.minNodeToEdgeDist,i.edgeNodeOverlapAllowed=!1,i.routingAll=!0,i},C.prototype.pq=function(){var i=new yfiles.router.OrthogonalEdgeRouter;return i.minimumDistance=this.layoutOptions.lh,i.minimumDistanceToNode=this.layoutOptions.minNodeToEdgeDist,i.coupledDistances=!1,i.considerNodeLabels=!1,i.sphereOfAction=yfiles.router.SphereOfAction.ROUTE_SELECTED_EDGES,i},C.prototype.wq=function(){var i=new yfiles.router.polyline.EdgeRouter
;i.minimalNodeToEdgeDistance=this.layoutOptions.minNodeToEdgeDist,i.sphereOfAction=yfiles.router.SphereOfAction.ROUTE_SELECTED_EDGES,i.considerNodeLabels=!1,i.considerEdgeLabels=!1;var t=i.defaultEdgeLayoutDescriptor;return t.minimalEdgeToEdgeDistance=this.layoutOptions.lh,t.minimalFirstSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimalLastSegmentLength=this.layoutOptions.minPortExtensionDist,i},C.prototype.dq=function(){var i=new yfiles.router.polyline.EdgeRouter;i.polylineRouting=!0,i.polylineRoutingEnabled=!0,i.minimalNodeToEdgeDistance=this.layoutOptions.minNodeToEdgeDist,i.sphereOfAction=yfiles.router.SphereOfAction.ROUTE_SELECTED_EDGES,i.considerNodeLabels=!1,i.considerEdgeLabels=!1;var t=i.defaultEdgeLayoutDescriptor;return t.minimalEdgeToEdgeDistance=this.layoutOptions.lh,t.minimalFirstSegmentLength=this.layoutOptions.minPortExtensionDist,t.minimalLastSegmentLength=this.layoutOptions.minPortExtensionDist,i},C.prototype.gq=function(){
return new yfiles.router.StraightLineEdgeRouter};var F=0,L=1,M=2,S=3,U=4,R=5;function T(i,t){this.mq=i,this.AR=t,this.qq=F,this.Oq=null}function A(i){this.graph=i,this.Eq=null,this.jq=null,this.Gq=null,this.Nq=null,this.Cq=null,this.Fq=null,this.Lq=null,this.Mq=null,this.Sq=null,this.Uq=null,this.Rq=null,this.Tq=null,this.layerMap=null}function P(i){this.Aq=i,this.Pq=0,this.xq=0,this.Dq=[],this.Bq=[]}A.prototype.Hq=function(i){this.Gq||(this.Gq=[],this.Gq[F]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.ANY,!1),this.Gq[L]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.WEST,!1),this.Gq[M]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.EAST,!1),this.Gq[S]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.NORTH,!1),this.Gq[U]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.SOUTH,!1));i=this.Gq[i];return i||alert("Error for weak port constraint parameter: "),i},A.prototype.zq=function(i){this.Nq||(this.Nq=[],
this.Nq[F]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.ANY,!0),this.Nq[L]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.WEST,!0),this.Nq[M]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.EAST,!0),this.Nq[S]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.NORTH,!0),this.Nq[U]=yfiles.layout.PortConstraint.create(yfiles.layout.PortSide.SOUTH,!0));i=this.Nq[i];return i||alert("Error for strong port constraint parameter: "),i},A.prototype.Iq=function(){return this.Lq||(this.Lq=yfiles.algorithms.Maps.createHashedNodeMap(),this.graph.addDataProvider(yfiles.partial.PartialLayouter.PARTIAL_NODES_DP_KEY,this.Lq)),this.Lq},A.prototype._q=function(){return this.Sq||(this.Sq=yfiles.algorithms.Maps.createHashedNodeMap(),this.graph.addDataProvider(yfiles.partial.PartialLayouter.COMPONENT_ASSIGNMENT_DP_KEY,this.Sq)),this.Sq},A.prototype.Jq=function(){return this.Uq||(this.Uq=yfiles.algorithms.Maps.createHashedNodeMap(),this.graph.addDataProvider(
yfiles.layout.GroupingKeys.MINIMUM_NODE_SIZE_DP_KEY,this.Uq)),this.Uq},A.prototype.Kq=function(){return this.Mq||(this.Mq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(yfiles.partial.PartialLayouter.PARTIAL_EDGES_DP_KEY,this.Mq)),this.Mq},A.prototype.Qq=function(){return this.Rq||(this.Rq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(yfiles.router.OrganicEdgeRouter.ROUTE_EDGE_DP_KEY,this.Rq)),this.Rq},A.prototype.Vq=function(){return this.Tq||(this.Tq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(yfiles.layout.LayouterKeys.SELECTED_EDGES_DP_KEY,this.Tq)),this.Tq},A.prototype.Wq=function(){return this.Eq||(this.Eq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(yfiles.layout.PortConstraintKeys.SOURCE_PORT_CONSTRAINT_DP_KEY,this.Eq)),this.Eq},A.prototype.Xq=function(){return this.jq||(this.jq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(
yfiles.layout.PortConstraintKeys.TARGET_PORT_CONSTRAINT_DP_KEY,this.jq)),this.jq},A.prototype.Yq=function(){return this.Cq||(this.Cq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(yfiles.layout.PortConstraintKeys.SOURCE_GROUP_ID_DP_KEY,this.Cq)),this.Cq},A.prototype.Zq=function(){return this.Fq||(this.Fq=yfiles.algorithms.Maps.createHashedEdgeMap(),this.graph.addDataProvider(yfiles.layout.PortConstraintKeys.TARGET_GROUP_ID_DP_KEY,this.Fq)),this.Fq},A.prototype.getLayerMap=function(){return this.layerMap||(this.layerMap=yfiles.algorithms.Maps.createHashedNodeMap(),this.graph.addDataProvider(yfiles.hierarchic.GivenLayersLayerer.LAYER_ID_DP_KEY,this.layerMap)),this.layerMap},A.prototype.$q=function(i,t){this.Iq().set(i,!t)},A.prototype.ij=function(i,t){this._q().set(i,t)},A.prototype.tj=function(i,t,s){s=new window.yfiles.algorithms.YDimension(t,s);this.Jq().set(i,s)},A.prototype.sj=function(i,t){this.Kq().set(i,!t),this.Vq().set(i,!t),this.Qq().set(i,!t)},
A.prototype.nj=function(i,t,s){t=s?this.zq(t):this.Hq(t);this.Wq().set(i,t)},A.prototype.hj=function(i,t,s){t=s?this.zq(t):this.Hq(t);this.Xq().set(i,t)},A.prototype.rj=function(i,t){this.Yq().set(i,t)},A.prototype.ej=function(i,t){this.Zq().set(i,t)},A.prototype.setNodeLayer=function(i,t){this.getLayerMap().set(i,t)},P.prototype.uj=function(){return{x:this.Pq,y:this.xq}},P.prototype.fj=function(i,t){this.Pq=i,this.xq=t},P.prototype.lj=function(){var i=this.oj(),t=i.x+i.width/2,s=i.y+i.height/2;return{x:t+this.Pq*i.width,y:s+this.xq*i.height}},P.prototype.aj=function(i,t){var s=this.oj(),n=s.x+s.width/2,h=s.y+s.height/2;this.Pq=(i-n)/s.width,this.xq=(t-h)/s.height},P.prototype.cj=function(i){this.Dq.push(i)},P.prototype.yj=function(i){this.Bq.push(i)},P.prototype.vj=function(){return this.Dq},P.prototype.wj=function(){return this.Bq},P.prototype.py=function(){return this.Bq.concat(this.Dq)},P.prototype.dj=function(){return this.Aq},P.prototype.oj=function(){var i=this.Aq,t=i.graph,s={}
;return s.x=t.getX(i),s.y=t.getY(i),s.width=t.getWidth(i),s.height=t.getHeight(i),s};var x=1,D=0;function B(){}B.LinkYfiles_clear=function(i){i&&i.Sr&&(i.Sr=null)},B.LinkYfiles_setYfNodeOnHost=function(i,t){i.Sr=t},B.LinkYfiles_setYfEdgeOnHost=function(i,t){i.Sr=t},B.LinkYfiles_appendYfPortOnHost=function(i,t){i.Sr?i.Sr.push(t):i.Sr=[t]},B.LinkYfiles_getYfObj=function(i){return i.Sr},B.LinkYfiles_getYfPortInfo=function(i){return i.Sr},B.LinkInter_clear=function(i){i&&i.Or&&(i.Or=null)},B.LinkInter_clearWithOwners=function(i){for(var t=i;t&&t.Or;){var s=t.Or.interObj;t.Or=null,s&&s.iOwner&&(t=s.iOwner.hostObj)}},B.LinkInter_setInterObjOnHost=function(i,t){i.Or=i.Or||{},i.Or.interObj=t},B.LinkInter_getInterObj=function(i){if(i.Or)return i.Or.interObj},B.LinkInter_setProxyInterPort=function(i,t){i.Or=i.Or||{},i.Or.proxyIPort=t},B.LinkInter_getValidInterPort=function(i){var t,i=i.Or;return t=i?i.proxyIPort||i.interObj:t};function H(i){for(var t=Array.prototype.slice.apply(arguments).slice(
1),s=0;s<t.length;s++){var n,h=t[s];for(n in h)Object.prototype.hasOwnProperty.call(i,n)||(i[n]=h[n])}return i}function z(i,t){this.x=i,this.y=t}function I(i,t,s,n){this.x=i,this.y=t,this.width=s,this.height=n}function _(i,t,s){this.layoutOptions=i,this.pj=t,this.Pr=s,this.graph=null,this.gj=null,this.bj=[];try{this.graph=new yfiles.layout.DefaultLayoutGraph}catch(i){return void s.reportError(i)}this.gj=new A(this.graph),this.dpMaps=null,this.kj=yfiles.algorithms.YPoint,this.mj=yfiles.algorithms.YPointPath}function J(i,t){this.qj=i,this.Oj=t}function K(i){this.layoutOptions=new N,this.Ej=new C(this.layoutOptions),this.Pr=i,this.jj=new _(this.layoutOptions,this.Ej,this.Pr),this.Gj=new J(null,this.jj),this.groupList=[],this.groupList.push(this.Gj),this.Nj=!1,this.Cj=!1,this.dpMaps=null}function Q(i,t,s){_.call(this,i,t,s);s=this.graph;this.Fj=s.createNodeMap(),this.Lj=s.createNodeMap(),this.Mj=s.createNodeMap(),this.Sj=s.createNodeMap(),s.addDataProvider(
yfiles.layout.GroupingKeys.NODE_ID_DP_KEY,this.Fj),s.addDataProvider(yfiles.layout.GroupingKeys.GROUP_DP_KEY,this.Lj),s.addDataProvider(yfiles.layout.GroupingKeys.PARENT_NODE_ID_DP_KEY,this.Mj),s.addDataProvider(yfiles.layout.GroupingKeys.GROUP_NODE_INSETS_DP_KEY,this.Sj),this.Uj=[]}B.inherit=function(i,t){if(i&&t&&"function"==typeof i&&"function"==typeof t){var s={};return H(s,i.prototype),i.prototype=(n=t.prototype,Object.create||(Object.create=function(i){function t(){}return t.prototype=i,new t}),Object.create(n)),H(i.prototype,s),H(i,t),(i.prototype.constructor=i)!=t&&(i.__base__=t),i}var n},I.prototype.inflate=function(i,t){this.x-=i,this.y-=t,this.width+=2*i,this.height+=2*t},I.prototype.hasOverlap=function(i){return!(i.x+i.width<this.x||i.x>this.x+this.width||i.y+i.height<this.y||i.y>this.y+this.height)},I.prototype.isPointInside=function(i,t){if(t){t=new I(i.x-t,i.y-t,2*t,2*t);return this.hasOverlap(t)}
return i.x>this.x&&i.x<this.x+this.width&&i.y>this.y&&i.y<this.y+this.height},_.prototype.Rj=function(i){if(i)for(var t=i.getEnumerator();t.moveNext();){var s=t.current.tag;s&&B.LinkYfiles_clear(s.mq)}},_.prototype.clear=function(){var i=this.graph;i&&(this.Rj(i.nodes),this.Rj(i.ports),this.Rj(i.edges));for(var t=this.bj,s=0,n=t.length;s<n;++s){var h=t[s].tag;h&&B.LinkYfiles_clear(h.mq)}this.bj=[],this.dpMaps=null},_.prototype.addNode=function(i){var t=this.Pr,s=t.getNodeRect(i),n=!!t.ur&&t.ur(i),h=s.x,r=s.y,e=s.width,u=s.height,t=this.graph,s=t.createNode();t.setLocationCoords(s,h,r),t.setSize(s,e,u);n=new T(i,n);return s.tag=n,B.LinkYfiles_setYfNodeOnHost(i,s),this.layoutOptions.mh&&this.Tj(i),s},_.prototype.changeNode=function(i){var t=this.Pr,s=t.getNodeRect(i),n=!!t.ur&&t.ur(i),t=this.Aj(i);null!=t&&(this.setNodeRect(i,s),t.tag.AR=n,this.layoutOptions.mh&&this.Tj(i))},_.prototype.setNodeRect=function(i,t){var s,n,h=this.Aj(i);null!=h&&(s=t.x,n=t.y,i=t.width,t=t.height,
this.graph.setLocationCoords(h,s,n),this.graph.setSize(h,i,t))},_.prototype.removeNode=function(i){i=this.Aj(i);null!=i&&this.graph.removeNode(i)},_.prototype.addPort=function(i){var t,s,n,h,r,e=this.Pr,u=e.getNodeOfPort(i),f=this.Aj(u);null!=f?(h=e.getNodeRect(u),t=e.cr(i),r=!!e.lr&&e.lr(i),s=e.vr?e.vr(i):F,n=h.x+h.width/2,u=h.y+h.height/2,n=(t.x-n)/h.width,h=(t.y-u)/h.height,r=new T(i,r),r=this.Pj(f,n,h,r),B.LinkYfiles_appendYfPortOnHost(i,{graph:this,port:r}),r.tag.qq=s):e.reportError("Port owning node is not added in graph yet.")},_.prototype.changePort=function(i){var t=this.Pr,s=t.getNodeOfPort(i),n=(t.getNodeRect(s),t.cr(i)),s=!!t.lr&&t.lr(i),t=t.vr?t.vr(i):F,i=this.xj(i);null!=i&&(this.Dj(n),i.tag.AR=s,i.tag.qq=t)},_.prototype.removePort=function(i){var t=this.xj(i);if(null!=t)for(var s=this.bj,n=0,h=s.length;n<h;++n)if(t===s[n]){s.splice(n,1);break}},_.prototype.addEdge=function(i){var t,s,n=this.Pr,h=n.getSourcePort(i),r=n.getTargetPort(i),e=!!n.dr&&n.dr(i),u=this.xj(h),
f=this.xj(r);null!=u&&null!=f&&(t=u.dj(),s=f.dj(),e=new T(i,e),(s=this.graph.createEdgeBetween(t,s)).tag=e,u.yj(s),f.cj(s),this.Bj(s),B.LinkYfiles_setYfEdgeOnHost(i,s),this.layoutOptions.mh&&this.Hj(i),this.zj(i,h,r),i=n.wr(i),this.Ij(s,i))},_.prototype._j=function(i){var t=this.Pr,s=t.getSourcePort(i),n=t.getTargetPort(i),h=!!t.dr&&t.dr(i),r=this.xj(s),e=this.xj(n),u=this.Jj(i);null!=r&&null!=e&&null!=u&&(u.tag.AR=h,this.layoutOptions.mh&&this.Hj(i),this.zj(i,s,n),i=t.wr(i),this.Ij(u,i))},_.prototype.Kj=function(i){i=this.Jj(i);null!=i&&this.graph.Kj(i)},_.prototype.Ij=function(i,t){for(var s=[],n=0,h=t.length;n<h;++n){var r=t[n];s.push(new this.kj(r.x,r.y))}var e=new this.mj.FromPoints(s);this.graph.setPoints(i,e)},_.prototype.Tj=function(i){var t=this.Pr,s=this.Aj(i);s?(i=!!t.ur&&t.ur(i),this.gj.$q(s,i)):alert("Error: the node is not in yfiles graph.")},_.prototype.Hj=function(i){var t=this.Jj(i);t?(i=!!this.Pr.dr&&this.Pr.dr(i),this.gj.sj(t,i)):alert(
"Error: the edge is not in yfiles graph.")},_.prototype.zj=function(i,t,s){var n,h,r,i=this.Jj(i);i?(t&&(h=(n=this.xj(t)).tag.AR,(r=n.tag.qq)==R&&(r=this.Qj(n)),h?this.gj.nj(i,r,!0):r!==F&&this.gj.nj(i,r,!1)),s&&(h=(n=this.xj(s)).tag.AR,(r=n.tag.qq)==R&&(r=this.Qj(n)),h?this.gj.hj(i,r,!0):r!==F&&this.gj.hj(i,r,!1))):alert("Error: the edge is not in yfiles graph.")},_.prototype.Vj=function(i){var t=i.wj(),s=i.vj();if(!(t.length+s.length<2)){for(var n=0,h=t.length;n<h;++n)this.gj.rj(t[n],i);for(n=0,h=s.length;n<h;++n)this.gj.ej(s[n],i)}},_.prototype.Wj=function(){for(var i=this.Xj(),t=0,s=i.length;t<s;++t)this.Vj(i[t])},_.prototype.Qj=function(i){var t=i.oj(),s=i.lj(),n=s.x,h=s.y,i=Math.abs(n-t.x),s=Math.abs(h-t.y),n=Math.abs(n-(t.x+t.width)),h=Math.abs(h-(t.y+t.height)),t=i,i=L;return s<t&&(t=s,i=S),n<t&&(t=n,i=M),h<t&&(t=h,i=U),i},_.prototype.layout=function(){this.ne();var i=this.layoutOptions,t=this.pj.iq(i.fh),s=this.pj.yq(i.ah),n=null;if(null!=(n=null!=t?this.pj.bq(t,s):s)){
this.applyLayeringConstraint(t,i);try{new yfiles.layout.BufferedLayouter.WithCoreLayouter(n).doLayout(this.graph)}catch(i){return void this.Pr.reportError(i)}this.Yj()}},_.prototype.ne=function(){this.Wj()},_.prototype.Yj=function(){this.Zj()},_.prototype.getNodeRect=function(i){var t=new I(0,0,1,1),s=this.Aj(i);if(null==s)return t;i=this.graph;return t.x=i.getX(s),t.y=i.getY(s),t.width=i.getWidth(s),t.height=i.getHeight(s),t},_.prototype.cr=function(i){var t=new z(0,0),i=this.xj(i);if(null==i)return t;i=i.lj();return t.x=i.x,t.y=i.y,t},_.prototype.wr=function(i){var t=[],i=this.Jj(i);if(null==i)return t;for(var s,n=this.graph.getPathList(i).getEnumerator();n.moveNext();)s=n.current,t.push(new z(s.x,s.y));return t},_.prototype.update=function(i){i=1/(i=i<=0?1:i);this.Q2(i),this.i1(i),this.$j(i)},_.prototype.Q2=function(i){for(var t=this.graph.nodes.getEnumerator();t.moveNext();)t.current.tag.mq},_.prototype.i1=function(i){for(var t,s,n=this.Xj(),h=0,r=n.length;h<r;++h)s=(t=n[h]).tag.mq
,null==t.tag.Oq&&this.iG(s,t,i)},_.prototype.$j=function(i){for(var t,s,n=this.graph.edges.getEnumerator();n.moveNext();)s=(t=n.current).tag.mq,this.tG(s,t,i)},_.prototype.sG=function(i,t,s){var n=this.Pr.getNodeRect(i),h=s*(t.layout.x-n.x),r=s*(t.layout.y-n.y),e=s*(t.layout.width-n.width),n=s*(t.layout.height-n.height);this.Pr.pr(i,h,r,e,n)},_.prototype.iG=function(i,t,s){var n=this.Pr,h=n.cr(i),r=n.getNodeOfPort(i),n=n.getNodeRect(r),r=new z(0,0);r.x=(h.x-n.x)/n.width,r.y=(h.y-n.y)/n.height;n=(t.location.x-t.owner.layout.x)/t.owner.layout.width,t=(t.location.y-t.owner.layout.y)/t.owner.layout.height,n=s*(n-r.x),r=s*(t-r.y);this.Pr.yr(i,n,r)},_.prototype.tG=function(i,t,s){if(1!=s){var n=t.bends.count+2,h=this.Pr.wr(i);this.nG(h,n);var r=0,e=t.sourcePort,n=t.targetPort,u=n.location.x,f=n.location.y;this.EN(h[r],e.location.x,e.location.y,s);for(var l=t.bends.getEnumerator(),o=null;l.moveNext();)o=l.current,this.EN(h[++r],o.location.x,o.location.y,s);0<t.bends.count&&o&&(u=o.location.x,
f=o.location.y);for(var a=h.length-1,c=r+1;c<a;++c)this.EN(h[c],u,f,s);this.EN(h[h.length-1],n.location.x,n.location.y,s),this.trimPathToNodes(e,n,h),this.Pr.kr(i,h)}else{n=this.wr(i);this.Pr.kr(i,n)}},_.prototype.EN=function(i,t,s,n){i.x+=n*(t-i.x),i.y+=n*(s-i.y)},_.prototype.nG=function(i,t){if(!(i.length>=t))for(var s=i[i.length-1].x,n=i[i.length-1].y,h=t-i.length,r=0;r<h;++r)i.push(new z(s,n))},_.prototype.trimPathToNodes=function(i,t,s){var n,h,r,e;s.length<2||(r=i.owner,e=t.owner,(h=n=null)!=i.tag.Oq&&(r=i.tag.Oq.xj(i.tag.mq).owner),null!=t.tag.Oq&&(e=t.tag.Oq.xj(t.tag.mq).owner),r=this.Pr.getNodeRect(r.tag.mq),e=this.Pr.getNodeRect(e.tag.mq),r.inflate(1,1),e.inflate(1,1),this.hG(s,r,e),n=this.rG(r,s[0],s[1]),h=this.rG(e,s[s.length-2],s[s.length-1]),null!=n&&(s[0]=n),null!=h&&(s[s.length-1]=h))},_.prototype.hG=function(i,t,s){for(var n,h,r=!0,e=new z(0,0),u=new z(0,0);2<i.length&&r;)r=!1,e.x=i[0].x,e.y=i[0].y,u.x=i[1].x,u.y=i[1].y,t.isPointInside(e)&&t.isPointInside(u)&&(i.shift(
),r=!0);for(r=!0;2<i.length&&r;)r=!1,n=i.length-2,h=i.length-1,e.x=i[n].x,e.y=i[n].y,u.x=i[h].x,u.y=i[h].y,s.isPointInside(e)&&s.isPointInside(u)&&(i.pop(),r=!0)},_.prototype.rG=function(i,t,s){var n=i.x,h=i.y,r=i.x+i.width,e=i.y+i.height,u=new z(n,h),f=new z(n,e),i=this.eG(t,s,u,f);return null!=i?i:(f.x=r,f.y=h,null!=(i=this.eG(t,s,u,f))?i:(u.x=r,u.y=e,null!=(i=this.eG(t,s,u,f))?i:(f.x=n,f.y=e,null!=(i=this.eG(t,s,u,f))?i:null)))},_.prototype.eG=function(i,t,s,n){var h=(n.y-s.y)*(t.x-i.x)-(n.x-s.x)*(t.y-i.y);if(Math.abs(h)<1e-7)return null;n=((n.x-s.x)*(i.y-s.y)-(n.y-s.y)*(i.x-s.x))/h,h=((t.x-i.x)*(i.y-s.y)-(t.y-i.y)*(i.x-s.x))/h;if(n<0||1<n)return null;if(h<0||1<h)return null;h=n*(t.x-i.x),t=n*(t.y-i.y),i=new z(i.x,i.y);return i.x+=h,i.y+=t,i},_.prototype.uG=function(){return this.graph.nodes.count},_.prototype.fG=function(){var i=this.graph.getBoundingBox();return new I(i.x,i.y,i.width,i.height)},_.prototype.lG=function(i){var t=new z(0,0),i=this.Aj(i);return null==i||(
t.x=this.graph.getCenterX(i),t.y=this.graph.getCenterY(i)),t},_.prototype.oG=function(i,t){var s=this.fG(),n=s.x+s.width/2,s=s.y+s.height/2;yfiles.layout.GraphTransformer.translate(this.graph,i-n,t-s)},_.prototype.aG=function(i){var t=new z(0,0),i=this.xj(i);if(null==i)return t;i=i.lj();return t.x=i.x,t.y=i.y,t},_.prototype.Dj=function(i,t){i=this.xj(i);if(null!=i){i.aj(t.x,t.y);for(var s=i.py(),n=0,h=s.length;n<h;++n)this.Bj(s[n])}},_.prototype.Aj=function(i){return B.LinkYfiles_getYfObj(i)||null},_.prototype.xj=function(i){var t=B.LinkYfiles_getYfPortInfo(i);if(t)for(var s=t.length,n=0;n<s;n++)if(t[n].graph===this)return t[n].port;return null},_.prototype.Jj=function(i){return B.LinkYfiles_getYfObj(i)||null},_.prototype.cG=function(i,t,s){var n,h,r=this.Pr,e=t,u=this.Aj(e);null!=u&&(h=r.getNodeRect(e),n=r.cr(i),t=r.getNodeOfPort(i),r.getNodeRect(t),e=r.vr?r.vr(i):F,t=h.x+h.width/2,r=h.y+h.height/2,t=(n.x-t)/h.width,r=(n.y-r)/h.height,h=new T(i,!0),h=this.Pj(u,t,r,h),
B.LinkYfiles_appendYfPortOnHost(i,{graph:this,port:h}),h.tag.qq=e,h.tag.Oq=s)},_.prototype.yG=function(){for(var i=this.Xj(),t=[],s=0,n=i.length;s<n;++s){var h=i[s];null!=h.tag.Oq&&t.push(h.tag.mq)}return t},_.prototype.Xj=function(){return this.bj},_.prototype.Pj=function(i,t,s,n){n=this.vG(i,t,s,n);return this.bj.push(n),n},_.prototype.vG=function(i,t,s,n){i=new P(i);return i.fj(t,s),i.tag=n,i},_.prototype.wG=function(i){var t=this.graph.getSourcePointAbs(i),s=this.graph.getTargetPointAbs(i),n=this.dG(i),i=this.pG(i);n.aj(t.x,t.y),i.aj(s.x,s.y)},_.prototype.Bj=function(i){var t=this.dG(i),s=this.pG(i),t=t.lj(),s=s.lj();this.graph.setSourcePointAbs(i,new this.kj(t.x,t.y)),this.graph.setTargetPointAbs(i,new this.kj(s.x,s.y))},_.prototype.Zj=function(){for(var i=this.graph.edges.getEnumerator();i.moveNext();){var t=i.current;this.wG(t)}},_.prototype.dG=function(i){i=i.tag.mq,i=this.Pr.getSourcePort(i);return this.xj(i)},_.prototype.pG=function(i){i=i.tag.mq,i=this.Pr.getTargetPort(i)
;return this.xj(i)},_.prototype.setAllDpMaps=function(i){this.dpMaps=i},_.prototype.applyLayeringConstraint=function(i,t){if(t.fh===p.Hierarchical&&t.rankingStrategy===x){t=this.dpMaps;if(t){var s=t[D];if(s&&void 0!==i.fromScratchLayeringStrategy&&void 0!==yfiles.hierarchic.LayeringStrategy){i.fromScratchLayeringStrategy=yfiles.hierarchic.LayeringStrategy.USER_DEFINED;for(var n=this.graph.nodes.getEnumerator();n.moveNext();){var h=n.current,r=s.get(h.tag.mq);this.gj.setNodeLayer(h,r)}}}}},K.prototype.reset=function(){for(var i=this.groupList,t=0,s=i.length;t<s;++t)i[t].Oj.clear();this.jj=new _(this.layoutOptions,this.Ej,this.Pr),this.Gj=new J(null,this.jj),this.groupList=[],this.groupList.push(this.Gj),this.dpMaps=null},K.prototype.getLayoutOptions=function(){return this.layoutOptions},K.prototype.addNode=function(i){this.gG(i).addNode(i)},K.prototype.changeNode=function(i){this.bG(i).changeNode(i)},K.prototype.kG=function(i){var t=this.Pr.getNodeRect(i);this.bG(i).setNodeRect(i,t)},
K.prototype.removeNode=function(i){var t;this.mG(i)?alert("Cannot remove nodes from the yFiles Layout Layer with active children"):((t=this.bG(i)).removeNode(i),0===t.uG()&&this.qG(t))},K.prototype.addPort=function(i){var t=this.Pr.getNodeOfPort(i);this.bG(t).addPort(i)},K.prototype.changePort=function(i){var t=this.Pr.getNodeOfPort(i);this.bG(t).changePort(i)},K.prototype.removePort=function(i){var t=this.Pr.getNodeOfPort(i);this.bG(t).removePort(i)},K.prototype.addEdge=function(i){var t=this.Pr.getSourcePort(i),s=this.Pr.getTargetPort(i),n=this.Pr.getNodeOfPort(t),t=this.Pr.getNodeOfPort(s),s=this.Pr.getParentNode(n),t=this.Pr.getParentNode(t),n=this.bG(n);s!=t?this.OG(i):n.addEdge(i)},K.prototype._j=function(i){this.Kj(i),this.addEdge(i)},K.prototype.Kj=function(i){var t=this.EG(i);t&&t.Kj(i)},K.prototype.layout=function(){var i=this.layoutOptions;this.jG(this.Gj,i.fh,i.Ft,i.ah,i.bh),i.bh&&this.Gj.Oj.oG(i.gh,i.yh),i.fh!=p.NoLayout&&this.GG(this.Gj)},K.prototype.Hh=function(i){
this.layout(p.NoLayout,s.LayoutDirection.TopToBottom,i,!1)},K.prototype.th=function(i){return this.bG(i).getNodeRect(i,void 0)},K.prototype.Kh=function(){return this.Gj.Oj.fG()},K.prototype.ih=function(i){var t=this.Pr.getNodeOfPort(i);return this.bG(t).cr(i)},K.prototype.nh=function(i){return this.EG(i).wr(i)},K.prototype.update=function(i){this.Nj=!0,this.NG(this.Gj,i),this.Nj=!1},K.prototype.jG=function(i,t,s,n,h){for(var r=i.qj,e=this.groupList.length,u=0;u<e;++u)this.groupList[u]!=i&&this.Pr.getParentNode(this.groupList[u].qj)==r&&this.jG(this.groupList[u],t,s,n,!1);t!=p.NoLayout&&this.GG(i),this.CG(i),this.setInnerDpMaps(i.Oj,this.dpMaps),i.Oj.layout(t,s,n,h),t!=p.NoLayout&&this.FG(r,i.Oj)},K.prototype.GG=function(i){for(var t=i.qj,s=this.groupList.length,n=0;n<s;++n)this.groupList[n]!=i&&this.Pr.getParentNode(this.groupList[n].qj)==t&&(this.LG(this.groupList[n]),this.GG(this.groupList[n]))},K.prototype.LG=function(i){var t=i.qj,s=i.Oj;null!=t?(i=this.Pr.getGroupNodePadding(t),(
t=this.bG(t).lG(t)).x=t.x+(i.left-i.right)/2,t.y=t.y+(i.top-i.bottom)/2,s.oG(t.x,t.y)):alert("Cannot Reposition Root Graph to Parent Node")},K.prototype.FG=function(i,t){var s,n;null!=i&&(s=t.fG(),t=this.Pr.getGroupNodePadding(i),s.x=s.x-t.left,s.y=s.y-t.top,s.width=s.width+t.left+t.right,s.height=s.height+t.top+t.bottom,this.Pr.hr&&(n=this.Pr.hr(i),s.width<n.width&&(s.width=n.width),s.height<n.height&&(s.height=n.height)),(n=this.bG(i))?n.setNodeRect(i,s):alert("No Parent Node Found to Resize: "+i))},K.prototype.NG=function(i,t){for(var s=i.qj,n=this.groupList.length,h=0;h<n;++h)this.groupList[h]!=i&&this.Pr.getParentNode(this.groupList[h].qj)==s&&this.NG(this.groupList[h],t);i.Oj.update(t)},K.prototype.gG=function(i){if(null!=(t=this.MG(i)))return t;var t=new _(this.layoutOptions,this.Ej,this.Pr),i=new J(this.Pr.getParentNode(i),t);return this.groupList.push(i),t},K.prototype.qG=function(i){if(i!=this.jj){for(var t=this.groupList.length,s=0;s<t;++s)if(this.groupList[s].Oj==i
)return void this.groupList.splice(s,1);alert("Group graph to remove was not found")}},K.prototype.bG=function(i){var t=this.MG(i);return null==t?(alert("A graph was not found for the node: "+i),this.jj):t},K.prototype.EG=function(i,t,s){var n=this.Pr.getSourcePort(i),i=this.Pr.getTargetPort(i),n=this.Pr.getNodeOfPort(n),i=this.Pr.getNodeOfPort(i),i=this.zv(n,i),i=this.SG(i);return null==i&&alert("No Common Edge Graph Found"),i},K.prototype.MG=function(i){i=this.Pr.getParentNode(i);return this.SG(i)},K.prototype.SG=function(i){for(var t=this.groupList.length,s=0;s<t;++s)if(this.groupList[s].qj==i)return this.groupList[s].Oj;return null},K.prototype.mG=function(i){for(var t=this.groupList.length,s=0;s<t;++s)if(this.groupList[s].qj==i)return!0;return!1},K.prototype.OG=function(i){var t=this.Pr.getSourcePort(i),s=this.Pr.getTargetPort(i),n=this.Pr.getNodeOfPort(t),h=this.Pr.getNodeOfPort(s),r=null,e=null,u=this.zv(n,h),f=this.UG(u,n),u=this.UG(u,h);f!=n&&(r=this.bG(n),(e=this.bG(f)).cG(t,
f,r)),u!=h&&(r=this.bG(h),(e=this.bG(u)).cG(s,u,r)),null!=e?e.addEdge(i):alert("Adding Cross Group Edge but No Surrogate Graph Found")},K.prototype.zv=function(i,t){var s=this.Pr.getParentNode(i),n=this.Pr.getParentNode(t);if(null==n)return null;if(s==n)return s;for(;null!=s;){for(n=this.Pr.getParentNode(t);null!=n;){if(s==n)return s;n=this.Pr.getParentNode(n)}s=this.Pr.getParentNode(s)}return null},K.prototype.UG=function(i,t){for(var s=this.Pr.getParentNode(t);i!=s&&null!=s;)t=s,s=this.Pr.getParentNode(t);return i!=s?(alert("Surrogate Node Not Found"),null):t},K.prototype.CG=function(i){for(var t,s,n=i.Oj.yG(),h=0;h<n.length;++h)t=n[h],s=this.Pr.getNodeOfPort(t),s=this.bG(s).aG(t),i.Oj.Dj(t,s)},K.prototype.RG=function(){return!!this.Nj&&(this.Cj||alert("Usage Error Detected by the yFiles Layout Layer\nHost is attempting to change the yFiles Data Module during Update Phase"),this.Cj=!0)},K.prototype.wr=function(i){var t=this.EG(i);return t?t.wr(i):null},
K.prototype.setAllDpMaps=function(i){this.dpMaps=i},K.prototype.setInnerDpMaps=function(i,t){i.setAllDpMaps(t)},B.inherit(Q,_);var V=Q.__base__.prototype;Q.prototype.clear=function(){this.Uj=[];var i=this.graph;i.disposeNodeMap(this.Fj),i.disposeNodeMap(this.Lj),i.disposeNodeMap(this.Mj),i.disposeNodeMap(this.Sj),V.clear.call(this)},Q.prototype.addNode=function(i){var t=null,t=this.Pr.isGroupNode(i)?this.TG(i):V.addNode.call(this,i);return this.Fj.set(t,t),t},Q.prototype.ne=function(){V.ne.call(this),this.AG()},Q.prototype.Yj=function(){V.Yj.call(this),this.layoutOptions.fh===p.Snake&&this.PG()},Q.prototype.TG=function(i){var t=V.addNode.call(this,i),s=this.Pr;this.Lj.setBool(t,!0);var n=this.xG(i);return this.Sj.set(t,n),s.hr&&this.DG(i),t},Q.prototype.xG=function(i){i=this.Pr.getGroupNodePadding(i);return this.BG(i.left,i.top,i.right,i.bottom)},Q.prototype.BG=function(i,t,s,n){var h=Array.prototype.join.call(arguments,"_"),r=this.Uj[h];if(r)return r;s=new yfiles.algorithms.Insets(t,i
,n,s);return this.Uj[h]=s},Q.prototype.DG=function(i){var t=this.Aj(i);t?(i=this.Pr.hr(i),this.gj.tj(t,i.width,i.height)):alert("Error: the node is not in yfiles graph.")},Q.prototype.AG=function(){for(var i,t,s=this.Mj,n=this.graph.nodes.getEnumerator();n.moveNext();)t=(i=n.current).tag.mq,(t=this.Pr.getParentNode(t))&&((t=this.Aj(t))?s.set(i,t):alert("Cannot find parent node in yfiles graph."))},Q.prototype.HG=function(i){return this.Sj.get(i)},Q.prototype.PG=function(){var i=new yfiles.layout.GraphGrouping(this.graph);Q.SnakeFix.adjustGroupContentForSnake(this,i),i.dispose()};var W={};function X(i){this.Pr=i,this.layoutOptions=new N,this.pj=null,this.Oj=null,this.dpMaps=null,this.Ch()}W.adjustGroupContentForSnake=function(i,t){for(var s=t.root,n=t.getChildren(s).getEnumerator();n.moveNext();){var h=n.current;W.adjustGroupDescents(i,t,h)}},W.adjustGroupDescents=function(i,t,s){if(t.isGroupNode(s)){for(var n=[],h=t.getChildren(s).getEnumerator();h.moveNext();){var r=h.current;n.push(r
)}if(!(n.length<1)){s=W.calcDeltDistance(i,s,n);s&&W.adjustNodesPositon(i,n,s.x,s.y);for(var e=0;e<n.length;++e){var u=n[e];W.adjustGroupDescents(i,t,u)}}}},W.adjustNodesPositon=function(i,t,s,n){for(var h=0;h<t.length;++h){var r=t[h].tag.mq,e=i.getNodeRect(r);e.x+=s,e.y+=n,i.setNodeRect(r,e)}},W.calcDeltDistance=function(i,t,s){var n=W.getBound(i,s);if(n){var h=i.getNodeRect(t.tag.mq),s={};s.tlx=h.x,s.tly=h.y,s.brx=h.x+h.width,s.bry=h.y+h.height;i=(i=i.HG(t))||{left:0,top:0,right:0,bottom:0},t={};t.x=(n.tlx+n.brx)/2,t.y=(n.tly+n.bry)/2;n={};n.x=(s.tlx+s.brx)/2,n.y=(s.tly+s.bry)/2,n.x+=(i.left-i.right)/2,n.y+=(i.top-i.bottom)/2;i={};return i.x=n.x-t.x,i.y=n.y-t.y,i}},W.getBound=function(i,t){for(var s,n=0;n<t.length;++n){var h=t[n],r=i.getNodeRect(h.tag.mq),h={};h.tlx=r.x,h.tly=r.y,h.brx=r.x+r.width,h.bry=r.y+r.height,s?(s.tlx>h.tlx&&(s.tlx=h.tlx),s.tly>h.tly&&(s.tly=h.tly),s.brx<h.brx&&(s.brx=h.brx),s.bry<h.bry&&(s.bry=h.bry)):((s={}).tlx=h.tlx,s.tly=h.tly,s.brx=h.brx,s.bry=h.bry)}
return s},Q.SnakeFix=W,X.prototype.Ch=function(){this.pj=new C(this.layoutOptions),this.Oj=new Q(this.layoutOptions,this.pj,this.Pr),this.Oj.supportGroup=!0,this.dpMaps=null},X.prototype.reset=function(){this.Oj.clear(),this.pj=null,this.Oj=null,this.dpMaps=null,this.Ch()},X.prototype.getLayoutOptions=function(){return this.layoutOptions},X.prototype.layout=function(){this.setInnerDpMaps(this.Oj,this.dpMaps),this.Oj.layout();var i=this.layoutOptions;i.bh&&this.Oj.oG(i.gh,i.yh)},X.prototype.addNode=function(i){this.Oj.addNode(i)},X.prototype.addPort=function(i){this.Oj.addPort(i)},X.prototype.addEdge=function(i){this.Oj.addEdge(i)},X.prototype.th=function(i){return this.Oj.getNodeRect(i)},X.prototype.ih=function(i){return this.Oj.cr(i)},X.prototype.nh=function(i){return this.Oj.wr(i)},X.prototype.Kh=function(){return this.Oj.fG()},X.prototype.setAllDpMaps=function(i){this.dpMaps=i},X.prototype.setInnerDpMaps=function(i,t){i.setAllDpMaps(t)},
d.common.ObjectHelper.rootNamespace=d.common.ObjectHelper.rootNamespace||{};var Y=d.common.ObjectHelper.rootNamespace;Y.Layout=Y.Layout||{},Y.Layout.YfLayout=K,Y.Layout.YfGlobalLayout=X;d={};return d.Layout=Y.Layout||{},d.Layout.YfLayout=K,d.Layout.YfGlobalLayout=X,d},"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@diagramming/layoutcore"),require("./yfiles/algorithms"),require("./yfiles/core-lib"),require("./yfiles/lang"),require("./yfiles/layout-core"),require("./yfiles/layout-hierarchic"),require("./yfiles/layout-misc"),require("./yfiles/layout-organic"),require("./yfiles/layout-orthogonal"),require("./yfiles/layout-partial"),require("./yfiles/layout-planar"),require("./yfiles/layout-polyline"),require("./yfiles/layout-router"),require("./yfiles/layout-tree"),require("./yfiles/layout-util"),require("./yfiles/license"),require("@diagramming/core")):"function"==typeof define&&define.amd?define(["@diagramming/layoutcore","./yfiles/algorithms",
"./yfiles/core-lib","./yfiles/lang","./yfiles/layout-core","./yfiles/layout-hierarchic","./yfiles/layout-misc","./yfiles/layout-organic","./yfiles/layout-orthogonal","./yfiles/layout-partial","./yfiles/layout-planar","./yfiles/layout-polyline","./yfiles/layout-router","./yfiles/layout-tree","./yfiles/layout-util","./yfiles/license","@diagramming/core"],n):((t=t||self).diagramfoundation=t.diagramfoundation||{},t.diagramfoundation.yfileswrapper=n(t.diagramfoundation.layoutcore,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.diagramfoundation.core));