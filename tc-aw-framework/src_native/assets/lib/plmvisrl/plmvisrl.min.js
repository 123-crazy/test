!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PLMVisRL=t():e.PLMVisRL=t()}(window,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){if(void 0===THREE)throw ReferenceError("THREE.js is undefined.");var r,i;THREE.Box3.prototype.setFromArray=function(e,t){t=void 0===t?3:t;for(var r=1/0,i=1/0,n=1/0,o=-1/0,a=-1/0,s=-1/0,l=0,u=e.length;l<u;l+=t){var c=e[l],f=e[l+1],h=e[l+2];c<r&&(r=c),f<i&&(i=f),h<n&&(n=h),c>o&&(o=c),f>a&&(a=f),h>s&&(s=h)}this.min.set(r,i,n),this.max.set(o,a,s)},THREE.BufferGeometry.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position;void 0===e&&(e=this.attributes.i_vMCSVtxCoords);var t=e.array;void 0!==t?this.boundingBox.setFromArray(t,e.itemSize):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},THREE.BufferGeometry.prototype.computeBoundingSphere=(r=new THREE.Box3,i=new THREE.Vector3,function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position;void 0===e&&(e=this.attributes.i_vMCSVtxCoords);var t=e.array;if(t){var n=this.boundingSphere.center;r.setFromArray(t,e.itemSize),r.center(n);for(var o=0,a=e.itemSize,s=0,l=t.length;s<l;s+=a)i.fromArray(t,s),o=Math.max(o,n.distanceToSquared(i));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,r=new THREE.Sphere,i=new THREE.Vector3,n=new THREE.Vector3,o=new THREE.Vector3,a=(new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector2),s=new THREE.Vector2,l=new THREE.Vector2,u=new THREE.Vector3,c=new THREE.Vector3,f=new THREE.Vector3;function h(e,t,r,h,d,g,m,p,L){i.fromArray(h,g*L),n.fromArray(h,m*L),o.fromArray(h,p*L);var R,S,E,v,y,M,T,P=function(e,t,r,i,n,o,a){if(null===(e.material.side===THREE.BackSide?r.intersectTriangle(o,n,i,!0,a):r.intersectTriangle(i,n,o,!1,a)))return null;f.copy(a),f.applyMatrix4(e.matrixWorld);var s=t.ray.origin.distanceTo(f);return s<t.near||s>t.far?null:{distance:s,point:f.clone(),object:e}}(e,t,r,i,n,o,c);return P&&(d&&(a.fromArray(d,2*g),s.fromArray(d,2*m),l.fromArray(d,2*p),P.uv=(R=c,S=i,E=n,v=o,y=a,M=s,T=l,THREE.Triangle.barycoordFromPoint(R,S,E,v,u),y.multiplyScalar(u.x),M.multiplyScalar(u.y),T.multiplyScalar(u.z),y.add(M).add(T),y.clone())),P.face=new THREE.Face3(g,m,p,THREE.Triangle.normal(i,n,o)),P.faceIndex=g),P}return function(i,n){var o,a,s=this.geometry,l=this.material,u=this.matrixWorld;if(void 0!==l&&(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(u),!1!==i.ray.intersectsSphere(r)&&(e.getInverse(u),t.copy(i.ray).applyMatrix4(e),(null===s.boundingBox||!1!==t.intersectsBox(s.boundingBox))&&s instanceof THREE.BufferGeometry))){var c,f,d,g=s.index,m=s.attributes,p=null;void 0!==m.position&&(p=m.position),void 0!==m.i_vMCSVtxCoords&&(p=m.i_vMCSVtxCoords);var L=p.array,R=p.itemSize;if(void 0!==m.uv&&(o=m.uv.array),void 0!==m.i_vMultiTexCoord0&&(o=m.i_vMultiTexCoord0.array),null!==g){var S=g.array;if(4===s.primitiveTypeOrdinal)for(var E=0,v=S.length;E<v;E+=3)c=S[E],f=S[E+1],d=S[E+2],this.drawMode===THREE.TriangleStripDrawMode&&E%6==3&&(c=S[E+2],f=S[E+1],d=S[E]),(a=h(this,i,t,L,o,c,f,d,R))&&(a.faceIndex=Math.floor(E/3),n.push(a));else for(var y=null,M=0,T=s.groups.length;M<T;++M)for(var P=(y=s.groups[M]).start+2,w=y.start+y.count;P<w;++P)c=S[P-2],f=S[P-1],d=S[P],(a=h(this,i,t,L,o,c,f,d,R))&&(a.groupIndex=M,a.faceIndex=P-2,n.push(a))}else{var V=3*R;for(E=0,v=L.length;E<v;E+=V)(a=h(this,i,t,L,o,c=E/R,f=c+1,d=c+2,R))&&(a.index=c,n.push(a))}}}}()},function(e,t,r){"use strict";function i(e,t,r,i){e=(e=(e=null==e?.5:e)<0?0:e)>1?1:e,t=(t=(t=null==t?.5:t)<0?0:t)>1?1:t,r=(r=(r=null==r?.5:r)<0?0:r)>1?1:r,i=(i=(i=null==i?1:i)<0?0:i)>1?1:i,THREE.Vector4.call(this,e,t,r,i)}r.r(t),i.prototype=Object.create(THREE.Vector4.prototype),i.prototype.constructor=i,Object.defineProperties(i.prototype,{r:{enumerable:!0,get:function(){return this.x},set:function(e){this.x=e<0?0:e>1?1:e}},g:{enumerable:!0,get:function(){return this.y},set:function(e){this.y=e<0?0:e>1?1:e}},b:{enumerable:!0,get:function(){return this.z},set:function(e){this.z=e<0?0:e>1?1:e}},a:{enumerable:!0,get:function(){return this.w},set:function(e){this.w=e<0?0:e>1?1:e}}});var n=Object.freeze(new i(0,0,0,1)),o=Object.freeze(new i(0,0,0,0)),a=new THREE.Vector3;function s(e){PLMVisRL.logger.finer("MatrixPackage Constructor"),this.mModelView=e.mModelView?e.mModelView:new THREE.Matrix4,this.mModelViewProj=e.mModelViewProj?e.mModelViewProj:new THREE.Matrix4,this.mNormal=e.mNormal?e.mNormal:new THREE.Vector3(0,1,0),this.vPADDING=a}function l(e,t){PLMVisRL.logger.finer("LightEntry Constructor"),this.vDiffuseColor=e.diffuseColor4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.diffuseColor4f):o,this.vSpecularColor=e.specularColor4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.specularColor4f):o,this.vAmbientColor=e.ambientColor4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.ambientColor4f):o,this.vPosition=e.lightPos4f?(new THREE.Vector4).fromArray(e.lightPos4f):new THREE.Vector4(0,0,0,1),this.vDirection=e.lightDir4f?(new THREE.Vector4).fromArray(e.lightDir4f):new THREE.Vector4,this.vAttenCoeff=e.attenCoeff4f?(new THREE.Vector4).fromArray(e.attenCoeff4f):new THREE.Vector4,this.vSpotParams=e.spotParams4f?(new THREE.Vector4).fromArray(e.spotParams4f):new THREE.Vector4,this.vShadParams=e.shadParams4f?(new THREE.Vector4).fromArray(e.shadParams4f):new THREE.Vector4,this.vDirection.normalize()}function u(e){PLMVisRL.logger.finer("MaterialStruct Constructor"),this.vDiffuse=e.diffuse4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.diffuse4f):n,this.vSpecular=e.specular4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.specular4f):n,this.vEmissive=e.emissive4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.emissive4f):n,this.vAmbient=e.ambient4f?(new PLMVisRL.DMShader.DMColor).fromArray(e.ambient4f):n,this.vParams=e.parameters4f?(new THREE.Vector4).fromArray(e.parameters4f):new THREE.Vector4}function c(e){PLMVisRL.logger.finer("CombiStruct Constructor"),this.vSpriteParams=e.vSpriteParams?(new THREE.Vector4).fromArray(e.vSpriteParams):new THREE.Vector4(1,1,1,1)}function f(e){if(PLMVisRL.logger.finer("TexEnvStruct Constructor"),this.mTexMatrix=e.mTexMatrix?(new THREE.Matrix4).fromArray(e.mTexMatrix):new THREE.Matrix4,this.avTexGenParams=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],e.avTexGenParams)for(var t=e.avTexGenParams,r=0,o=t.length;r<o;++r)this.avTexGenParams[r].fromArray(t[r]);this.vBlendColor=e.vBlendColor?(new i).fromArray(e.vBlendColor):n,this.vBorderColor=e.vBorderColor?(new i).fromArray(e.vBorderColor):n,this.vfImgResolution=e.vfImgResolution?(new THREE.Vector4).fromArray(e.vfImgResolution):new THREE.Vector4,this.vfAtlasMetrics=e.vfAtlasMetrics?(new THREE.Vector4).fromArray(e.vfAtlasMetrics):new THREE.Vector4,this.vTexParams=e.vTexParams?(new THREE.Vector4).fromArray(e.vTexParams):new THREE.Vector4,this.avTexGenTypes=e.vTexGenTypes?(new THREE.Vector4).fromArray(e.vTexGenTypes):new THREE.Vector4}function h(e){PLMVisRL.logger.finer("CAEVisStruct Constructor"),this.vCAEVisContourParams=e.vCAEVisContourParams?e.vCAEVisContourParams.clone():new THREE.Vector4,this.vCAEVisVecParams=e.vCAEVisVecParams?e.vCAEVisVecParams.slice(0):new THREE.Vector4,this.vCAEVisDispParams=e.vCAEVisDispParams?e.vCAEVisDispParams.clone():new THREE.Vector4,this.vCAEVisOtherParams=e.vCAEVisOtherParams?e.vCAEVisOtherParams.clone():new THREE.Vector4,this.vCAEVisValueMap=e.vCAEVisValueMap?e.vCAEVisValueMap.slice(0):[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4]}function d(e){this.vCol=e.vCol?e.vCol.clone():new THREE.Vector4,this.iFrameNumber=e.iFrameNumber?e.iFrameNumber:0,this.iPixel=e.iPixel?e.iPixel:0,this.iFrameQuery=e.iFrameQuery?e.iFrameQuery:0,this.iComposite=e.iComposite?e.iComposite:0}function g(e){if(PLMVisRL.logger.finer("Entering DMShader Constructor"),null!=e&&void 0!==e.vertexShader&&null!==e.vertexShader&&0!==e.vertexShader.length&&void 0!==e.fragmentShader&&null!==e.fragmentShader&&0!==e.fragmentShader.length){THREE.RawShaderMaterial.call(this),this.needsUpdate=!0,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.side=e.side||THREE.DoubleSide,this.transparent=void 0!==e.transparent&&e.transparent,this.uniforms={};for(var t=e.activeUniforms,r=Object.keys(t),i=null,n=0,o=r.length;n<o;++n)void 0!==e[i=r[n]]&&(this.uniforms[i]={value:e[i]});PLMVisRL.logger.finer("Exiting DMShader Constructor")}else PLMVisRL.logger.warning("DMShader malformed. Returning Undefined")}s.prototype={constructor:s,clone:function(){return new s({mModelView:this.mModelView,mModelViewProj:this.mModelViewProj,mNormal:this.mNormal,vPADDING:this.vPADDING})}},l.prototype={constructor:l},u.prototype={constructor:u},c.prototype={constructor:c},f.prototype={constructor:f},h.prototype={constructor:h},d.prototype={constructor:d},g.prototype=Object.create(THREE.RawShaderMaterial.prototype),g.prototype.constructor=g,Object.defineProperties(g,{DMColor:{value:i},MatrixPackage:{value:s},LightEntry:{value:l},MaterialStruct:{value:u},CombiStruct:{value:c},TexEnvStruct:{value:f},CAEVisStruct:{value:h},DebugData:{value:d}});var m=g;function p(e){PLMVisRL.logger.info("FrameState Constructor"),this.parent=e,this.frameParamBufferEntity={amShadowFrustum:[],vFogParams:null,vFogColor:null,vGlobalAmbient:null,vExposure:null,vSize:null,vOIT:null},this.isMatrixTextureEnable=null,this.uniformXform=null,this.rootMatrix=null,this.isOrthoCamera=null,this.isShadowEnabled=null,this.shadowSoftness=null,this.fogMode=null,this.fogType=null,this.isMSAAEnabled=null,this.numMSAASample=null,this.AOMode=null,this.exposureFunc=null,this.loaded=!1}p.prototype={constructor:p,read:function(e){if(null!=e){for(var t=e.getEntity(),r=0;r<8;++r)this.frameParamBufferEntity.amShadowFrustum.push(t.getFloats());return this.frameParamBufferEntity.vFogParams=t.getFloats(),this.frameParamBufferEntity.vFogColor=t.getFloats(),this.frameParamBufferEntity.vGlobalAmbient=t.getFloats(),t.getFloats(),this.frameParamBufferEntity.vExposure=t.getFloats(),this.frameParamBufferEntity.vSize=t.getFloats(),this.frameParamBufferEntity.vOIT=t.getInts(),this.isMatrixTextureEnable=e.getBool(),this.uniformXform=e.getBool(),this.rootMatrix=e.getFloats(),this.isOrthoCamera=e.getBool(),this.isShadowEnabled=e.getBool(),this.shadowSoftness=e.getInt(),this.fogMode=e.getInt(),this.fogType=e.getInt(),this.isMSAAEnabled=e.getBool(),this.numMSAASample=e.getInt(),this.AOMode=e.getInt(),this.exposureFunc=e.getInt(),PLMVisRL.logger.finest("Read FrameState"),this.loaded=!0,this}}};var L=p,R={Points:0,Lines:1,LineLoop:2,LineStrip:3,Triangles:4,TriangleStrip:5,typeToString:function(e){switch(e){case PLMVisRL.GeomState.PrimitiveType.Points:return"Points";case PLMVisRL.GeomState.PrimitiveType.Lines:return"Lines";case PLMVisRL.GeomState.PrimitiveType.LineLoop:return"LineLoop";case PLMVisRL.GeomState.PrimitiveType.LineStrip:return"LineStrip";case PLMVisRL.GeomState.PrimitiveType.Triangles:return"Triangles";case PLMVisRL.GeomState.PrimitiveType.TriangleStrip:return"TriangleStrip";default:return"Unknown"}}};R=Object.freeze(R);var S={Vertex:0,Color:1,Normal:2,TexCoord0:3,TexCoord1:4,TexCoord2:5,TexCoord3:6,TexCoord4:7,TexCoord5:8,TexCoord6:9,TexCoord7:10,typeToString:function(e){switch(e){case PLMVisRL.GeomState.Semantics.Vertex:return"Vertex";case PLMVisRL.GeomState.Semantics.Color:return"Color";case PLMVisRL.GeomState.Semantics.Normal:return"Normal";case PLMVisRL.GeomState.Semantics.TexCoord0:return"TexCoord0";case PLMVisRL.GeomState.Semantics.TexCoord1:return"TexCoord1";case PLMVisRL.GeomState.Semantics.TexCoord2:return"TexCoord2";case PLMVisRL.GeomState.Semantics.TexCoord3:return"TexCoord3";case PLMVisRL.GeomState.Semantics.TexCoord4:return"TexCoord4";case PLMVisRL.GeomState.Semantics.TexCoord5:return"TexCoord5";case PLMVisRL.GeomState.Semantics.TexCoord6:return"TexCoord6";case PLMVisRL.GeomState.Semantics.TexCoord7:return"TexCoord7";default:return"Unknown"}}};function E(){PLMVisRL.logger.info("Entering GeomState Constructor"),this.id=null,this.primitiveTypeOrdinal=null,this.indexArray=null,this.primArray=null,this.vertexArray=null,this.normalArray=null,this.auxFields=null,this.bufferGeometry=null,this.loaded=!1,PLMVisRL.logger.info("Exiting GeomState Constructor")}S=Object.freeze(S),E.prototype={constructor:E,read:function(e){if(PLMVisRL.logger.info("Entering GeomState.read"),PLMVisRL.logger.finest("Reading GeomState with resourceId "+this.id.toString()),null!=e){this.primitiveTypeOrdinal=e.getInt(),this.indexArray=new Uint32Array(e.getInts()),this.primArray=new Uint32Array(e.getInts());var t=e.getFloats();this.vertexArray=new Float32Array(t.length+t.length/3);for(var r=this.vertexArray,i=0,n=t.length,o=0;i<n;++i,++o)i>0&&i%3==0&&(r[o]=1,o++),r[o]=t[i];r[r.length-1]=1;var a=e.getEntity(),s=a.getNumValues(),l=0;s%2==0&&(l=s/2);for(var u=null,c=0;c<l;c++)switch(u=a.getInt()){case PLMVisRL.GeomState.Semantics.Color:break;case PLMVisRL.GeomState.Semantics.Normal:this.normalArray=a.getFloats();break;case PLMVisRL.GeomState.Semantics.TexCoord0:case PLMVisRL.GeomState.Semantics.TexCoord1:case PLMVisRL.GeomState.Semantics.TexCoord2:case PLMVisRL.GeomState.Semantics.TexCoord3:case PLMVisRL.GeomState.Semantics.TexCoord4:case PLMVisRL.GeomState.Semantics.TexCoord5:case PLMVisRL.GeomState.Semantics.TexCoord6:case PLMVisRL.GeomState.Semantics.TexCoord7:this["texCoord"+(u-3).toString()]=a.getFloats()}var f=e.getInt();if(f>0){this.auxFields=[];var h=this.auxFields,d=null,g=null;for(c=0;c<f;++c){switch(d=e.getInt(),h.push({fieldString:e.getString(),dataType:d,numComponents:e.getInt(),records:null}),g=[],d){case 2:g=e.getFloats();break;case 9:var m=e.getInts();g=new Float32Array(m),h[h.length-1].dataType=2;break;default:PLMVisRL.logger.warning("AUX record - Unsupported type")}h[h.length-1].records=g}}return PLMVisRL.logger.info("Exiting GeomState.read"),this.loaded=!0,this}}},Object.defineProperties(E,{PrimitiveType:{value:R},Semantics:{value:S}});var v=E,y={NoLight:0,InfLight:1,PtLight:2,SpotLight:3,typeToString:function(e){switch(e){case PLMVisRL.LightState.LightType.NoLight:return"No Light";case PLMVisRL.LightState.LightType.InfLight:return"Infinite";case PLMVisRL.LightState.LightType.PtLight:return"Point";case PLMVisRL.LightState.LightType.SpotLight:return"Spot";default:return"Unknown ("+e.toString()+")"}}};y=Object.freeze(y);var M={NoCsys:0,VPCsys:1,MCsys:2,WCsys:3,VCsys:4,NDCsys:5,typeToString:function(e){switch(e){case PLMVisRL.LightState.LightCoordSys.NoCsys:return"NoCsys";case PLMVisRL.LightState.LightCoordSys.VPCsys:return"VPCsys";case PLMVisRL.LightState.LightCoordSys.MCsys:return"MCsys";case PLMVisRL.LightState.LightCoordSys.WCsys:return"WCsys";case PLMVisRL.LightState.LightCoordSys.VCsys:return"VCsys";case PLMVisRL.LightState.LightCoordSys.NDCsys:return"NDCsys";default:return"Unknown ("+e.toString()+")"}}};function T(){PLMVisRL.logger.info("Entering LightState Constructor"),this.id=null,this.lights=null,this.processedLights=null,this.loaded=!1,PLMVisRL.logger.info("Exiting LightState Constructor")}M=Object.freeze(M),T.prototype={constructor:T,read:function(e){if(PLMVisRL.logger.info("Entering LightState.read"),PLMVisRL.logger.finest("Reading LightState with resourceId "+this.id.toString()+"."),null!=e){var t,r,i,n=e.getEntities(),o=n.length;for(this.lights=[],t=0;t<o;++t)r=n[t],this.lights.push({diffuseColor4f:r.getFloats(),specularColor4f:r.getFloats(),ambientColor4f:r.getFloats(),lightPos4f:r.getFloats(),lightDir4f:r.getFloats(),vcsLightPos4f:r.getFloats(),vcsLightDir4f:r.getFloats(),attenCoeff4f:r.getFloats(),spotParams4f:r.getFloats(),shadParams4f:r.getFloats()}),PLMVisRL.logger.finest("Created "+(t+1).toString()+" light(s) out of "+o.toString());for(t=0;t<o;++t)(i=this.lights[t]).type=e.getInt(),i.coordinateSystem=e.getInt();return PLMVisRL.logger.info("Exiting LightState.read"),this.loaded=!0,this}}},Object.defineProperties(T,{LightCoordSys:{value:M},LightType:{value:y}});var P=T;function w(){return!0}function V(e){var t=!1,r=w;function i(e){e&&e.decider&&(r=e.decider),e&&e.enabled&&(this.enabled=e.enabled)}return i.prototype={constructor:i,checkAndSwapObject:function(e,i,n,o){var a=e.userData.renderItem.id;if(o.sceneObject=e,t&&r){var s=r(o);s||null!==i.items[a]?s&&null===n.items[a]&&(n.remove(e),delete n.items[a],i.add(e),i.items[a]=null):(i.remove(e),delete i.items[a],n.add(e),n.items[a]=null)}else null===n.items[a]&&(n.remove(e),delete n.items[a],i.add(e),i.items[a]=null)},setSwapDecider:function(e){r=e||w}},Object.defineProperties(i.prototype,{enabled:{get:function(){return t},set:function(e){t=e}},swapDecider:{get:function(){return r}}}),new i(e)}V.prototype={constructor:V};var x=V;function C(e,t){PLMVisRL.logger.info("Entering Pass Constructor"),this.parent=e,this.passNumber=t,this.passState=null,this.renderItems=null,this.frameState=null,this.isDepthOnly=!1,this.id=PLMVisRL.Utils.createUUID(),this.loaded=!1,PLMVisRL.logger.info("Exiting Pass Constructor")}C.prototype={constructor:C,read:function(e){if(PLMVisRL.logger.info("Entering Pass.read"),null!=e){var t=e.getEntity();this.passState=new PLMVisRL.PassState(this),this.passState.read(t);var r=e.getEntities();this.renderItems=[];for(var i=null,n=0;n<r.length;n++)(i=new PLMVisRL.RenderItem(this)).read(r[n]),this.renderItems.push(i),i=void 0;var o=e.getEntity();return this.frameState=new PLMVisRL.FrameState(this),this.frameState.read(o),this.loaded=!0,PLMVisRL.logger.info("Exiting Pass.read"),this}}};var b=C;function I(e){PLMVisRL.logger.info("PassState Constructor"),this.parent=e,this.bDepthEnable=null,this.bDepthMask=null,this.depthFunctionIndex=null,this.hwCullEnable=null,this.hwCullModeIndex=null,this.isSenseReverse=null,this.stencilEnable=null,this.stencilFunctionIndex=null,this.stencilReference=null,this.stencilFunctionMask=null,this.stencilMask=null,this.errorStencilOperationIndex=null,this.onZFailStencilOperationIndex=null,this.onZPassStencilOperationIndex=null,this.colorMaskR=null,this.colorMaskG=null,this.colorMaskB=null,this.colorMaskA=null,this.blendEnable=null,this.blendFunction=null,this.polygonOffsetFillEnable=null,this.polygonOffsetLineEnable=null,this.polygonOffsetSlope=null,this.polygonOffsetConstant=null,this.avClipPlanes=[],this.combi={vSpriteParams:null},this.loaded=!1}I.prototype={constructor:I,read:function(e){if(null!=e){this.bDepthEnable=e.getBool(),this.bDepthMask=e.getBool(),this.depthFunctionIndex=e.getInt(),this.hwCullEnable=e.getBool(),this.hwCullModeIndex=e.getInt(),this.isSenseReverse=e.getBool(),this.stencilEnable=e.getBool(),this.stencilFunctionIndex=e.getInt(),this.stencilReference=e.getInt(),this.stencilFunctionMask=e.getInt(),this.stencilMask=e.getInt(),this.errorStencilOperationIndex=e.getInt(),this.onZFailStencilOperationIndex=e.getInt(),this.onZPassStencilOperationIndex=e.getInt(),this.colorMaskR=e.getBool(),this.colorMaskG=e.getBool(),this.colorMaskB=e.getBool(),this.colorMaskA=e.getBool(),this.blendEnable=e.getBool();var t=e.getInts();if(16===t.length){this.blendFunction=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];for(var r=0;r<8;++r)this.blendFunction[0][r]=t[r],this.blendFunction[1][r]=t[r+8]}else this.blendFunction=void 0;this.polygonOffsetFillEnable=e.getBool(),this.polygonOffsetLineEnable=e.getBool(),this.polygonOffsetSlope=e.getFloat(),this.polygonOffsetConstant=e.getFloat(),this.nClipRegions=e.getInt();try{for(r=0;r<8;++r)this.avClipPlanes.push(e.getFloats());for(r=0;r<8;++r)e.getFloats()}catch(e){PLMVisRL.logger.warning(e.message)}return this.seeThruEnabled=e.getInt(),this.combi.vSpriteParams=e.getFloats(),this.vSeeThruColor=e.getFloats(),PLMVisRL.logger.finest("Read PassState"),this.loaded=!0,this}}};var A=I;function H(e){PLMVisRL.logger.info("RenderItem Constructor"),this.parent=e,this.id=null,this.loaded=!1,this.shaderSrcId=null,this.shapeStateId=null,this.lightStateId=null,this.xformStateId=null,this.geomStateId=null,this.shaderSrc=null,this.shapeState=null,this.lightState=null,this.xformState=null,this.geomState=null,this.sceneObject=null,this.sentToScene=!1}H.prototype={constructor:H,read:function(e){if(null!=e)return this.shaderSrcId=e.getInt(),this.shapeStateId=e.getInt(),this.lightStateId=e.getInt(),this.xformStateId=e.getInt(),this.geomStateId=e.getInt(),this.id=this.parent.parent.viewerId.toString()+this.parent.parent.type.toString()+this.parent.passNumber.toString()+this.shaderSrcId.toString()+this.shapeStateId.toString()+this.lightStateId.toString()+this.xformStateId.toString()+this.geomStateId.toString(),PLMVisRL.logger.finest("Read RenderItem with id "+this.id.toString()+"."),this}},Object.defineProperties(H.prototype,{renderListType:{get:function(){return this.parent.renderListType}},allResourcesLoaded:{get:function(){return null!==this.geomState&&this.geomState.loaded&&null!==this.shaderSrc&&this.shaderSrc.loaded&&null!==this.lightState&&this.lightState.loaded&&null!==this.xformState&&this.xformState.loaded&&null!==this.shapeState&&this.shapeState.loaded}}});var O=H,F={RLT_UNKNOWN:0,RLT_SCENEGRAPH:1,RLT_ANNOTATION2D:2,RLT_ANNOTATION3D:3,RLT_SECONDARY:4,typeToString:function(e){switch(e){case PLMVisRL.RenderList.RenderListType.RLT_SCENEGRAPH:return"RLT_SCENEGRAPH";case PLMVisRL.RenderList.RenderListType.RLT_ANNOTATION2D:return"RLT_ANNOTATION2D";case PLMVisRL.RenderList.RenderListType.RLT_ANNOTATION3D:return"RLT_ANNOTATION3D";case PLMVisRL.RenderList.RenderListType.RLT_SECONDARY:return"RLT_SECONDARY";case PLMVisRL.RenderList.RenderListType.RLT_UNKNOWN:return"RLT_UNKNOWN";default:return"Unknown"}}};function N(){PLMVisRL.logger.info("RenderList constructor"),this.type=null,this.passes=[],this.viewerId=null,this.boundingBox=null,this.redraw=null,this.id=PLMVisRL.Utils.createUUID(),this.loaded=!1}F=Object.freeze(F),N.prototype={constructor:N,read:function(e){if(null!=e){var t=e.getEntity();this.viewerId=t.getInt(),this.type=t.getInt(),this.type!==PLMVisRL.RenderList.RenderListType.RLT_ANNOTATION2D&&this.type!==PLMVisRL.RenderList.RenderListType.RLT_ANNOTATION3D||(this.type=PLMVisRL.RenderList.RenderListType.RLT_SECONDARY);var r=t.getEntity();this.boundingBox={min:r.getFloats(),max:r.getFloats()},this.redraw=t.getBool(),t.getFloats();var i=t.getEntity(),n=(new THREE.Vector3).fromArray(i.getFloats()),o=(new THREE.Vector3).fromArray(i.getFloats());this.selectedBbox=new THREE.Box3(n,o);var a=e.getEntity().getEntities();if(null!==a)for(var s=null,l=0,u=a.length;l<u;++l)(s=new PLMVisRL.Pass(this,l)).read(a[l]),this.passes.push(s),s=void 0;return PLMVisRL.logger.finest("Read RenderList with viewerId "+this.viewerId.toString()+"."),this.loaded=!0,this}}},Object.defineProperties(N,{RenderListType:{value:F}});var D=N,B=0;function G(e){if(PLMVisRL.logger.info("Entering RenderListInterface constructor"),void 0===THREE)throw new ReferenceError("THREE.js is required for triangle-slinging capability.");if(void 0===PLMVisRL.ResourceManager)throw new ReferenceError("RenderListInterface requires PLMVisRL.ResourceManager.");if(void 0===PLMVisRL.RenderList)throw new ReferenceError("RenderListInterface requires PLMVisRL.RenderList.");if(void 0===PLMVisRL.RenderItem)throw new ReferenceError("RenderListInterface requires PLMVisRL.RenderItem.");if(void 0===PLMVisRL.Pass)throw new ReferenceError("RenderListInterface requires PLMVisRL.Pass.");if(void 0===PLMVisRL.PassState)throw new ReferenceError("RenderListInterface requires PLMVisRL.PassState.");if(void 0===PLMVisRL.GeomState)throw new ReferenceError("RenderListInterface requires PLMVisRL.GeomState.");if(void 0===PLMVisRL.LightState)throw new ReferenceError("RenderListInterface requires PLMVisRL.LightState.");if(void 0===PLMVisRL.ShaderSrc)throw new ReferenceError("RenderListInterface requires PLMVisRL.ShaderSrc.");if(void 0===PLMVisRL.ShapeState)throw new ReferenceError("RenderListInterface requires PLMVisRL.ShapeState.");if(void 0===PLMVisRL.XformState)throw new ReferenceError("RenderListInterface requires PLMVisRL.XformState.");if(void 0===PLMVisRL.Triad)throw new ReferenceError("RenderListInterface requires PLMVisRL.Triad.");if(e&&e.resourceRequestCallback&&"function"!=typeof e.resourceRequestCallback)throw new ReferenceError("Invalid resourceRequestCallback function parameter.");e.antialias=void 0===e.antialias||e.antialias;var t=new PLMVisRL.ResourceManager(e);e.resourceRequestCallback&&t.resourceRequestCallback!==e.resourceRequestCallback&&(t.resourceRequestCallback=e.resourceRequestCallback);var r=null,i=null,n=null,o=null,a=null,s=null,l=null,u=0,c=0,f=null,h=new THREE.Matrix4,d=new THREE.Matrix4,g=new THREE.Matrix4,m=new THREE.Matrix4,p=new THREE.Raycaster,L=null,R=!1,S=.1,E=null,v=.2,y=[];function M(){if(null!==r)for(var e=r.passes,t=null,i=0,n=e.length;i<n;++i)if((4&(t=e[i]).passState.uRModeMask_low)>0)return t.movingScene.children;return null}function T(e){var t,r,i,n=e.passes;function o(e){e.parent=r,r.items[e.userData.renderItem.id]=null,delete i.items[e.userData.renderItem.id]}for(var a=0,s=n.length;a<s;++a)t=n[a],r=t.movingScene,(i=t.stillScene)&&i.children.length>0&&(i.children.forEach(o),r.children=r.children.concat(i.children),i.children.length=0)}function P(e){function t(e){e.dispose()}for(var r;e.children.length>0;)(r=e.children[0]).geometry&&r.geometry.dispose(),r.material&&(r.material instanceof THREE.MultiMaterial?(r.material.materials.forEach(t),delete r.material):r.material.dispose()),e.remove(r)}function w(e){PLMVisRL.logger.fine("Entering RenderListInterface - clearRendererHelper");for(var t=e.passes,r=null,i=0,n=t.length;i<n;++i)(r=t[i].movingScene)&&P(r),(r=t[i].stillScene)&&P(r);PLMVisRL.logger.fine("Exiting RenderListInterface - clearRendererHelper")}function V(){PLMVisRL.logger.fine("Entering RenderListInterface - clearAll"),PLMVisRL.logger.fine("Entering RenderListInterface - clearRenderer"),r&&w(r),i&&w(i),PLMVisRL.logger.fine("Exiting RenderListInterface - clearRenderer"),t.clearCache(),r=null,i=null,y=[],PLMVisRL.logger.fine("Exiting RenderListInterface - clearAll")}function x(e){PLMVisRL.logger.fine("Entering RenderListInterface - applySceneObjectsHelper");for(var t,r=null,i=null,n=null,o=0,a=(t=e.passes).length;o<a;++o)if((r=t[o]).movingScene)for(var s=0,l=(i=r.renderItems).length;s<l;++s)null!==(n=i[s]).sceneObject&&void 0===r.movingScene.items[n.id]&&(r.movingScene.add(n.sceneObject),r.movingScene.items[n.id]=null);PLMVisRL.logger.fine("Exiting RenderListInterface - applySceneObjectsHelper")}function C(){PLMVisRL.logger.fine("Entering RenderListInterface - applySceneObjects"),r&&x(r),i&&x(i),PLMVisRL.logger.fine("Exiting RenderListInterface - applySceneObjects")}function b(e,t){PLMVisRL.logger.fine("Entering RenderListInterface - prepareSceneObjectsHelper"),null===e&&(PLMVisRL.logger.fine("Exiting RenderListInterface - prepareSceneObjectsHelper"),t());var r=e.passes,i=null,n=null,o=null,a=null,l=null,u=null,c=null,f=null,h=function(e){for(var t=0,r=null,i=0,n=e.length;i<n;++i)(r=e[i]).movingScene&&(t+=r.renderItems.length);return t}(r),d=0;function g(){++d===h&&(PLMVisRL.logger.fine("Exiting RenderListInterface - prepareSceneObjectsHelper"),t())}function m(e,t){return function(r){f=e.geomState.bufferGeometry,r.depthTest=t.bDepthEnable,e.geomState.bufferGeometry.groups.length>0&&(r=new THREE.MultiMaterial([r]));var n=null;switch(e.geomState.primitiveTypeOrdinal){case PLMVisRL.GeomState.PrimitiveType.Points:n=new THREE.Points(f,r);break;case PLMVisRL.GeomState.PrimitiveType.Lines:case PLMVisRL.GeomState.PrimitiveType.LineLoop:case PLMVisRL.GeomState.PrimitiveType.LineStrip:n=new THREE.Line(f,r);break;case PLMVisRL.GeomState.PrimitiveType.Triangles:n=new THREE.Mesh(f,r);break;case PLMVisRL.GeomState.PrimitiveType.TriangleStrip:(n=new THREE.Mesh(f,r)).drawMode=THREE.TriangleStripDrawMode}n.userData.camMode=s.type,n.matrixAutoUpdate=!1,n.matrix.copy(e.xformState.matrix4),n.updateMatrixWorld(!0),n.userData.avClipPlanes=t.avClipPlanes.reduce(function(e,t){return e.push((new THREE.Vector4).fromArray(t)),e},[]),e.sceneObject=n,n.userData.renderItem=e,e.shapeState.nTex>0&&(i.movingScene.add(e.sceneObject),i.movingScene.items[e.id]=null),l.loaded=!0,g()}}for(var p=0,L=r.length;p<L;++p)if((i=r[p]).movingScene){n=i.passState,o=i.frameState;for(var R=0,S=(a=i.renderItems).length;R<S;++R)(l=a[R]).allResourcesLoaded&&!l.loaded?(u=l.geomState,l.shaderSrc,l.shapeState,l.lightState,null===(c=l.xformState).matrix4&&(c.matrix4=(new THREE.Matrix4).fromArray(c.xformMatrix)),null===u.bufferGeometry&&I(u),A(l,n,o,m(l,n))):g()}}function I(e){PLMVisRL.logger.fine("Entering RenderListInterface - createGeometry");var t=new THREE.BufferGeometry;if(e.vertexArray&&e.vertexArray.length>0){t.addAttribute("i_vMCSVtxCoords",new THREE.BufferAttribute(e.vertexArray,4));for(var r=[],i=0,n=e.vertexArray.length/4;i<n;++i)r.push(0,0,0,0);t.addAttribute("i_iPkgNum",new THREE.BufferAttribute(new Float32Array(r),4)),t.computeBoundingSphere()}if(e.normalArray&&e.normalArray.length>0&&t.addAttribute("i_vMCSVtxNorms",new THREE.BufferAttribute(e.normalArray,3)),e.indexArray&&e.indexArray.length>0&&t.setIndex(new THREE.BufferAttribute(e.indexArray,1)),e.texCoord0&&e.texCoord0.length>0&&t.addAttribute("i_vMultiTexCoord0",new THREE.BufferAttribute(e.texCoord0,2)),e.auxFields&&e.auxFields.length>0)for(var o,a=e.auxFields,s=0,l=a.length;s<l;++s)null!==(o=a[s]).records&&t.addAttribute(o.fieldString,new THREE.BufferAttribute(o.records,o.numComponents));if(e.primArray.length>0){var u=e.primArray;t.clearGroups();for(i=0,n=u.length;i<n;++i)i+1<u.length?t.addGroup(u[i],u[i+1]-u[i],0):t.addGroup(u[i],t.index.array.length-u[i],0)}t.primitiveTypeOrdinal=e.primitiveTypeOrdinal,e.bufferGeometry=t,PLMVisRL.logger.fine("Exiting RenderListInterface - createGeometry")}function A(e,t,r,i){function n(r){var n=new PLMVisRL.DMShader(r);n.originalLights=e.lightState.processedLights,n.colorWrite=t.colorMaskR&&t.colorMaskG&&t.colorMaskB&&t.colorMaskA;var o=e.geomState;o.primitiveTypeOrdinal===PLMVisRL.GeomState.PrimitiveType.Lines||o.primitiveTypeOrdinal===PLMVisRL.GeomState.PrimitiveType.LineLoop||o.primitiveTypeOrdinal===PLMVisRL.GeomState.PrimitiveType.LineStrip?n.polygonOffset=t.polygonOffsetLineEnable:o.primitiveTypeOrdinal!==PLMVisRL.GeomState.PrimitiveType.Triangles&&o.primitiveTypeOrdinal!==PLMVisRL.GeomState.PrimitiveType.TriangleStrip||(n.polygonOffset=t.polygonOffsetFillEnable),n.polygonOffset&&(n.polygonOffsetFactor=t.polygonOffsetSlope,n.polygonOffsetUnits=t.polygonOffsetConstant),(n.uniforms.TexEnv||t.seeThruEnabled>0&&n.uniforms.vSeeThruColor&&n.uniforms.vSeeThruColor.value.a<1||n.uniforms.Mtl.value.vDiffuse.a<1)&&(n.transparent=!0),t.seeThruEnabled>0&&n.uniforms.vSeeThruColor&&n.uniforms.vSeeThruColor.value.a<1&&(r.vGlobalAmbient.r=0,r.vGlobalAmbient.g=0,r.vGlobalAmbient.b=0),n.needsUpdate=!0,PLMVisRL.logger.fine("Exiting RenderListInterface - createMaterial"),i(n)}PLMVisRL.logger.fine("Entering RenderListInterface - createMaterial");var o=new THREE.Matrix4,a=new THREE.Matrix3,s=new THREE.Matrix4,l=(new THREE.Matrix4).copy(e.xformState.matrix4);o.multiplyMatrices(h,l),a.getNormalMatrix(o),s.multiplyMatrices(m,o),e.shapeState.mtl instanceof PLMVisRL.DMShader.MaterialStruct||(e.shapeState.mtl=new PLMVisRL.DMShader.MaterialStruct(e.shapeState.mtl)),null===e.lightState.processedLights&&function(e){PLMVisRL.logger.fine("Entering RenderListInterface - createLights");for(var t=e.lights,r=[],i=0,n=t.length,o=null;i<n;++i)o=t[i],r.push(new PLMVisRL.DMShader.LightEntry(o,h));for(var a=[],s=0,l=t.length;s<l;++s)o=t[s],a.push(o.coordinateSystem);e.processedLights={lightArray:r.length>0?r:void 0,coordinateSystems:a.length>0?a:void 0},PLMVisRL.logger.fine("Exiting RenderListInterface - createLights")}(e.lightState),r.rootMatrix instanceof Float32Array&&function(e){for(var t=0;t<8;++t)e.frameParamBufferEntity.amShadowFrustum[t]=(new THREE.Matrix4).fromArray(e.frameParamBufferEntity.amShadowFrustum[t]);e.frameParamBufferEntity.vFogParams=(new THREE.Vector4).fromArray(e.frameParamBufferEntity.vFogParams),e.frameParamBufferEntity.vFogColor=(new PLMVisRL.DMShader.DMColor).fromArray(e.frameParamBufferEntity.vFogColor),e.frameParamBufferEntity.vGlobalAmbient=(new PLMVisRL.DMShader.DMColor).fromArray(e.frameParamBufferEntity.vGlobalAmbient),e.frameParamBufferEntity.vExposure=(new THREE.Vector4).fromArray(e.frameParamBufferEntity.vExposure),e.frameParamBufferEntity.vSize=(new THREE.Vector4).fromArray(e.frameParamBufferEntity.vSize),e.frameParamBufferEntity.vOIT=(new THREE.Vector4).fromArray(e.frameParamBufferEntity.vOIT),e.rootMatrix=(new THREE.Matrix4).fromArray(e.rootMatrix)}(r);var u=new PLMVisRL.DMShader.MatrixPackage({mModelView:o,mModelViewProj:s,mNormal:a});(function(e,t,r,i){var n=""+Math.max(1,t),o=""+Math.max(2,i),a=""+Math.max(1,r);e.vertexShader=e.vertexShader.replace("MAX(1,SF_nClipRgns)",n),e.fragmentShader=e.fragmentShader.replace("MAX(1,SF_nClipRgns)",n),e.vertexShader=e.vertexShader.replace("MAX(2,SF_nTexMaps)",o),e.fragmentShader=e.fragmentShader.replace("MAX(2,SF_nTexMaps)",o),e.vertexShader=e.vertexShader.replace("MAX(1,SF_nLights)",a),e.fragmentShader=e.fragmentShader.replace("MAX(1,SF_nLights)",a)}).call(this,e.shaderSrc,t.nClipRegions,e.lightState.lights.length,e.shapeState.nTex);for(var c=[],f=[],g=0;g<8;++g)c.push((new THREE.Vector4).fromArray(t.avClipPlanes[g])),f.push(c[g].clone().applyMatrix4(d));var p,L={MtxPkg:[u,u],mView:h,mViewInv:d,mProj:m,Lights:e.lightState.processedLights.lightArray,Mtl:t.seeThruEnabled>0?e.shapeState.mtl_seeThruLocal:e.shapeState.mtl,vertexShader:e.shaderSrc.vertexShader,fragmentShader:e.shaderSrc.fragmentShader,activeUniforms:e.shaderSrc.activeUniforms,transparent:!1,avVCSClipPlanes:f,vGlobalAmbient:r.frameParamBufferEntity.vGlobalAmbient,vSeeThruColor:(new PLMVisRL.DMShader.DMColor).fromArray(t.vSeeThruColor),vExposure:r.frameParamBufferEntity.vExposure,vSize:r.frameParamBufferEntity.vSize,vOIT:r.frameParamBufferEntity.vOIT};(0!==r.fogMode&&0!==e.shapeState.fogMode||(L.vFogParams=r.frameParamBufferEntity.vFogParams,L.vFogColor=r.frameParamBufferEntity.vFogColor),e.shapeState.combi instanceof PLMVisRL.DMShader.CombiStruct||(e.shapeState.combi=new PLMVisRL.DMShader.CombiStruct(e.shapeState.combi)),L.ShapeCombi=e.shapeState.combi,t.combi instanceof PLMVisRL.DMShader.CombiStruct||(t.combi=new PLMVisRL.DMShader.CombiStruct(t.combi)),L.PassCombi=t.combi,e.shapeState.nTex>0)?(!function(e){for(var t=0,r=e.length;t<r;++t)e[t]instanceof PLMVisRL.DMShader.TexEnvStruct||(e[t]=new PLMVisRL.DMShader.TexEnvStruct(e[t]))}(e.shapeState.TexEnv),1===e.shapeState.TexEnv.length&&e.shapeState.TexEnv.push(e.shapeState.TexEnv[0]),L.TexEnv=e.shapeState.TexEnv,(new THREE.TextureLoader).load(e.shapeState.textures[0].mipMaps[0].apDMImageData,(e.shapeStateId,p=L,function(e){!function(e,t,r){L.sTex0=e,n(r)}(e,0,p)}))):n(L)}function H(e,t){PLMVisRL.logger.fine("Entering RenderListInterface - updateMatrices");var r=new THREE.Matrix4,i=new THREE.Matrix3,n=new THREE.Matrix4,a=null,l=null,f=0,d=0,p=null,L=null,y={sceneObject:null,screenHeight:c,minObjectScreenHeight:S*c,cameraPosition:s.position,cameraFov:o.fov},M=e.children,T=null;for(f=0,d=M.length;f<d;++f)if((T=M[f]).geometry){if(r.multiplyMatrices(h,T.matrixWorld),i.getNormalMatrix(r),n.multiplyMatrices(m,r),i[6]=0,i[7]=0,i[8]=0,(l=(a=T.material.uniforms||T.material.materials[0].uniforms).MtxPkg.value[0]).mModelView.copy(r),l.mModelViewProj.copy(n),l.mNormal.copy(i),!a.vSize||a.vSize.value.x===u&&a.vSize.value.y===c||(a.vSize.value.x=u,a.vSize.value.y=c),a.avVCSClipPlanes){L=a.avVCSClipPlanes.value,p=T.userData.avClipPlanes;for(var P=0;P<8;++P)L[P].copy(p[P]).applyMatrix4(g)}T.userData.camMode!==s.type&&(T.userData.camMode=s.type),T.material.needsUpdate=!0,R&&(y.sceneObject=T,y.minObjectScreenHeight=S*c,T.visible=PLMVisRL.ScreenSizeCulling.shouldNotCull(y)),E&&(y.minObjectScreenHeight=v*c,E.checkAndSwapObject(T,t.movingScene,t.stillScene,y)),d!==M.length&&(--f,d=M.length)}PLMVisRL.logger.fine("Exiting RenderListInterface - updateMatrices")}function O(e,t,r){PLMVisRL.logger.fine("Entering RenderListInterface - render");for(var i,o=null,a=0,l=(i=e.passes).length;a<l;++a)(o=i[a]).movingScene&&(H.call(this,o.movingScene,o),H.call(this,o.stillScene,o),n.render(o.movingScene,s,t),r||n.render(o.stillScene,s,t));PLMVisRL.logger.fine("Exiting RenderListInterface - render")}function F(e){if(PLMVisRL.logger.info("Entering RenderListInterface constructor"),l=[0,0,0],void 0===t.resourceRequestCallback&&e.resourceRequestCallback&&(t.resourceRequestCallback=e.resourceRequestCallback),B++,n=new THREE.WebGLRenderer(e),L=n.getContext(),e&&null!=e.bgColor){var r=new THREE.Color(e.bgColor.r,e.bgColor.g,e.bgColor.b).getHex();n.setClearColor(r,e.bgColor.a)}n.setSize(1,1),n.autoClear=!1,(o=new THREE.PerspectiveCamera(35,1,1,1e4)).matrixAutoUpdate=!1,(a=new THREE.OrthographicCamera(-1,1,1,-1,1,1e4)).matrixAutoUpdate=!1,s=o,void 0!==e.width&&void 0!==e.height&&(n.setSize(e.width,e.height),c=e.height,u=e.width),e&&void 0!==e.enableScreenSizeCulling&&(R=e.enableScreenSizeCulling),(f=new PLMVisRL.Triad).createWCS(),PLMVisRL.logger.info("Exiting RenderListInterface constructor")}function N(e,t){if(e.sceneObject){var r=e.sceneObject,i=t.avClipPlanes,n=e.geomState,o=r.material.materials?r.material.materials[0]:r.material;r&&(r.userData.avClipPlanes.forEach(function(e,t){e.fromArray(i[t])}),o.depthTest=t.bDepthEnable,o.colorWrite=t.colorMaskR&&t.colorMaskG&&t.colorMaskB&&t.colorMaskA,n.primitiveTypeOrdinal===PLMVisRL.GeomState.PrimitiveType.Lines||n.primitiveTypeOrdinal===PLMVisRL.GeomState.PrimitiveType.LineLoop||n.primitiveTypeOrdinal===PLMVisRL.GeomState.PrimitiveType.LineStrip?o.polygonOffset=t.polygonOffsetLineEnable:n.primitiveTypeOrdinal!==PLMVisRL.GeomState.PrimitiveType.Triangles&&n.primitiveTypeOrdinal!==PLMVisRL.GeomState.PrimitiveType.TriangleStrip||(o.polygonOffset=t.polygonOffsetFillEnable),o.polygonOffset&&(o.polygonOffsetFactor=t.polygonOffsetSlope,o.polygonOffsetUnits=t.polygonOffsetConstant),o.uniforms.TexEnv&&(o.transparent=!0),o.needsUpdate=!0)}}function D(e,r,i,n){if(!t.resourceExists(e)){var o=new r;o.id=e,t.addResource(o),n&&n.push(e)}}F.prototype=Object.create(PLMVisRL.RenderListInterface.prototype),F.prototype.constructor=F,Object.defineProperties(F.prototype,{camera:{set:function(e){l[0]=e.camLookAt[0],l[1]=e.camLookAt[1],l[2]=e.camLookAt[2],e.camera instanceof THREE.PerspectiveCamera?(o.copy(e.camera),s=o):e.camera instanceof THREE.OrthographicCamera&&(a.copy(e.camera),s=a),s.updateMatrix(),s.updateMatrixWorld(!0),s.matrixWorldInverse.getInverse(s.matrixWorld),s.updateProjectionMatrix()},get:function(){return s}},height:{get:function(){return c}},width:{get:function(){return u}},selectedBBox:{get:function(){return r.selectedBbox}},screenSizeCullingEnabled:{get:function(){return R},set:function(e){R=e}},screenSizeCullingObjectHeightPercent:{get:function(){return S},set:function(e){e>=0&&e<=1&&(S=e)}},movingFrameCullingEnabled:{get:function(){return!!E&&E.enabled},set:function(e){e?null===E&&(E=new PLMVisRL.MovingFrameCulling):(r&&T(r),i&&T(i)),E&&(E.enabled=e)}},movingFrameCullingUseSizeCulling:{get:function(){return null!==E&&E.swapDecider===PLMVisRL.ScreenSizeCulling.shouldNotCull},set:function(e){e&&E&&E.swapDecider!==PLMVisRL.ScreenSizeCulling.shouldNotCull&&E.setSwapDecider(PLMVisRL.ScreenSizeCulling.shouldNotCull),!e&&E&&E.swapDecider===PLMVisRL.ScreenSizeCulling.shouldNotCull&&E.setSwapDecider()}},movingFrameCullingObjectHeightPercent:{get:function(){return v},set:function(e){e>=0&&e<=1&&(v=e)}}}),F.prototype.dispose=function(){PLMVisRL.logger.info("Entering RenderListInterface.dispose"),V(),B--,PLMVisRL.logger.info("Exiting RenderListInterface.dispose")},F.prototype.setResourceRequestCallback=function(e){if(!e||"function"!=typeof e)throw new ReferenceError("Invalid resourceRequestCallback function parameter.");t.resourceRequestCallback=e},F.prototype.setResources=function(e,n){PLMVisRL.logger.info("Entering RenderListInterface.setResources"),e=e.concat(y),y.length=0;for(var o=null,a=null,s=0,l=e.length;s<l;++s)o=e[s],void 0!==(a=t.getResource(o.resourceID))?a.read(o.data):y.push(o);!function(e){PLMVisRL.logger.fine("Entering RenderListInterface - prepareSceneObjects");var t=(r?1:0)+(i?1:0),n=0;function o(){++n===t&&(PLMVisRL.logger.fine("Exiting RenderListInterface - prepareSceneObjects"),e())}0===t?(PLMVisRL.logger.fine("Exiting RenderListInterface - prepareSceneObjects"),e()):(r&&b(r,o),i&&b(i,o))}(function(){C(),n()}),PLMVisRL.logger.info("Exiting RenderListInterface.setResources")},F.prototype.setRenderList=function(e){PLMVisRL.logger.info("Entering RenderListInterface.setRenderList");var n=null;if(null===e)PLMVisRL.logger.finer("Received a null render list"),V();else if(e){if(PLMVisRL.logger.finer("Received a non-null render list"),0===(n=(new PLMVisRL.RenderList).read(e)).passes.length)switch(n.type){case PLMVisRL.RenderList.RenderListType.RLT_SCENEGRAPH:r=null;break;case PLMVisRL.RenderList.RenderListType.RLT_SECONDARY:i=null}else{switch(n.type){case PLMVisRL.RenderList.RenderListType.RLT_SCENEGRAPH:r=n;break;case PLMVisRL.RenderList.RenderListType.RLT_SECONDARY:i=n}for(var o=n.passes,a=null,s=null,l=null,u=[],c=0,f=o.length;c<f;++c){s=(a=o[c]).renderItems,a.movingScene=new THREE.Scene,a.movingScene.items={},a.stillScene=new THREE.Scene,a.stillScene.items={};for(var h=0,d=s.length;h<d;++h)l=s[h],t.resourceExists(l.id)?(N(l=t.getResource(l.id),a.passState),a.renderItems[h]=l):(t.addResource(l),D(l.shaderSrcId,PLMVisRL.ShaderSrc,0,u),D(l.geomStateId,PLMVisRL.GeomState,0,u),D(l.shapeStateId,PLMVisRL.ShapeState),D(l.lightStateId,PLMVisRL.LightState),D(l.xformStateId,PLMVisRL.XformState)),null===l.shaderSrc&&(l.shaderSrc=t.getResource(l.shaderSrcId)),null===l.shapeState&&(l.shapeState=t.getResource(l.shapeStateId)),null===l.lightState&&(l.lightState=t.getResource(l.lightStateId)),null===l.xformState&&(l.xformState=t.getResource(l.xformStateId)),null===l.geomState&&(l.geomState=t.getResource(l.geomStateId))}u.length>0?(y.forEach(function(e){var t=u.indexOf(e.resourceID);-1!==t&&u.splice(t,1)}),t.requestResources(u)):C()}n=null}PLMVisRL.logger.info("Exiting RenderListInterface.setRenderList")},F.prototype.render=function(e,t){t=void 0!==t&&t,PLMVisRL.logger.info("Entering RenderListInterface.render"),n&&(h.copy(s.matrixWorldInverse),m.copy(s.projectionMatrix),d.getInverse(h),g.copy(d).transpose(),e?n.clearTarget(e,!0,!0,!0):(n.clear(),n.setViewport(0,0,n.domElement.width,n.domElement.height)),r&&O.call(this,r,e,t),i&&O.call(this,i,e,t),f.renderWCS(n,s,l,e)),PLMVisRL.logger.info("Exiting RenderListInterface.render")},F.prototype.drawTrihedron=function(e){null!=e&&e!==f.enabled&&(f.enabled=e)},F.prototype.isTrihedronEnabled=function(){return f.enabled},F.prototype.getSize=function(){return n.getSize()},F.prototype.setSize=function(e){if(PLMVisRL.logger.info("Entering RenderListInterface.setSize"),n){var t=void 0,r=void 0;e&&(null!=e.width&&(t=e.width),null!=e.height&&(r=e.height));var i={width:1,height:1};void 0!==t&&void 0!==r||(i=getComputedStyle(n.domElement,null));var o=t||parseInt(i.width),a=r||parseInt(i.height);u===o&&c===a||(u=o,c=a,n.setSize(u,c))}PLMVisRL.logger.info("Exiting RenderListInterface.setSize")},F.prototype.handleResize=F.prototype.setSize,F.prototype.pick=function(e,t){p.ray.origin.fromArray(e),p.ray.direction.fromArray(t),p.ray.direction.normalize();var r=p.intersectObjects(M(),!0);return r.length>0?r[0].distance:NaN};var G=new THREE.Vector2;F.prototype.rayCastForSeek=function(e,t){G.x=e/n.domElement.width*2-1,G.y=-t/n.domElement.height*2+1,p.setFromCamera(G,s);var r=p.intersectObjects(M(),!0);if(r.length>0)return r[0].point};var k=new THREE.WebGLRenderTarget(1,1,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter});return F.prototype.captureImage=function(e,t){var r=null,i=n.getSize(),o=i.width,a=i.height;e&&(null!=e.width&&null!=e.height?(o=e.width,a=e.height):null!=e.scale&&(o*=scale,a*=scale)),k.setSize(o,a),n.setSize(o,a),u=o,c=a;var s=f.enabled;f.enabled=!1,this.render(k),f.enabled=s,n.setSize(i.width,i.height),u=i.width,c=i.height;var l=new Uint8Array(o*a*4);L&&(L.readPixels(0,0,o,a,L.RGBA,L.UNSIGNED_BYTE,l),this.render(),r=l),t(r)},F.prototype.setMovingFrameCullingDecider=function(e){e=e||null,E&&(E.useSizeCulling&&(E.useSizeCulling=!1),E.setSwapDecider(e))},PLMVisRL.logger.info("Exiting RenderListInterface constructor"),new F(e)}G.prototype={constructor:G},Object.defineProperties(G,{interfaceCount:{enumerable:!1,get:function(){return B}}});var k=G;function j(e){var t=void 0,r={};function i(e){(e=e||{}).resourceRequestCallback&&"function"==typeof e.resourceRequestCallback&&(t=e.resourceRequestCallback)}return i.prototype={constructor:i,requestResources:function(e){t&&e&&e.length>0&&t(e)},resourceExists:function(e){return void 0!==r[e]},getResource:function(e){return r[e]},addResource:function(e){if(void 0!==e.id&&null!==e.id&&!this.resourceExists(e.id))return r[e.id]=e,e.id},addResources:function(e,t){var r=null;null==t&&(t=[]);for(var i=0,n=e.length;i<n;++i)(r=this.addResource(e[i]))&&t.push(r);return t},removeResource:function(e){this.resourceExists(e)&&(r[e].dispose&&r[e].dispose(),delete r[e])},removeResources:function(e){for(var t=0,r=e.length;t<r;++t)this.removeResource(e[t])},clearCache:function(){this.removeResources(Object.keys(r))}},Object.defineProperties(i.prototype,{resourceRequestCallback:{get:function(){return t},set:function(e){e&&"function"==typeof e&&(t=e)}}}),new i(e)}j.prototype={constructor:j};var _=j,z=new THREE.Sphere,U=Math.PI/180;function q(e,t,r,i){return z.copy(e.geometry.boundingSphere),z.applyMatrix4(e.matrixWorld),2*z.radius/(2*Math.tan(i*U/2)*r.distanceTo(z.center))*t}function W(e){return q(e.sceneObject,e.screenHeight,e.cameraPosition,e.cameraFov)<e.minObjectScreenHeight}var X={shouldCull:W,shouldNotCull:function(e){return!W(e)},computeObjectScreenHeight:q};function Y(){PLMVisRL.logger.info("ShaderSrc Constructor"),this.id=null,this.fragmentShader=null,this.vertexShader=null,this.activeUniforms={},this.loaded=!1}Y.prototype={constructor:Y,prettyPrintShader:function(e){return e.replace(/\\n/g,"\n"),e.replace(/\\[/]/g,"/"),e},read:function(e){if(null!=e){var t=e.getString(),r=e.getString();t=t.replace(/[\\\"\'@$]/g," "),r=r.replace(/[\\\"\'@$]/g," ");for(var i=/uniform(?:\s+)(?:\w+)(?:\s+)(\w+)/g,n=null,o=null,a=this.activeUniforms;null!==(n=i.exec(t));)o=n[1],t.indexOf(o,n.index+n[0].length+1)>-1&&(a[o]=null);for(;null!==(n=i.exec(r));)o=n[1],r.indexOf(o,n.index+n[0].length+1)>-1&&(a[o]=null);return this.vertexShader=t,this.fragmentShader=r,PLMVisRL.logger.finest("Read ShaderSrc with resource ID "+this.id.toString()),this.loaded=!0,this}}};var Q=Y;function Z(){PLMVisRL.logger.info("ShapeState Constructor"),this.id=null,this.mtl=null,this.nTex=0,this.combi={vSpriteParams:null},this.TexEnv=[],this.textures=[],this.fogMode=null,this.pointSize=null,this.loaded=!1,this.mtl_seeThruLocal=null}Z.prototype={constructor:Z,read:function(e){if(null!=e){var t=e.getEntity();null!==t&&(this.mtl={diffuse4f:t.getFloats(),specular4f:t.getFloats(),emissive4f:t.getFloats(),ambient4f:t.getFloats(),parameters4f:t.getFloats()},this.mtl_seeThruLocal=new PLMVisRL.DMShader.MaterialStruct(this.mtl),this.mtl_seeThruLocal.vEmissive.r=0,this.mtl_seeThruLocal.vEmissive.g=0,this.mtl_seeThruLocal.vEmissive.b=0,this.mtl_seeThruLocal.vSpecular.r=0,this.mtl_seeThruLocal.vSpecular.g=0,this.mtl_seeThruLocal.vSpecular.b=0),this.combi.vSpriteParams=e.getFloats(),this.combi.linePattern=e.getInt(),this.nTex=e.getInt();for(var r=null,i=null,n=0,o=this.nTex;n<o;++n){this.TexEnv.push({mTexMatrix:e.getFloats(),avTexGenParams:[e.getFloats(),e.getFloats(),e.getFloats(),e.getFloats()],vBlendColor:e.getFloats(),vBorderColor:e.getFloats(),vfImgResolution:e.getFloats(),vfAtlasMetrics:e.getFloats(),vTexParams:e.getFloats(),vTexGenTypes:e.getFloats()}),this.textures.push({aTIConfig:{iTexType:e.getInt(),iSSTCSlot:e.getInt(),iMagFilterMode:e.getInt(),iMinFilterMode:e.getInt(),iWrapModeS:e.getInt(),iWrapModeT:e.getInt(),iWrapModeR:e.getInt(),iBorderMode:e.getInt(),iDepthCmpMode:e.getInt(),iDepthCmpFunc:e.getInt(),iDepthCmpType:e.getInt(),vBorderColor:e.getFloats()}}),(r=this.textures[n]).aiTexBlendTypes=e.getInt(),r.aiTexBorderMode=e.getInt(),r.aTIConfig.ahImages=[{ePxlFmt:e.getInt(),ePxlDataType:e.getInt(),nImgDims:e.getInt(),cRowAlign:e.getInt(),cWidth:e.getInt(),cHeight:e.getInt(),cDepth:e.getInt(),cBorder:e.getInt()}],r.nMipMaps=e.getInt(),r.mipMaps=[],i=r.mipMaps;for(var a=0,s=r.nMipMaps;a<s;++a)i.push({apDMImageData:"data:image/png;base64,"+e.getString()})}return this.fogMode=e.getInt(),PLMVisRL.logger.finest("Read ShapeState with resourceId "+this.id.toString()+"."),this.loaded=!0,this}}};var K=Z;r(0);function $(){PLMVisRL.logger.info("Triad Constructor"),this.scene=null,this.size=100,this.position=[0,0],this.wcsCamera=null,this.wcs=null,this.wcsTextNodes=[],this.enabled=!0}$.prototype={constructor:$,createWCS:function(){this.scene=new THREE.Scene,this.wcs=new THREE.Object3D,this.wcsCamera=new THREE.OrthographicCamera(-25,25,25,-25,1,50),this.wcsCamera.lookAt(new THREE.Vector3(0,0,0)),this.wcsCamera.position.set(0,0,25);var e=new THREE.LineBasicMaterial({color:16711680}),t=new THREE.LineBasicMaterial({color:65280}),r=new THREE.LineBasicMaterial({color:255}),i=new THREE.CylinderBufferGeometry(.5,.5,20),n=new THREE.MeshBasicMaterial({color:16711680}),o=new THREE.Mesh(i,n);o.position.set(10,0,0),o.rotation.set(0,0,Math.PI/2),this.wcs.add(o),i=new THREE.CylinderBufferGeometry(.5,.5,20),n=new THREE.MeshBasicMaterial({color:65280}),(o=new THREE.Mesh(i,n)).position.set(0,10,0),this.wcs.add(o),i=new THREE.CylinderBufferGeometry(.5,.5,20),n=new THREE.MeshBasicMaterial({color:255}),(o=new THREE.Mesh(i,n)).position.set(0,0,10),o.rotation.set(Math.PI/2,0,0),this.wcs.add(o);var a=[1,4,0,2,4,0,3,4,0,4,4,0,1,1,0,2,1,0,3,1,0,4,1,0,1.5,1,0,3.5,4,0,1.5,4,0,3.5,1,0],s=[0,1,2,3,4,5,6,7,8,9,10,11];(i=new THREE.BufferGeometry).setIndex(new THREE.BufferAttribute(new Uint16Array(s),1)),i.addAttribute("position",new THREE.BufferAttribute(new Float32Array(a),3)),a.length=0,s.length=0;var l=new THREE.LineSegments(i,e);l.up=this.wcsCamera.up,this.wcs.add(l),l.position.set(20,0,0),this.wcsTextNodes.push(l),a=[1,4,0,2,4,0,3,4,0,4,4,0,2,1,0,3,1,0,2.5,1,0,2.5,2.5,0,1.5,4,0,2.5,2.5,0,3.5,4,0],s=[0,1,2,3,4,5,6,7,8,9,9,10],(i=new THREE.BufferGeometry).setIndex(new THREE.BufferAttribute(new Uint16Array(s),1)),i.addAttribute("position",new THREE.BufferAttribute(new Float32Array(a),3)),a.length=0,s.length=0,(l=new THREE.LineSegments(i,t)).up=this.wcsCamera.up,this.wcs.add(l),l.position.set(0,20,0),this.wcsTextNodes.push(l),a=[1,3.5,0,1,4,0,4,4,0,1,1,0,4,1,0,4,1.5,0],s=[0,1,1,2,2,3,3,4,4,5],(i=new THREE.BufferGeometry).setIndex(new THREE.BufferAttribute(new Uint16Array(s),1)),i.addAttribute("position",new THREE.BufferAttribute(new Float32Array(a),3)),a.length=0,s.length=0,(l=new THREE.LineSegments(i,r)).up=this.wcsCamera.up,this.wcs.add(l),l.position.set(0,0,20),this.wcsTextNodes.push(l),e=null,t=null,r=null,this.scene.add(this.wcs),PLMVisRL.logger.finest("Created triad and added to scene")},renderWCS:function(e,t,r,i){if(this.enabled){e.clear(!1,!0,!1),e.setViewport(this.position[0],this.position[1],this.size,this.size);var n=new THREE.Vector3,o=new THREE.Quaternion,a=new THREE.Vector3;t.matrixWorld.decompose(n,o,a);var s=new THREE.Vector3;s.fromArray(r),n.sub(s),n.normalize(),n.setLength(25),this.wcsCamera.position.copy(n),this.wcsCamera.up.copy(t.up),this.wcsCamera.lookAt(this.scene.position),0!==this.wcsTextNodes.length&&(this.wcsTextNodes[0].lookAt((new THREE.Vector3).addVectors(this.wcsCamera.position,this.wcsTextNodes[0].position)),this.wcsTextNodes[0].up.copy(this.wcsCamera.up),this.wcsTextNodes[1].lookAt((new THREE.Vector3).addVectors(this.wcsCamera.position,this.wcsTextNodes[1].position)),this.wcsTextNodes[1].up.copy(this.wcsCamera.up),this.wcsTextNodes[2].lookAt((new THREE.Vector3).addVectors(this.wcsCamera.position,this.wcsTextNodes[2].position)),this.wcsTextNodes[2].up.copy(this.wcsCamera.up)),e.render(this.scene,this.wcsCamera,i)}}};var J=$;function ee(){PLMVisRL.logger.info("XformState Constructor"),this.id=null,this.resourceId=null,this.xformMatrix=null,this.matrix4=null,this.loaded=!1}ee.prototype={constructor:ee,prettyPrint:function(e){var t=e||this.xformMatrix;this.xformMatrix?console.group(this.resourceId.toString()):console.group("Transformation Matrix"),console.table([t.slice(0,4),t.slice(4,8),t.slice(8,12),t.slice(12,16)]),console.groupEnd()},read:function(e){if(null!=e)return this.xformMatrix=e.getFloats(),PLMVisRL.logger.finest("Read XformState with resourceID "+this.id.toString()+"."),this.loaded=!0,this}};var te=ee,re={};var ie={createUUID:function(){function e(e){for(;e.length<8;)e="0"+e;return e}var t;do{t=e(Math.floor(4294967296*Math.random()).toString(16))+"-"+e(Math.floor(4294967296*Math.random()).toString(16))+"-"+e(Math.floor(4294967296*Math.random()).toString(16))+"-"+e(Math.floor(4294967296*Math.random()).toString(16))}while(void 0!==re[t]);return re[t]=null,t}},ne="© 2017 Siemens Product Lifecycle Management Software Inc.";function oe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se={setAllLoggers:function(e){if("string"!=typeof e)throw new TypeError("[ Argument 1 | Expected type: string | Input type: "+ae(e)+" ]");var t,r=le.Level[e];if(null!=r&&r instanceof Object)for(var i in se)se.hasOwnProperty(i)&&(t=se[i])instanceof le&&(t.level=r);else console.warn("Logger levels were not set. Invalid level [ "+e+" ] inputted. Acceptable levels are "+le.getLoggingLevels())}},le=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._level=null,this.setLevel(r)}var t,r,i;return t=e,i=[{key:"_getFormattedDate",value:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" ",r=e.getHours();r<10&&(t+="0"),t+=r+":";var i=e.getMinutes();i<10&&(t+="0"),t+=i+":";var n=e.getSeconds();n<10&&(t+="0"),t+=n+".";var o=e.getMilliseconds();return o<100&&(t+="0"),o<10&&(t+="0"),t+=o}},{key:"getLogger",value:function(t,r){var i;return e.loggerMap.has(t)?(i=e.loggerMap.get(t)).setLevel(r):(i=new e(t,r),e.loggerMap.set(t,i),se[t]=i),i}},{key:"printLoggingLevels",value:function(){console.log("Acceptable levels are "+e.getLoggingLevels())}},{key:"getLoggingLevels",value:function(){var t=[];for(var r in e.Level)e.Level[r]&&t.push(r);return t}}],(r=[{key:"setLevel",value:function(t){t&&("string"==typeof t&&e.Level[t]?this._level=e.Level[t]:t.name&&e.Level[t.name]&&(this._level=e.Level[t.name]))}},{key:"isLoggable",value:function(e){return e.intValue>=this.level.intValue}},{key:"_log",value:function(t){if(this.isLoggable(t)){for(var r="["+e._getFormattedDate()+"|"+this.name+"|"+t.name+"]:",i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var a=[r].concat(n);t.intValue===e.Level.SEVERE.intValue?console.error.apply(console,a):t.intValue===e.Level.WARNING.intValue?console.warn.apply(console,a):console.log.apply(console,a)}}},{key:"severe",value:function(){this._log(e.Level.SEVERE,arguments)}},{key:"error",value:function(){this._log(e.Level.ERROR,arguments)}},{key:"performance",value:function(){this._log(e.Level.PERFORMANCE,arguments)}},{key:"perf",value:function(){this._log(e.Level.PERFORMANCE,arguments)}},{key:"warning",value:function(){this._log(e.Level.WARNING,arguments)}},{key:"warn",value:function(){this._log(e.Level.WARN,arguments)}},{key:"info",value:function(){this._log(e.Level.INFO,arguments)}},{key:"config",value:function(){this._log(e.Level.CONFIG,arguments)}},{key:"debug",value:function(){this._log(e.Level.DEBUG,arguments)}},{key:"fine",value:function(){this._log(e.Level.FINE,arguments)}},{key:"finer",value:function(){this._log(e.Level.FINER,arguments)}},{key:"trace",value:function(){this._log(e.Level.TRACE,arguments)}},{key:"finest",value:function(){this._log(e.Level.FINEST,arguments)}},{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"name",get:function(){return this._name}}])&&oe(t.prototype,r),i&&oe(t,i),e}();le.loggerMap=new Map,le.Level={OFF:{intValue:90,name:"OFF"},SEVERE:{intValue:80,name:"SEVERE"},ERROR:{intValue:80,name:"ERROR"},WARNING:{intValue:70,name:"WARNING"},WARN:{intValue:70,name:"WARN"},PERFORMANCE:{intValue:65,name:"PERFORMANCE"},INFO:{intValue:60,name:"INFO"},CONFIG:{intValue:50,name:"CONFIG"},DEBUG:{intValue:40,name:"DEBUG"},FINE:{intValue:30,name:"FINE"},FINER:{intValue:30,name:"FINER"},TRACE:{intValue:20,name:"TRACE"},FINEST:{intValue:20,name:"FINEST"}},r.d(t,"PRODUCT",function(){return ue}),r.d(t,"logger",function(){return ce}),r.d(t,"BUILD",function(){return"20220616"}),r.d(t,"COPYRIGHT",function(){return ne}),r.d(t,"VERSION",function(){return"6.1.1"}),r.d(t,"DMShader",function(){return m}),r.d(t,"FrameState",function(){return L}),r.d(t,"GeomState",function(){return v}),r.d(t,"LightState",function(){return P}),r.d(t,"MovingFrameCulling",function(){return x}),r.d(t,"Pass",function(){return b}),r.d(t,"PassState",function(){return A}),r.d(t,"RenderItem",function(){return O}),r.d(t,"RenderList",function(){return D}),r.d(t,"RenderListInterface",function(){return k}),r.d(t,"ResourceManager",function(){return _}),r.d(t,"ScreenSizeCulling",function(){return X}),r.d(t,"ShaderSrc",function(){return Q}),r.d(t,"ShapeState",function(){return K}),r.d(t,"Triad",function(){return J}),r.d(t,"XformState",function(){return te}),r.d(t,"Utils",function(){return ie});var ue="PLM Vis Render List",ce=le.getLogger("Navigator",le.Level.OFF);window.PLMVisRL={BUILD:"20220616",PRODUCT:ue,COPYRIGHT:ne,VERSION:"6.1.1",logger:ce,DMShader:m,FrameState:L,GeomState:v,LightState:P,MovingFrameCulling:x,Pass:b,PassState:A,RenderItem:O,RenderList:D,RenderListInterface:k,ResourceManager:_,ScreenSizeCulling:X,ShaderSrc:Q,ShapeState:K,Triad:J,XformState:te,Utils:ie}}])});
//# sourceMappingURL=plmvisrl.min.js.map