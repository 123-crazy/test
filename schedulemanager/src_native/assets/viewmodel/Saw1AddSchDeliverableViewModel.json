{
   "schemaVersion":"1.0.0",
   "imports":[
      "js/aw-panel-body.directive",
      "js/aw-panel-footer.directive",
      "js/aw-button.directive",
      "js/aw-i18n.directive",
      "js/aw-command-panel.directive",
      "js/aw-type-selector.directive",
      "js/aw-panel-section.directive",
      "js/visible-when.directive",
      "js/aw-widget.directive"
   ],
   "data":{
      "filterBox":{
         "displayName":"{{i18n.filter}}",
         "type":"STRING",
         "dbValue":""
      },
      "object_name":{
         "displayName":"{{i18n.name}}",
         "type":"STRING",
         "isRequired":"true",
         "dbValue":""
      },
      "object_desc":{
         "displayName":"{{i18n.description}}",
         "type":"STRING",
         "dbValue":""
      }
   },
   "actions":{
      "addSelection":{
         "actionType":"JSFunction",
         "method":"addSelectedObject",
         "inputData":{
            "data":"{{data}}",
            "selection":"{{data.dataProviders.awTypeSelector.selectedObjects}}"
         },
         "deps":"js/Saw1AddSchDeliverable"
      },
      "add":{
         "actionType":"TcSoaService",
         "serviceName":"ProjectManagement-2007-01-ScheduleManagement",
         "method":"createScheduleDeliverableTemplates",
         "inputData":{
            "scheduleDeliverableData":[
               {
                  "schedule":"{{ctx.selected}}",
                  "deliverableType":"{{function:schDeliverableTypeString}}",
                  "deliverableName":"{{data.object_name.dbValue}}"
               }
            ]
         },
         "deps":"js/Saw1AddSchDeliverable",
         "events":{
            "success":[
               {
                  "name":"cdm.relatedModified",
                  "eventData":{
                     "relatedModified":[
                        "{{ctx.selected}}"
                     ]
                  }
               },
               {
                   "name": "complete",
                   "eventData": {
                   "source": "toolAndInfoPanel"
                    }
               }
            ]
         }
      }
   },
   "functions":{
      "schDeliverableTypeString":{
         "functionName":"schDeliverableTypeString",
         "parameters":[
            "{{data}}"
         ]
      }
   },
   "onEvent":[
      {
         "eventId":"awTypeSelector.selectionChangeEvent",
         "action":"addSelection"
      }
   ],
   "conditions": {
        "isValidToAdd":
        {
          "expression":"data.selectedObject && data.selectedObject !== null && data.object_name.dbValue!==''"
        }
    },
   "i18n":{
      "add":[
         "ScheduleManagerMessages"
      ],
      "other":[
         "ScheduleManagerMessages"
      ],
      "loading":[
         "ScheduleManagerMessages"
      ],
      "name":[
         "ScheduleManagerMessages"
      ],
      "description":[
         "ScheduleManagerMessages"
      ]
   }
}
